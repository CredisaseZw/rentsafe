var Ye=Object.defineProperty,Oe=Object.defineProperties;var ke=Object.getOwnPropertyDescriptors;var ce=Object.getOwnPropertySymbols;var je=Object.prototype.hasOwnProperty,Ne=Object.prototype.propertyIsEnumerable;var be=Math.pow,ge=(o,s,a)=>s in o?Ye(o,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[s]=a,b=(o,s)=>{for(var a in s||(s={}))je.call(s,a)&&ge(o,a,s[a]);if(ce)for(var a of ce(s))Ne.call(s,a)&&ge(o,a,s[a]);return o},v=(o,s)=>Oe(o,ke(s));var ee=(o,s)=>{var a={};for(var t in o)je.call(o,t)&&s.indexOf(t)<0&&(a[t]=o[t]);if(o!=null&&ce)for(var t of ce(o))s.indexOf(t)<0&&Ne.call(o,t)&&(a[t]=o[t]);return a};var re=(o,s,a)=>new Promise((t,m)=>{var f=c=>{try{h(a.next(c))}catch(l){m(l)}},u=c=>{try{h(a.throw(c))}catch(l){m(l)}},h=c=>c.done?t(c.value):Promise.resolve(c.value).then(f,u);h((a=a.apply(o,s)).next())});import{r as i,j as e,a as le,b as de,u as Ie}from"./main-b0023e79.js";import"./PageHeader-5ed008b1.js";import{L as Le}from"./Layout-4b440c51.js";import{h as A}from"./moment-686b5dfa.js";import{_ as w,I as me}from"./index-75883b0c.js";import{f as te}from"./formatting-345d2430.js";import{a as Se,b as He,d as Fe,c as oe,u as he,F as Ve,C as Ue,M as k}from"./Modal-ab2a8506.js";import{M as Te}from"./MultipleUpload-45a1195b.js";import{u as $e,B as U}from"./Button-c6813304.js";import{S as Ge}from"./search-70fcdcb8.js";import{B as De,D as ze}from"./DrawerContent-e9da1090.js";import{E as Ke,e as qe}from"./removeClass-a49abf79.js";import"./index-400f49cd.js";import"./lodash-8b71f7dc.js";const We=["onKeyDown"];function Ze(o,s){if(o==null)return{};var a={},t=Object.keys(o),m,f;for(f=0;f<t.length;f++)m=t[f],!(s.indexOf(m)>=0)&&(a[m]=o[m]);return a}function Xe(o){return!o||o.trim()==="#"}const Ce=i.forwardRef((o,s)=>{let{onKeyDown:a}=o,t=Ze(o,We);const[m]=$e(Object.assign({tagName:"a"},t)),f=Se(u=>{m.onKeyDown(u),a==null||a(u)});return Xe(t.href)||t.role==="button"?e.jsx("a",Object.assign({ref:s},t,m,{onKeyDown:f})):e.jsx("a",Object.assign({ref:s},t,{onKeyDown:a}))});Ce.displayName="Anchor";const Je=Ce,ue=be(2,31)-1;function Be(o,s,a){const t=a-Date.now();o.current=t<=ue?setTimeout(s,t):setTimeout(()=>Be(o,s,a),ue)}function Qe(){const o=He(),s=i.useRef();return Fe(()=>clearTimeout(s.current)),i.useMemo(()=>{const a=()=>clearTimeout(s.current);function t(m,f=0){o()&&(a(),f<=ue?s.current=setTimeout(m,f):Be(s,m,Date.now()+f))}return{set:t,clear:a,handleRef:s}},[])}const xe=i.forwardRef((M,j)=>{var x=M,{active:o=!1,disabled:s=!1,className:a,style:t,activeLabel:m="(current)",children:f,linkStyle:u,linkClassName:h,as:c=Je}=x,l=ee(x,["active","disabled","className","style","activeLabel","children","linkStyle","linkClassName","as"]);const S=o||s?"span":c;return e.jsx("li",{ref:j,style:t,className:oe(a,"page-item",{active:o,disabled:s}),children:e.jsxs(S,v(b({className:oe("page-link",h),style:u},l),{children:[f,o&&m&&e.jsx("span",{className:"visually-hidden",children:m})]}))})});xe.displayName="PageItem";const et=xe;function ie(o,s,a=o){const t=i.forwardRef((h,u)=>{var c=h,{children:m}=c,f=ee(c,["children"]);return e.jsxs(xe,v(b({},f),{ref:u,children:[e.jsx("span",{"aria-hidden":"true",children:m||s}),e.jsx("span",{className:"visually-hidden",children:a})]}))});return t.displayName=o,t}const tt=ie("First","«"),at=ie("Prev","‹","Previous"),nt=ie("Ellipsis","…","More"),rt=ie("Next","›"),st=ie("Last","»"),Re=i.forwardRef((f,m)=>{var u=f,{bsPrefix:o,className:s,size:a}=u,t=ee(u,["bsPrefix","className","size"]);const h=he(o,"pagination");return e.jsx("ul",v(b({ref:m},t),{className:oe(s,h,a&&`${h}-${a}`)}))});Re.displayName="Pagination";const se=Object.assign(Re,{First:tt,Prev:at,Ellipsis:nt,Item:et,Next:rt,Last:st}),ot={[Ke]:"showing",[qe]:"showing show"},Pe=i.forwardRef((o,s)=>e.jsx(Ve,v(b({},o),{ref:s,transitionClasses:ot})));Pe.displayName="ToastFade";const lt=Pe,dt=i.createContext({onClose(){}}),_e=dt,Me=i.forwardRef((c,h)=>{var l=c,{bsPrefix:o,closeLabel:s="Close",closeVariant:a,closeButton:t=!0,className:m,children:f}=l,u=ee(l,["bsPrefix","closeLabel","closeVariant","closeButton","className","children"]);o=he(o,"toast-header");const j=i.useContext(_e),M=Se(x=>{j==null||j.onClose==null||j.onClose(x)});return e.jsxs("div",v(b({ref:h},u),{className:oe(o,m),children:[f,t&&e.jsx(Ue,{"aria-label":s,variant:a,onClick:M,"data-dismiss":"toast"})]}))});Me.displayName="ToastHeader";const it=Me,Ee=i.forwardRef((f,m)=>{var u=f,{className:o,bsPrefix:s,as:a="div"}=u,t=ee(u,["className","bsPrefix","as"]);return s=he(s,"toast-body"),e.jsx(a,b({ref:m,className:oe(o,s)},t))});Ee.displayName="ToastBody";const ct=Ee,Ae=i.forwardRef((O,r)=>{var n=O,{bsPrefix:o,className:s,transition:a=lt,show:t=!0,animation:m=!0,delay:f=5e3,autohide:u=!1,onClose:h,onEntered:c,onExit:l,onExiting:j,onEnter:M,onEntering:x,onExited:S,bg:H}=n,I=ee(n,["bsPrefix","className","transition","show","animation","delay","autohide","onClose","onEntered","onExit","onExiting","onEnter","onEntering","onExited","bg"]);o=he(o,"toast");const p=i.useRef(f),g=i.useRef(h);i.useEffect(()=>{p.current=f,g.current=h},[f,h]);const _=Qe(),B=!!(u&&t),Y=i.useCallback(()=>{B&&(g.current==null||g.current())},[B]);i.useEffect(()=>{_.set(Y,p.current)},[_,Y]);const L=i.useMemo(()=>({onClose:h}),[h]),D=!!(a&&m),G=e.jsx("div",v(b({},I),{ref:r,className:oe(o,s,H&&`bg-${H}`,!D&&(t?"show":"hide")),role:"alert","aria-live":"assertive","aria-atomic":"true"}));return e.jsx(_e.Provider,{value:L,children:D&&a?e.jsx(a,{in:t,onEnter:M,onEntering:x,onEntered:c,onExit:l,onExiting:j,onExited:S,unmountOnExit:!0,children:G}):G})});Ae.displayName="Toast";const ye=Object.assign(Ae,{Body:ct,Header:it});function pe({show:o,handleClose:s,leaseDetails:a}){const[t,m]=i.useState(""),[f,u]=i.useState(!1),[h,c]=i.useState(0),[l,j]=i.useState({}),[M,x]=i.useReducer(r,[]),{data:S,post:H,reset:I}=le([]);function r(n,p){switch(p.type){case"initialize":return[...n,...p.payload];case"updatePaymentAmount":return n.map(g=>g.lease_id===p.payload.lease_id?v(b({},g),{paymentAmount:p.payload.paymentAmount}):g);case"updatePaymentDate":return n.map(g=>g.lease_id===p.payload.lease_id?v(b({},g),{paymentDate:p.payload.paymentDate}):g);case"updateReceiptNumber":return n.map(g=>g.lease_id===p.payload.lease_id?v(b({},g),{receiptNumber:p.payload.receiptNumber}):g);case"updateDetails":return n.map(g=>g.lease_id===p.payload.lease_id?v(b({},g),{details:p.payload.details}):g);default:return n}}i.useEffect(()=>{de.get(reverseUrl("get_all_active_leases")).then(n=>{var p,g,_,B;x({type:"initialize",payload:(g=(p=n.data)==null?void 0:p.result)==null?void 0:g.map(Y=>v(b({},Y),{balance_amount:Y.balance_amount,paymentAmount:0,paymentDate:new Date().toISOString().split("T")[0],receiptNumber:"",details:""}))}),j(v(b({},(B=(_=n.data)==null?void 0:_.result)==null?void 0:B.find(Y=>Y.lease_id===a.lease_id)),{paymentAmount:0,paymentDate:new Date().toISOString().split("T")[0],receiptNumber:"",details:""}))}).catch(n=>{w.error("Something went wrong getting tenant details! Please try refreshing the page")})},[]);const O=n=>re(this,null,function*(){if(n.preventDefault(),u(!0),M.forEach(p=>{p.paymentAmount>0&&S.push({leaseId:p.lease_id,paymentAmount:p.paymentAmount,paymentDate:p.paymentDate,receiptNumber:p.receiptNumber,details:p.details})}),l.paymentAmount>0&&S.push({leaseId:l.lease_id,paymentAmount:Number(l.paymentAmount),paymentDate:l.paymentDate,receiptNumber:l.receiptNumber,details:l.details}),S.length===0){w.error("Please add at least one payment");return}H(reverseUrl("create_receipt_and_payment"),{onSuccess:p=>{var g,_;if(((g=p.props)==null?void 0:g.result)==="error"){w.error((_=p.props)==null?void 0:_.result);return}s("Receipts created successfully").then(()=>{I()})},onError:p=>{m(p),w.error("Something went wrong! Please try again")},onFinish:()=>{u(!1)}})});return e.jsx("div",{className:"container-xl p-5",children:e.jsxs("div",{className:"card card-raised",children:[e.jsx(me,{position:"top-right",duration:"4000"}),e.jsx("div",{className:"card-body p-4",children:e.jsxs(k,{show:o,onHide:s,size:"xl",backdrop:"static",centered:!0,children:[e.jsx(k.Header,{closeButton:!0}),e.jsx(k.Body,{className:"p-4 d-flex w-100 flex-column justify-content-between align-items-center",children:e.jsxs("div",{className:"table-responsive  w-100 ",children:[e.jsx("div",{className:"flex justify-content-center align-items-center w-100",children:e.jsx("h5",{className:"text-center tf-color bg-info",children:"Rent Receipt"})}),e.jsxs("table",{className:"table table-bordered",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderTop:"0px",fontSize:"12px",width:"100%"},children:[e.jsx("th",{scope:"col",style:{borderTop:"1px solid #e0e0e0"},children:"Date"}),e.jsx("th",{scope:"col",style:{borderTop:"1px solid #e0e0e0"},children:"Customer"}),e.jsx("th",{scope:"col",style:{borderTop:"1px solid #e0e0e0"},children:"Receipt No."}),e.jsx("th",{scope:"col",style:{borderTop:"1px solid #e0e0e0"},children:"Details"}),e.jsx("th",{scope:"col",style:{borderTop:"1px solid #e0e0e0"},children:"Currency"}),e.jsx("th",{scope:"col",style:{borderTop:"1px solid #e0e0e0"},children:"Amount Owing"}),e.jsx("th",{scope:"col",style:{borderTop:"1px solid #e0e0e0"},children:"Received Amount"}),e.jsx("th",{scope:"col",style:{borderTop:"1px solid",borderBottom:"1px solid"},children:"Amount Balance"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"tf-borderRight",style:{paddingRight:"1px",paddingLeft:"1px"},children:e.jsx("input",{onChange:n=>{const p=new Date(n.target.value),g=new Date(new Date().toISOString().split("T")[0]),_=new Date(l.opening_balance_date.split("T")[0]);if(p.setHours(0,0,0,0),g.setHours(0,0,0,0),_.setHours(0,0,0,0),p<_){w.error("You are attempting to post a payment/adjustment made before your opening balance date. Received amounts are already factored into the opening balance. If you need to make an adjustment, use the Accounting Adjustment menu option.");return}else if(p>g){w.error("You are attempting to post a payment/adjustment made before your opening balance date. Received amounts are already factored into the opening balance. If you need to make an adjustment, use the Accounting Adjustment menu option.");return}else j(v(b({},l),{paymentDate:n.target.value}))},className:"form-control form-control-sm tf-borderRight tf-input",type:"date",name:"date",id:"date",value:l==null?void 0:l.paymentDate,style:{width:"100%",border:"1px solid #111"}})}),e.jsx("td",{className:"tf-borderRight",style:{paddingRight:"1px",paddingLeft:"1px"},children:l==null?void 0:l.tenant}),e.jsx("td",{className:"tf-borderRight",style:{paddingRight:"1px",paddingLeft:"1px",maxWidth:"60px"},children:e.jsx("input",{onChange:n=>j(v(b({},l),{receiptNumber:n.target.value})),className:"form-control form-control-sm tf-borderRight tf-input",type:"text",name:"receiptNumber",id:"receiptNumber",value:l==null?void 0:l.receiptNumber,style:{width:"100%",border:"1px solid #111"}})}),e.jsx("td",{className:"tf-borderRight",style:{paddingRight:"1px",paddingLeft:"1px"},children:e.jsx("input",{onChange:n=>j(v(b({},l),{details:n.target.value})),className:"form-control form-control-sm tf-borderRight tf-input",type:"text",name:"details",id:"details",value:l==null?void 0:l.details,style:{width:"100%",border:"1px solid #111"}})}),e.jsx("td",{className:"tf-borderRight",style:{paddingRight:"1px",paddingLeft:"1px"},children:l==null?void 0:l.Currency}),e.jsx("td",{className:`tf-borderRight bg-${l==null?void 0:l.color} text-white text-end`,style:{paddingRight:"1px",paddingLeft:"1px"},children:te(l==null?void 0:l.rent_owing)}),e.jsxs("td",{className:"tf-borderRight",style:{paddingRight:"1px",paddingLeft:"1px"},children:[e.jsx("input",{onChange:n=>{j(v(b({},l),{paymentAmount:n.target.value}))},className:"form-control form-control-sm tf-borderRight tf-input",name:"paymentAmount",id:"paymentAmount",value:(l==null?void 0:l.paymentAmount)===0?"":l==null?void 0:l.paymentAmount,style:{width:"100%",border:"1px solid #111"}}),t&&e.jsx("div",{className:"alert alert-danger",role:"alert",children:t==null?void 0:t.paymentAmount})]}),e.jsx("td",{className:"tf-borderRight text-end",style:{paddingRight:"1px",paddingLeft:"1px",borderBottom:"1px solid #e0e0e0"},children:te((l==null?void 0:l.balance_amount)-(l==null?void 0:l.paymentAmount))})]}),h>0&&Array.from({length:h},(n,p)=>e.jsx(mt,{leases:M,dispatch:x},p))]})]}),e.jsx("div",{className:"d-flex flex-row-reverse",children:e.jsxs("button",{className:"btn btn-raised bg-success text-white",style:{backgroundColor:"#0d475c"},onClick:()=>c(n=>n+1),children:[e.jsx("i",{className:"leading-icon material-icons",children:"add"}),"Add Receipts"]})})]})}),e.jsx(k.Footer,{className:"p-4 d-flex justify-content-center",children:e.jsx("div",{className:"d-flex flex-row-reverse",children:e.jsx("button",{className:"btn btn-raised bg-info text-white",style:{backgroundColor:"#0d475c"},onClick:O,children:f?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-grow spinner-grow-sm"}),e.jsx("span",{className:"ml-2",children:"Processing.."})]}):e.jsx(e.Fragment,{children:"Submit"})})})})]})})]})})}function mt({leases:o,dispatch:s}){var m,f;const[a,t]=i.useState(null);return i.useEffect(()=>{a&&t(o.find(u=>u.lease_id===a.lease_id))},[o]),e.jsxs("tr",{children:[e.jsx("td",{className:"tf-borderRight",style:{paddingRight:"1px",paddingLeft:"1px"},children:e.jsx("input",{onChange:u=>a&&s({type:"updatePaymentDate",payload:{lease_id:a.lease_id,paymentDate:u.target.value}}),className:"form-control form-control-sm tf-borderRight tf-input",type:"date",name:"date",id:"date",value:a==null?void 0:a.paymentDate,max:new Date().toISOString().split("T")[0],min:a!=null&&a.opening_balance_date?new Date((m=a.opening_balance_date.split("T"))==null?void 0:m[0]).toISOString().split("T")[0]:"",style:{width:"100%",border:"1px solid #111"}})}),e.jsx("td",{className:"tf-borderRight",style:{paddingRight:"1px",paddingLeft:"1px"},children:e.jsxs("select",{onChange:u=>{t(o.find(h=>h.lease_id===parseInt(u.target.value)))},className:"form-control form-control-sm tf-borderRight tf-input",name:"lease",id:"lease",style:{width:"100%",border:"1px solid #e0e0e0",borderTop:"0px"},children:[e.jsx("option",{value:"",children:"Select Lease"}),o.map(u=>e.jsxs("option",{value:u.lease_id,children:[u.tenant," - ",u.lease_id]},u.lease_id))]})}),e.jsx("td",{className:"tf-borderRight",style:{paddingRight:"1px",paddingLeft:"1px",maxWidth:"60px"},children:e.jsx("input",{onChange:u=>a&&s({type:"updateReceiptNumber",payload:{lease_id:a.lease_id,receiptNumber:u.target.value}}),className:"form-control form-control-sm tf-borderRight tf-input",name:"receiptNumber",id:"receiptNumber",value:a==null?void 0:a.receiptNumber,style:{width:"100%",border:"1px solid #111"}})}),e.jsx("td",{className:"tf-borderRight",style:{paddingRight:"1px",paddingLeft:"1px"},children:e.jsx("input",{onChange:u=>a&&s({type:"updateDetails",payload:{lease_id:a.lease_id,receiptNumber:u.target.value}}),className:"form-control form-control-sm tf-borderRight tf-input",name:"details",id:"details",value:a==null?void 0:a.details,style:{width:"100%",border:"1px solid #111"}})}),e.jsx("td",{className:"tf-borderRight",style:{paddingRight:"1px",paddingLeft:"1px"},children:a==null?void 0:a.Currency}),e.jsx("td",{className:`tf-borderRight bg-${a==null?void 0:a.color} text-white text-end`,style:{paddingRight:"1px",paddingLeft:"1px"},children:te((f=a==null?void 0:a.rent_owing)!=null?f:0)}),e.jsx("td",{className:"tf-borderRight",style:{paddingRight:"1px",paddingLeft:"1px"},children:e.jsx("input",{onChange:u=>a&&s({type:"updatePaymentAmount",payload:{lease_id:a.lease_id,paymentAmount:Number(u.target.value)}}),className:"form-control form-control-sm tf-borderRight tf-input",name:"paymentAmount",id:"paymentAmount",value:(a==null?void 0:a.paymentAmount)===0?"":a==null?void 0:a.paymentAmount,style:{width:"100%",border:"1px solid #111"}})}),e.jsx("td",{className:"tf-borderRight text-end",style:{paddingRight:"1px",paddingLeft:"1px",borderBottom:"1px solid #e0e0e0"},children:a!=null&&a.balance_amount?te((a==null?void 0:a.balance_amount)-(a==null?void 0:a.paymentAmount)):""})]})}function ht(o,s){const[a,t]=i.useState(o);return i.useEffect(()=>{const m=setTimeout(()=>{t(o)},s);return()=>{clearTimeout(m)}},[o,s]),a}const ve=({show:o,handleClose:s,action:a,lesseeDetails:t,subscriptionPeriod:m,handleShowAlert:f})=>{const[u,h]=i.useState(!1),[c,l]=i.useState(""),[j,M]=i.useState(!1),[x,S]=i.useState({}),[H,I]=i.useState(!1),[r,O]=i.useState(!0),{data:n,setData:p,post:g,reset:_}=le({identificationNumber:(t==null?void 0:t.reg_ID_Number)||"",lesseeName:(t==null?void 0:t.name)||"",lesseeAddress:(t==null?void 0:t.address)||"",lesseePhone:(t==null?void 0:t.mobile)||"",leaseDetails:(t==null?void 0:t.lease_details)||"",leaseStartDate:(t==null?void 0:t.start_date)||"",leaseEndDate:(t==null?void 0:t.end_date)||"",leaseCurrency:(t==null?void 0:t.currency)||"USD",depositAmount:(t==null?void 0:t.deposit_amount)||0,leasePeriod:m||(t==null?void 0:t.lease_period),rentVariable:(t==null?void 0:t.rent_variable)||!1,depositPeriod:(t==null?void 0:t.deposit_period)||0,monthlyRental:(t==null?void 0:t.monthly_rentals)||0,paymentPeriodStart:(t==null?void 0:t.payment_period_start)||"25",paymentPeriodEnd:(t==null?void 0:t.payment_period_end)||"7",isCompany:!1,leaseId:(t==null?void 0:t.lease_id)||-1,monthOneBalance:"",monthTwoBalance:"",monthThreeBalance:"",moreThanThreeMonthsBalance:"",currentBalance:""}),B=()=>{O(!0),I(!1)},Y=()=>{I(!0),O(!1)},L=A(),D=L.clone().add(n.paymentPeriodEnd>=L.date()?0:1,"months").date(n.paymentPeriodEnd).format("DD-MMM-YY"),G=L.clone().subtract(n.paymentPeriodEnd>=L.date()?1:0,"months").date(n.paymentPeriodEnd).format("DD-MMM-YY"),ae=L.clone().subtract(n.paymentPeriodEnd>=L.date()?2:1,"months").date(n.paymentPeriodEnd).format("DD-MMM-YY"),Z=L.clone().subtract(n.paymentPeriodEnd>=L.date()?3:2,"months").date(n.paymentPeriodEnd).format("DD-MMM-YY"),X=ht(n.identificationNumber,500),z=i.useCallback(()=>{if(X&&X.length>=5)try{h(!0),de.post(reverseUrl("get-user"),n).then(N=>{var T,E,$,K,y,q,ne,P;(T=N.data)!=null&&T.props.name?(p(v(b({},n),{lesseeName:((E=N.data)==null?void 0:E.props.name)||"",lesseeAddress:(($=N.data)==null?void 0:$.props.address)||"",lesseePhone:((K=N.data)==null?void 0:K.props.phone)||""})),S((q=(y=N.data)==null?void 0:y.props)==null?void 0:q.openingBalances)):((n.identificationNumber.length===6||n.identificationNumber.length>7)&&w.error("User not found!",{duration:4e3,id:"error-toast",icon:"❌"}),l((P=(ne=N.data)==null?void 0:ne.props)==null?void 0:P.errors)),h(!1)}).catch(N=>{w.error("Something went wrong! Please try again"),l(N)}).finally(()=>{h(!1)})}catch(N){w.error("Something went wrong! Please try again"),l(N)}},[X]);i.useEffect(()=>{a==="add"&&z()},[a,z]),i.useEffect(()=>{if(n.leaseStartDate){const T=A(n.leaseStartDate);p(v(b({},n),{leaseEndDate:T}))}},[]);const R=N=>{N.target.id==="rentVariable"?p(v(b({},n),{[N.target.id]:N.target.checked})):N.target.id==="leasePeriod"?Number(N.target.value)>Number(m)?(w.error(`Lease period cannot be more than your subscription period (${m} months)`),p(v(b({},n),{[N.target.id]:m}))):p(v(b({},n),{[N.target.id]:N.target.value})):p(v(b({},n),{[N.target.id]:N.target.value}))},F=N=>re(void 0,null,function*(){if(N.preventDefault(),n.lesseeName===""){w.error("Please enter a valid lessee");return}n.leaseEndDate=A(n.leaseStartDate).add(n.leasePeriod,"months").format("YYYY-MM-DD"),n.leaseStartDate=A(n.leaseStartDate).format("YYYY-MM-DD"),n.monthOneBalance=Number(n.monthOneBalance),n.monthTwoBalance=Number(n.monthTwoBalance),n.monthThreeBalance=Number(n.monthThreeBalance),n.moreThanThreeMonthsBalance=Number(n.moreThanThreeMonthsBalance),n.currentBalance=Number(n.currentBalance),n.monthOneDate=A(G).format("YYYY-MM-DD"),n.monthTwoDate=A(ae).format("YYYY-MM-DD"),n.monthThreeDate=A(Z).format("YYYY-MM-DD"),n.currentDate=A(D).format("YYYY-MM-DD"),n.monthlyRental=Number(n.monthlyRental),n.depositAmount=n.depositAmount,n.depositPeriod=Number(n.depositPeriod),n.leasePeriod=Number(n.leasePeriod),n.outStandingBalance=n.moreThanThreeMonthsBalance+n.monthThreeBalance+n.monthTwoBalance+n.monthOneBalance+n.currentBalance,g(reverseUrl("create-individual-lease"),{onStart:()=>{h(!0)},onSuccess:T=>{var $,K,y;const E=($=T==null?void 0:T.props)==null?void 0:$.flash.message;E&&((K=T==null?void 0:T.props)==null?void 0:K.flash.type)==="success"?(s(),f(E,n.lesseeName)):E&&((y=T==null?void 0:T.props)==null?void 0:y.flash.type)==="error"&&w.error(E.message),_(),h(!1)},onError:T=>{w.error(N.message||"Something went wrong! Please try again"),l(N),h(!1)}})}),J=N=>{N.preventDefault(),n.leaseStartDate=A(n.leaseStartDate).format("YYYY-MM-DD"),n.leaseEndDate=A(n.leaseStartDate).add(n.leasePeriod,"months").format("YYYY-MM-DD"),g(reverseUrl("client-edit-lease"),{onStart:()=>{h(!0)},onSuccess:T=>{var E,$;((E=T==null?void 0:T.props)==null?void 0:E.flash.type)==="success"?(s(),f("Lease updated successfully")):(($=T==null?void 0:T.props)==null?void 0:$.flash.type)==="error"&&w.error("An error occurred, please try again later"),h(!1)},onError:T=>{w.error("Something went wrong! Please try again"),l(T),h(!1)}})};return e.jsx(e.Fragment,{children:e.jsx(k,{size:"lg",show:o,onHide:s,children:e.jsxs("div",{children:[e.jsx(k.Header,{closeButton:!0,className:"card-header bg-transparent",style:{paddingLeft:"0px"},children:e.jsxs("div",{className:"",children:[e.jsx("button",{className:`btn  btn-sm ${r?"btn-info text-white":"btn-light"}`,onClick:B,children:"Single"}),e.jsx("button",{className:`btn  btn-sm ${H?"btn-info text-white":"btn-light"}`,onClick:Y,children:"Multiple"})]})}),r?e.jsxs("div",{className:"card card-raised",children:[e.jsx("div",{className:"card-header bg-info",children:e.jsxs("div",{className:`d-flex justify-content-between
                      align-items-center`,children:[e.jsxs("div",{className:"me-4",children:[e.jsx("h2",{className:"display-6 mb-0 text-white",children:a==="view"?"View Lease - Individual":a==="edit"?"Edit Lease - Individual":"Add Lease - Individual"}),e.jsx("div",{className:"card-text"})]}),e.jsx("div",{className:"d-flex gap-2"})]})}),e.jsx("div",{className:"card-body p-4",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header bg-info px-4",style:{paddingTop:"2px",paddingBottom:"2px"},children:e.jsx("div",{className:`d-flex justify-content-center
                            align-items-center`,children:e.jsxs("div",{className:"me-4",children:[e.jsx("h6",{className:"display-6 mb-0 text-white",children:"Lease details"}),e.jsx("div",{className:"card-text"})]})})}),e.jsx("div",{className:"card-body p-4",style:{borderStyle:"solid",borderColor:"#26a69a"},children:e.jsx(k.Body,{children:e.jsxs("form",{onSubmit:a==="add"?F:a==="edit"?J:()=>{},children:[e.jsxs("div",{className:"row mb-4",children:[e.jsx(me,{}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"National ID:"}),e.jsx("input",{value:n.identificationNumber,onChange:R,type:"text",required:!0,name:"identificationNumber",id:"identificationNumber",className:"form-control form-control-sm"}),c&&e.jsx("div",{className:"text-danger mt-1",children:c.identificationNumber})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Lessee Name:"}),e.jsx("input",{value:n.lesseeName,onChange:R,type:"text",name:"lesseeName",required:!0,id:"lesseeName",className:"form-control form-control-sm",readOnly:!0}),c&&e.jsx("div",{className:"text-danger mt-1",children:c.lesseeName})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Lessee Mobile Number"}),e.jsx("input",{value:n.lesseePhone,onChange:R,type:"text",name:"lesseePhone",id:"lesseePhone",required:!0,className:"form-control form-control-sm",readOnly:a==="view"}),c&&e.jsx("div",{className:"text-danger mt-1",children:c.lesseePhone})]})]})]}),e.jsx("div",{className:"row mb-4",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Lease Address:"}),e.jsx("textarea",{value:n.lesseeAddress,onChange:R,type:"text",required:!!n.lesseeName,name:"lesseeAddress",id:"lesseeAddress",className:"form-control form-control-sm",readOnly:a==="view"}),c&&e.jsx("div",{className:"text-danger mt-1",children:c.lesseeAddress})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Lease Details:"}),e.jsx("textarea",{value:n.leaseDetails,onChange:R,name:"leaseDetails",id:"leaseDetails",className:"form-control form-control-sm",readOnly:a==="view"}),c&&e.jsx("div",{className:"text-danger mt-1",children:c.leaseDetails})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Lease Currency"}),e.jsxs("select",{value:n.leaseCurrency,onChange:R,id:"leaseCurrency",name:"leaseCurrency",className:"form-select form-select-sm",readOnly:a==="view",children:[e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"ZWG",children:"ZWG"})]}),c&&e.jsx("div",{className:"text-danger mt-1",children:c.leaseCurrency})]})]})}),e.jsx("div",{className:"row mb-4",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Monthly Rental:"}),e.jsx("input",{value:n.monthlyRental===0?"":n.monthlyRental,placeholder:"enter monthly rental",onChange:R,type:"text",required:!!n.lesseeName,id:"monthlyRental",name:"monthlyRental",className:"form-control form-control-sm",readOnly:a==="view"}),c&&e.jsx("div",{className:"text-danger mt-1",children:c.monthlyRental})]}),e.jsxs("div",{className:"mt-1 col-lg-4 d-flex flex-column",children:[e.jsx("label",{className:"form-label",children:"Variable Rent:"}),e.jsx("input",{checked:n.rentVariable,onChange:R,type:"checkbox",id:"rentVariable",name:"rentVariable",className:"form-check-input border-1 p-2 border-black"}),c&&e.jsx("div",{className:"text-danger mt-1",children:c.rentVariable})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Deposit Period(Months):"}),e.jsx("input",{value:n.depositPeriod===0?"":n.depositPeriod,placeholder:"enter deposit period",onChange:R,type:"text",id:"depositPeriod",name:"depositPeriod",className:"form-control form-control-sm",readOnly:a==="view"}),c&&e.jsx("div",{className:"text-danger mt-1",children:c.depositPeriod})]})]})}),e.jsx("div",{className:"row mb-4",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Deposit Amount:"}),e.jsx("input",{value:n.depositAmount===0?"":n.depositAmount,placeholder:"enter deposit amount",onChange:R,type:"text",name:"depositAmount",id:"depositAmount",className:"form-control form-control-sm",readOnly:a==="view"}),c&&e.jsx("div",{className:"text-danger mt-1",children:c.depositAmount})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Subs Months Remaining:"}),e.jsx("input",{value:n.leasePeriod,onChange:R,type:"number",id:"leasePeriod",name:"leasePeriod",className:"form-control form-control-sm"}),c&&e.jsx("div",{className:"text-danger mt-1",children:c.leasePeriod})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Lease Start Date:"}),e.jsx("input",{value:n.leaseStartDate,onChange:R,type:"date",required:!!n.lesseeName,name:"leaseStartDate",id:"leaseStartDate",className:"form-control form-control-sm",readOnly:a==="view"}),c&&e.jsx("div",{className:"text-danger mt-1",children:c.leaseStartDate})]})]})}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Lease End Date:"}),e.jsx("span",{className:"form-control form-control-sm",children:n.leaseStartDate?A(n.leaseStartDate).add(n.leasePeriod,"months").subtract(1,"days").format("DD / MM / YYYY"):""}),c&&e.jsx("div",{className:"text-danger mt-1",children:c.leaseEndDate})]}),e.jsxs("div",{className:"col-lg-4 mt-1",children:[e.jsx("label",{className:"form-label",children:"Payment Period Start Date:"}),e.jsx("input",{value:n.paymentPeriodStart,type:"number",id:"paymentPeriodStart",name:"paymentPeriodStart",className:"form-control form-control-sm",readOnly:!0,disabled:!0}),c&&e.jsx("div",{className:"text-danger mt-1",children:c.paymentPeriodStart})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Payment Period End Date:"}),e.jsx("input",{value:n.paymentPeriodEnd,onChange:R,type:"number",min:"1",max:"31",required:!!n.lesseeName,name:"paymentPeriodEnd",id:"paymentPeriodEnd",className:"form-control form-control-sm",readOnly:a==="view"}),c&&e.jsx("div",{className:"text-danger mt-1",children:c.paymentPeriodEnd})]})]}),a==="add"&&e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"table-responsive table-bordered",children:[e.jsx("h3",{className:"text-center p-2 fw-bolder h6",style:{backgroundColor:"#a0a0af"},children:"Opening Rent Balances"}),e.jsx("table",{className:"table table-bordered",children:e.jsxs("tbody",{children:[e.jsxs("tr",{style:{lineHeight:"5px",fontSize:"12px"},children:[e.jsx("th",{scope:"row",className:"fw-bold",style:{lineHeight:"15px"},children:"Payment Date"}),e.jsx("td",{className:"",style:{lineHeight:"15px"},children:"More than 3 months"}),e.jsx("td",{className:"",style:{lineHeight:"15px"},children:Z}),e.jsx("td",{className:"",style:{lineHeight:"15px"},children:ae}),e.jsx("td",{className:"",style:{lineHeight:"15px"},children:G}),e.jsx("td",{className:"",style:{lineHeight:"15px"},children:D}),e.jsx("td",{className:"fw-bold",style:{lineHeight:"15px"},children:"Outstanding Balance"})]}),e.jsxs("tr",{style:{lineHeight:"5px",fontSize:"12px"},children:[e.jsx("th",{scope:"row",className:"fw-bold",children:"Amount"}),e.jsx("td",{className:"bg-black text-white",children:e.jsx("input",{className:"form-control form-control-sm",type:"text",id:"moreThanThreeMonthsBalance",name:"moreThanThreeMonthsBalance",onChange:R,value:n.moreThanThreeMonthsBalance})}),e.jsx("td",{className:"text-white bg-danger",children:e.jsx("input",{className:"form-control form-control-sm",type:"text",id:"monthThreeBalance",name:"monthThreeBalance",onChange:R,value:n.monthThreeBalance})}),e.jsx("td",{className:"text-white",style:{backgroundColor:"#f87171"},children:e.jsx("input",{className:"form-control form-control-sm",type:"text",id:"monthTwoBalance",name:"monthTwoBalance",onChange:R,value:n.monthTwoBalance})}),e.jsx("td",{className:"text-white bg-warning",children:e.jsx("input",{className:"form-control form-control-sm",type:"text",id:"monthOneBalance",name:"monthOneBalance",onChange:R,value:n.monthOneBalance})}),e.jsx("td",{className:"text-white bg-success",children:e.jsx("input",{className:"form-control form-control-sm",type:"text",id:"currentBalance",name:"currentBalance",onChange:R,value:n.currentBalance})}),e.jsx("td",{className:`text-white d-flex align-items-center justify-content-center py-4 my-auto ${Number(n.moreThanThreeMonthsBalance)>0?"bg-black":Number(n.monthThreeBalance)>0?"bg-danger":Number(n.monthTwoBalance)>0?"bg-transperant":Number(n.monthOneBalance)>0?"bg-warning":"bg-success"}`,style:{backgroundColor:Number(n.monthTwoBalance)>0?"#f87171":""},children:te(Number(n.moreThanThreeMonthsBalance)+Number(n.monthThreeBalance)+Number(n.monthTwoBalance)+Number(n.monthOneBalance)+Number(n.currentBalance)||0)})]})]})})]})}),e.jsx("div",{className:"w-100 mt-4 d-flex justify-content-end gap-3",children:a==="view"?e.jsxs(e.Fragment,{children:[e.jsx(U,{className:"text-white",variant:"info",onClick:()=>{M(!0)},children:"Receipt"}),e.jsx(U,{className:"text-white",variant:"success",onClick:()=>{s()},children:"Edit"}),e.jsx(U,{className:"text-white",variant:"danger",onClick:()=>{s()},children:"Terminate"})]}):e.jsxs(e.Fragment,{children:[e.jsx(U,{variant:"secondary",onClick:s,children:"Cancel"}),e.jsx(U,{className:"text-white",variant:"info",type:"submit",disabled:u,children:u?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-grow spinner-grow-sm"}),e.jsx("span",{className:"ml-2",children:"processing.."})]}):"Submit"})," "]})})]})})}),j&&e.jsx(pe,{show:j,handleClose:()=>{M(!1)}})]})})]}):e.jsx(Te,{type:"individual",actionType:"lease"})]})})})},we=({show:o,handleClose:s,action:a,lesseeDetails:t,subscriptionPeriod:m,handleShowAlert:f})=>{const[u,h]=i.useState(!1),[c,l]=i.useState(!1),[j,M]=i.useState(!0),[x,S]=i.useState(""),[H,I]=i.useState(!1),{data:r,setData:O,post:n,reset:p}=le({identificationNumber:(t==null?void 0:t.reg_ID_Number)||"",lesseeName:(t==null?void 0:t.name)||"",lesseeAddress:(t==null?void 0:t.address)||"",mobile:(t==null?void 0:t.mobile)||"",email:(t==null?void 0:t.email)||"",rentGuarantorId:(t==null?void 0:t.rent_guarantor_id)||"",rentGuarantorIdType:(t==null?void 0:t.rent_guarantor_id_type)||"",rentGuarantorName:(t==null?void 0:t.rent_guarantor_name)||"",leaseDetails:(t==null?void 0:t.lease_details)||"",leaseStartDate:(t==null?void 0:t.start_date)||"",rentVariable:(t==null?void 0:t.rent_variable)||!1,leaseEndDate:(t==null?void 0:t.end_date)||"",leaseCurrency:(t==null?void 0:t.currency)||"USD",depositAmount:(t==null?void 0:t.deposit_amount)||0,leasePeriod:m||(t==null?void 0:t.lease_period),depositPeriod:(t==null?void 0:t.deposit_period)||0,monthlyRental:(t==null?void 0:t.monthly_rentals)||0,paymentPeriodStart:(t==null?void 0:t.payment_period_start)||"25",paymentPeriodEnd:(t==null?void 0:t.payment_period_end)||"7",isCompany:!0,leaseId:(t==null?void 0:t.lease_id)||-1,monthOneBalance:"",monthTwoBalance:"",monthThreeBalance:"",moreThanThreeMonthsBalance:"",currentBalance:""}),[g,_]=i.useState(a==="edit"?r.lesseeName:""),[B,Y]=i.useState(r.lesseeName),[L,D]=i.useState(r.email),[G,ae]=i.useState(r.identificationNumber),[Z,X]=i.useState(r.mobile),[z,R]=i.useState(r.lesseeAddress),F=A(),J=F.clone().add(r.paymentPeriodEnd>=F.date()?0:1,"months").date(r.paymentPeriodEnd).format("DD-MMM-YY"),N=F.clone().subtract(r.paymentPeriodEnd>=F.date()?1:0,"months").date(r.paymentPeriodEnd).format("DD-MMM-YY"),T=F.clone().subtract(r.paymentPeriodEnd>=F.date()?2:1,"months").date(r.paymentPeriodEnd).format("DD-MMM-YY"),E=F.clone().subtract(r.paymentPeriodEnd>=F.date()?3:2,"months").date(r.paymentPeriodEnd).format("DD-MMM-YY");i.useEffect(()=>{O(v(b({},r),{lesseeName:B,email:L,identificationNumber:String(G),mobile:Z,lesseeAddress:z}))},[G,B,L,Z,z]),i.useEffect(()=>{a==="add"&&(()=>{if(r.rentGuarantorId&&/^[\d]{8,9}[A-Za-z]{1}[\d]{2}$/.test(r.rentGuarantorId))try{h(!0),de.post(reverseUrl("get-user"),{identificationNumber:r.rentGuarantorId}).then(d=>{var C,V,W,Q,fe;(C=d.data)!=null&&C.props.name?O(v(b({},r),{rentGuarantorName:((V=d.data)==null?void 0:V.props.name)||"",rentGuarantorIdType:((W=d.data)==null?void 0:W.props.identification_type)||""})):(w.error("User not found!",{duration:4e3,icon:"❌"}),S((fe=(Q=d.data)==null?void 0:Q.props)==null?void 0:fe.errors)),h(!1)}).catch(d=>{w.error("Something went wrong! Please try again"),S(d)}).finally(()=>{h(!1)})}catch(d){w.error("Something went wrong! Please try again"),S(d)}})()},[r.rentGuarantorId]);const $=()=>{M(!0),l(!1)},K=()=>{l(!0),M(!1)},y=P=>{P.target.id==="rentVariable"?O(v(b({},r),{[P.target.id]:P.target.checked})):P.target.id==="leasePeriod"?Number(P.target.value)>Number(m)?(w.error(`Lease period cannot be more than your subscription period (${m} months)`),O(v(b({},r),{[P.target.id]:m}))):O(v(b({},r),{[P.target.id]:P.target.value})):O(v(b({},r),{[P.target.id]:P.target.value}))},q=P=>re(void 0,null,function*(){if(P.preventDefault(),!r.lesseeName){w.error("Please add a valid lessee");return}h(!0),r.leaseEndDate=A(r.leaseStartDate).add(r.leasePeriod,"months").format("YYYY-MM-DD"),r.monthOneBalance=Number(r.monthOneBalance),r.monthTwoBalance=Number(r.monthTwoBalance),r.monthThreeBalance=Number(r.monthThreeBalance),r.moreThanThreeMonthsBalance=Number(r.moreThanThreeMonthsBalance),r.currentBalance=Number(r.currentBalance),r.monthOneDate=A(N).format("YYYY-MM-DD"),r.monthTwoDate=A(T).format("YYYY-MM-DD"),r.monthThreeDate=A(E).format("YYYY-MM-DD"),r.currentDate=A(J).format("YYYY-MM-DD"),r.monthlyRental=Number(r.monthlyRental),r.depositAmount=r.depositAmount,r.depositPeriod=Number(r.depositPeriod),r.leasePeriod=Number(r.leasePeriod),r.outStandingBalance=r.moreThanThreeMonthsBalance+r.monthThreeBalance+r.monthTwoBalance+r.monthOneBalance+r.currentBalance,n(reverseUrl("create-company-lease"),{onStart:()=>{h(!0)},onSuccess:d=>{var V,W,Q;const C=(V=d==null?void 0:d.props)==null?void 0:V.flash.message;C&&((W=d==null?void 0:d.props)==null?void 0:W.flash.type)==="success"?(s(),p(),f(C,r.lesseeName)):C&&((Q=d==null?void 0:d.props)==null?void 0:Q.flash.type)==="error"&&w.error(C.message),h(!1)},onError:d=>{w.error(P.message||"Something went wrong! Please try again"),S(P),h(!1)}})}),ne=P=>{P.preventDefault(),r.leaseStartDate=A(r.leaseStartDate).format("YYYY-MM-DD"),n(reverseUrl("client-edit-lease"),{onStart:()=>{h(!0)},onSuccess:d=>{var C,V;((C=d==null?void 0:d.props)==null?void 0:C.flash.type)==="success"?(s(),f("Lease updated successfully")):((V=d==null?void 0:d.props)==null?void 0:V.flash.type)==="error"&&w.error("An error occurred, please try again"),h(!1)},onError:d=>{w.error("Something went wrong! Please try again"),S(d),h(!1)}})};return e.jsx(e.Fragment,{children:e.jsx(k,{size:"lg",show:o,onHide:s,children:e.jsxs("div",{children:[e.jsx(k.Header,{closeButton:!0,className:"card-header bg-transparent",style:{paddingLeft:"0px"},children:e.jsxs("div",{className:"",children:[e.jsx("button",{className:`btn  btn-sm ${j?"btn-info text-white":"btn-light"}`,onClick:$,children:"Single"}),e.jsx("button",{className:`btn  btn-sm ${c?"btn-info text-white":"btn-light"}`,onClick:K,children:"Multiple"})]})}),j?e.jsxs("div",{className:"card card-raised",children:[e.jsx("div",{className:"card-header bg-info",children:e.jsxs("div",{className:`d-flex justify-content-between
                      align-items-center`,children:[e.jsxs("div",{className:"me-4",children:[e.jsx("h2",{className:"display-6 mb-0 text-white",children:a==="view"?"View Lease - Company":a==="edit"?"Edit Lease - Company":"Add Lease - Company"}),e.jsx("div",{className:"card-text"})]}),e.jsx("div",{className:"d-flex gap-2"})]})}),e.jsx("div",{className:"card-body p-4",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header bg-info px-4",style:{paddingTop:"2px",paddingBottom:"2px"},children:e.jsx("div",{className:`d-flex justify-content-center
                            align-items-center`,children:e.jsxs("div",{className:"me-4",children:[e.jsx("h6",{className:"display-6 mb-0 text-white",children:"Lease details"}),e.jsx("div",{className:"card-text"})]})})}),e.jsx("div",{className:"card-body p-4",style:{borderStyle:"solid",borderColor:"#26a69a"},children:e.jsx(k.Body,{children:e.jsxs("form",{onSubmit:a==="add"?q:a==="edit"?ne:()=>{},children:[e.jsx("div",{className:"row mb-4",children:e.jsxs("div",{className:"row",children:[e.jsx(me,{}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Company Trading Name:"}),e.jsx(Ge,{from:"leases",delay:500,placeholder:"Company Name",value:g,setValue:_,url:reverseUrl("get_searched_companies"),type:"company",setAddress:R,setClientName:Y,setRegNumber:D,setClientId:ae,setMobileNo:X}),x&&e.jsx("div",{className:"text-danger mt-1",children:x.identificationNumber})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Lessee Name:"}),e.jsx("input",{value:r.lesseeName,onChange:y,type:"text",name:"lesseeName",readOnly:!0,required:!0,id:"lesseeName",className:"form-control form-control-sm"}),x&&e.jsx("div",{className:"text-danger mt-1",children:x.lesseeName})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Email:"}),e.jsx("input",{value:r.email,onChange:y,type:"text",name:"email",required:!0,id:"email",className:"form-control form-control-sm",readOnly:a==="view"}),x&&e.jsx("div",{className:"text-danger mt-1",children:x.email})]})]})}),e.jsx("div",{className:"row mb-4",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Mobile:"}),e.jsx("input",{value:r.mobile,onChange:y,type:"text",name:"mobile",required:!0,id:"mobile",className:"form-control form-control-sm",readOnly:a==="view"}),x&&e.jsx("div",{className:"text-danger mt-1",children:x.mobile})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Rent Guarantor ID:"}),e.jsx("input",{value:r.rentGuarantorId,onChange:y,type:"text",name:"rentGuarantorId",id:"rentGuarantorId",className:"form-control form-control-sm",readOnly:a==="view"}),x&&e.jsx("div",{className:"text-danger mt-1",children:x.rentGuarantorId})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Rent Guarantor Name:"}),e.jsx("input",{value:r.rentGuarantorName,onChange:y,type:"text",name:"rentGuarantorName",id:"rentGuarantorName",className:"form-control form-control-sm",readOnly:!0}),x&&e.jsx("div",{className:"text-danger mt-1",children:x.rentGuarantorName})]})]})}),e.jsx("div",{className:"row mb-4",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Lease Address:"}),e.jsx("textarea",{value:r.lesseeAddress,onChange:y,type:"text",required:!!r.lesseeName,name:"lesseeAddress",id:"lesseeAddress",className:"form-control form-control-sm",readOnly:a==="view"}),x&&e.jsx("div",{className:"text-danger mt-1",children:x.lesseeAddress})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Lease Details:"}),e.jsx("textarea",{value:r.leaseDetails,onChange:y,type:"text",name:"leaseDetails",id:"leaseDetails",className:"form-control form-control-sm",readOnly:a==="view"}),x&&e.jsx("div",{className:"text-danger mt-1",children:x.leaseDetails})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Lease Currency"}),e.jsxs("select",{value:r.leaseCurrency,onChange:y,id:"leaseCurrency",name:"leaseCurrency",className:"form-select form-select-sm",readOnly:a==="view",children:[e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"ZWG",children:"ZWG"})]}),x&&e.jsx("div",{className:"text-danger mt-1",children:x.leaseCurrency})]})]})}),e.jsx("div",{className:"row mb-4",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Monthly Rental:"}),e.jsx("input",{value:r.monthlyRental===0?"":r.monthlyRental,placeholder:"enter monthly rental",onChange:y,type:"text",required:!!r.lesseeName,id:"monthlyRental",name:"monthlyRental",className:"form-control form-control-sm",readOnly:a==="view"}),x&&e.jsx("div",{className:"text-danger mt-1",children:x.monthlyRental})]}),e.jsxs("div",{className:"mt-1 col-lg-4 d-flex flex-column",children:[e.jsx("label",{className:"form-label",children:"Variable Rent:"}),e.jsx("input",{checked:r.rentVariable,onChange:y,type:"checkbox",id:"rentVariable",name:"rentVariable",className:"form-check-input border-1 p-2 border-black",readOnly:a==="view"}),x&&e.jsx("div",{className:"text-danger mt-1",children:x.rentVariable})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Deposit Period(Months):"}),e.jsx("input",{value:r.depositPeriod===0?"":r.depositPeriod,placeholder:"enter deposit period",onChange:y,type:"text",id:"depositPeriod",name:"depositPeriod",className:"form-control form-control-sm",readOnly:a==="view"}),x&&e.jsx("div",{className:"text-danger mt-1",children:x.depositPeriod})]})]})}),e.jsx("div",{className:"row mb-4",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Deposit Amount:"}),e.jsx("input",{value:r.depositAmount===0?"":r.depositAmount,placeholder:"enter deposit amount",onChange:y,type:"text",name:"depositAmount",id:"depositAmount",className:"form-control form-control-sm",readOnly:a==="view"}),x&&e.jsx("div",{className:"text-danger mt-1",children:x.depositAmount})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Subs Months Remaining:"}),e.jsx("input",{value:r.leasePeriod,onChange:y,type:"number",id:"leasePeriod",name:"leasePeriod",className:"form-control form-control-sm"}),x&&e.jsx("div",{className:"text-danger mt-1",children:x.leasePeriod})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Lease Start Date:"}),e.jsx("input",{value:r.leaseStartDate,onChange:y,type:"date",name:"leaseStartDate",required:!!r.lesseeName,id:"leaseStartDate",className:"form-control form-control-sm",readOnly:a==="view"}),x&&e.jsx("div",{className:"text-danger mt-1",children:x.leaseStartDate})]})]})}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Lease End Date:"}),e.jsx("span",{className:"form-control form-control-sm",children:r.leaseStartDate?A(r.leaseStartDate).add(r.leasePeriod,"months").subtract(1,"days").format("DD / MM / YYYY"):""}),x&&e.jsx("div",{className:"text-danger mt-1",children:x.leaseEndDate})]}),e.jsxs("div",{className:"col-lg-4 mt-1",children:[e.jsx("label",{className:"form-label",children:"Payment Period Start Date:"}),e.jsx("input",{value:r.paymentPeriodStart,onChange:y,type:"number",id:"paymentPeriodStart",name:"paymentPeriodStart",className:"form-control form-control-sm",readOnly:!0,disabled:!0}),x&&e.jsx("div",{className:"text-danger mt-1",children:x.paymentPeriodStart})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Payment Period End Date:"}),e.jsx("input",{value:r.paymentPeriodEnd,onChange:y,min:"1",max:"31",type:"number",required:!!r.lesseeName,name:"paymentPeriodEnd",id:"paymentPeriodEnd",className:"form-control form-control-sm",readOnly:a==="view"}),x&&e.jsx("div",{className:"text-danger mt-1",children:x.paymentPeriodEnd})]})]}),a==="add"&&e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"table-responsive table-bordered",children:[e.jsx("h3",{className:"text-center p-2 fw-bolder h6",style:{backgroundColor:"#a0a0af"},children:"Opening Rent Balances"}),e.jsx("table",{className:"table table-bordered",children:e.jsxs("tbody",{children:[e.jsxs("tr",{style:{lineHeight:"5px",fontSize:"12px"},children:[e.jsx("th",{scope:"row",className:"fw-bold",style:{lineHeight:"15px"},children:"Payment Date"}),e.jsx("td",{className:"",style:{lineHeight:"15px"},children:"More than 3 months"}),e.jsx("td",{className:"",style:{lineHeight:"15px"},children:E}),e.jsx("td",{className:"",style:{lineHeight:"15px"},children:T}),e.jsx("td",{className:"",style:{lineHeight:"15px"},children:N}),e.jsx("td",{className:"",style:{lineHeight:"15px"},children:J}),e.jsx("td",{className:"fw-bold",style:{lineHeight:"15px"},children:"Outstanding Balance"})]}),e.jsxs("tr",{style:{lineHeight:"5px",fontSize:"12px"},children:[e.jsx("th",{scope:"row",className:"fw-bold",children:"Amount"}),e.jsx("td",{className:"bg-black text-white",children:e.jsx("input",{className:"form-control form-control-sm",type:"text",id:"moreThanThreeMonthsBalance",name:"moreThanThreeMonthsBalance",onChange:y,value:r.moreThanThreeMonthsBalance})}),e.jsx("td",{className:"text-white bg-danger",children:e.jsx("input",{className:"form-control form-control-sm",type:"text",id:"monthThreeBalance",name:"monthThreeBalance",onChange:y,value:r.monthThreeBalance})}),e.jsx("td",{className:"text-white",style:{backgroundColor:"#f87171"},children:e.jsx("input",{className:"form-control form-control-sm",type:"text",id:"monthTwoBalance",name:"monthTwoBalance",onChange:y,value:r.monthTwoBalance})}),e.jsx("td",{className:"text-white bg-warning",children:e.jsx("input",{className:"form-control form-control-sm",type:"text",id:"monthOneBalance",name:"monthOneBalance",onChange:y,value:r.monthOneBalance})}),e.jsx("td",{className:"text-white bg-success",children:e.jsx("input",{className:"form-control form-control-sm",type:"text",id:"currentBalance",name:"currentBalance",onChange:y,value:r.currentBalance})}),e.jsx("td",{className:`text-white text-end h-100 d-flex align-items-center justify-content-center py-4 my-auto ${Number(r.moreThanThreeMonthsBalance)>0?"bg-black":Number(r.monthThreeBalance)>0?"bg-danger":Number(r.monthTwoBalance)>0?"bg-transperant":Number(r.monthOneBalance)>0?"bg-warning":"bg-success"}`,style:{backgroundColor:Number(r.monthTwoBalance)>0?"#f87171":""},children:te(Number(r.moreThanThreeMonthsBalance)+Number(r.monthThreeBalance)+Number(r.monthTwoBalance)+Number(r.monthOneBalance)+Number(r.currentBalance)||0)})]})]})})]})}),e.jsx("div",{className:"w-100 d-flex justify-content-end gap-3",children:a==="view"?e.jsxs(e.Fragment,{children:[e.jsx(U,{className:"text-white",variant:"info",onClick:()=>{I(!0)},children:"Receipt"}),e.jsx(U,{className:"text-white",variant:"success",onClick:()=>{s()},children:"Edit"}),e.jsx(U,{className:"text-white",variant:"danger",onClick:()=>{s()},children:"Terminate"})]}):e.jsxs(e.Fragment,{children:[e.jsx(U,{variant:"secondary",onClick:s,children:"Cancel"}),e.jsx(U,{className:"text-white",variant:"info",type:"submit",disabled:u,children:u?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-grow spinner-grow-sm"}),e.jsx("span",{className:"ml-2",children:"processing.."})]}):"Submit"})," "]})})]})})}),H&&e.jsx(pe,{show:H,handleClose:()=>{I(!1)}})]})})]}):e.jsx(Te,{type:"company",actionType:"lease"})]})})})},ut=({show:o,handleClose:s,handleShowAlert:a,leaseData:t})=>{const[m,f]=i.useState(!1),{data:u,post:h}=le({leaseId:t.lease_id}),c=()=>{h(reverseUrl("delete_lease"),{onStart:()=>{f(!0)},onSuccess:l=>{a("Lease terminated successfully"),f(!1)},onError:l=>{w.error("Something went wrong! Please try again"),f(!1)},onFinish:()=>{s()}})};return e.jsx("div",{className:"container-xl p-5",children:e.jsx("div",{className:"card card-raised",children:e.jsx("div",{className:"card-body p-4",children:e.jsxs(k,{show:o,onHide:s,size:"md",backdrop:"static",centered:!0,children:[e.jsx(k.Header,{closeButton:!0,className:"h4 bg-info text-white text-center text-uppercase",children:"Confirm Lease Termination"}),e.jsxs(k.Body,{className:"p-4 d-flex justify-content-between align-items-center gap-4",children:[e.jsx(me,{}),e.jsxs("p",{className:"my-3 text-center",children:["Are you sure you want to terninate lease for ",t.name,"? This action cannot be undone."]})]}),e.jsxs(k.Footer,{className:"p-4 d-flex justify-content-end gap-4",children:[e.jsxs(U,{onClick:s,variant:"secondary",children:[e.jsx("i",{className:"material-icons",children:"cancel"}),"Cancel"]}),e.jsxs(U,{onClick:c,variant:"danger",children:[e.jsx("i",{className:"material-icons",children:"done"}),"Delete"]})]})]})})})})},xt=({show:o,handleClose:s,url:a,setVerified:t,verification_type:m,setCreditInfo:f})=>{const[u,h]=i.useState(!1),[c,l]=i.useState({}),{data:j,setData:M,post:x,reset:S}=le({otp:"",verification_type:m}),[H,I]=i.useState(!1),[r,O]=i.useState(30);i.useEffect(()=>{const B=setInterval(()=>{O(Y=>Y<=1?(clearInterval(B),I(!0),0):Y-1)},1e3);return()=>clearInterval(B)},[]);const n=()=>re(void 0,null,function*(){I(!1);try{(yield de.get(reverseUrl("new_otp"))).data.status==="success"?w.success("OTP sent successfully"):w.error("Something went wrong! Please try again")}catch(B){w.error("Something went wrong! Please try again")}}),p=B=>M(v(b({},j),{[B.target.id]:B.target.value})),g=()=>j.otp.length!==4?(l({otp:"otp must be four digits"}),!1):parseInt(j.otp,10)?!0:(l({otp:"otp must be a number"}),!1),_=B=>{console.log("indi"),B.preventDefault(),g()&&(x(reverseUrl(a),{onStart:()=>{h(!0)},onSuccess:Y=>{s(),S(),w.success("Verification successful"),h(!1),typeof t=="function"&&t(!0)},onError:Y=>{w.error("Something went wrong! Please try again"),l(Y),console.log(erros),h(!1)}}),h(!1))};return e.jsx(e.Fragment,{children:e.jsx(k,{size:"lg",show:o,onHide:s,centered:!0,children:e.jsx("div",{children:e.jsxs("div",{className:"card card-raised",children:[e.jsx("div",{className:"card-header bg-info px-4",children:e.jsxs("div",{className:`d-flex justify-content-between
                                align-items-center`,children:[e.jsxs("div",{className:"me-4",children:[e.jsx("h2",{className:"display-6 mb-0 text-white",children:"Verify OTP"}),e.jsx("div",{className:"card-text"})]}),e.jsx("div",{className:"d-flex gap-2"})]})}),e.jsx("div",{className:"card-body p-4",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body p-4",style:{borderStyle:"solid",borderColor:"#26a69a"},children:[e.jsx(k.Body,{children:e.jsxs("div",{className:"row mb-4",children:[e.jsxs("div",{className:"col-md-12",children:[e.jsx("div",{children:e.jsx("p",{children:m==="individual"?"Enter the 4-digit code we sent to user's mobile number. This code will expire after 5 minutes":"Enter the 4-digit code we sent to user's email. This code will expire after 5 minutes"})}),e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Verification Code"}),e.jsx("input",{value:j.otp,onChange:p,type:"text",name:"otp",id:"otp",placeholder:"Enter your 4 digit otp",className:"form-control form-control-sm"}),c&&e.jsx("div",{className:"text-danger mt-1",children:c.otp})]})})]}),e.jsxs("div",{className:"mt-5 d-flex gap-4 align-items-center ",children:[e.jsxs("p",{children:["Didn't receive code?",e.jsx("button",{onClick:n,className:"ms-2 text-decoration-underline border-0 bg-transparent text-info",disabled:H===!1,children:"Resend Code"})]}),r>0&&e.jsx("p",{className:"text-success",children:`Resend code in ${r} seconds`})]})]})}),e.jsx(k.Footer,{children:e.jsx(U,{className:"text-white",variant:"info",onClick:B=>_(B),disabled:u,children:u?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-grow spinner-grow-sm"}),e.jsx("span",{className:"ml-2",children:"processing.."})]}):"Verify"})})]})})})]})})})})};function pt({currentPage:o,totalPages:s,totalItems:a,onPageChange:t}){return e.jsxs(se,{className:"justify-content-end mt-3",children:[e.jsx(se.First,{disabled:o===1,onClick:()=>t(1)}),e.jsx(se.Prev,{disabled:o===1,onClick:()=>t(o-1)}),Array.from({length:s},(m,f)=>f+1).map(m=>e.jsx(se.Item,{active:m===o,onClick:()=>t(m),children:m},m)),e.jsx(se.Next,{disabled:o===s,onClick:()=>t(o+1)}),e.jsx(se.Last,{disabled:o===s,onClick:()=>t(s)})]})}const ft=({leases:o,queryParams:s=null,total_pages:a,total_items:t,current_page:m})=>{const[f,u]=i.useState(!1),[h,c]=i.useState(!1),[l,j]=i.useState({}),[M,x]=i.useState([]),[S,H]=i.useState({}),[I,r]=i.useState(!1),[O,n]=i.useState(!1),[p,g]=i.useState(0),[_,B]=i.useState(!1),[Y,L]=i.useState(!1),[D,G]=i.useState(""),[ae,Z]=i.useState(!1),[X,z]=i.useState(!1),[R,F]=i.useState(""),[J,N]=i.useState(""),{get:T}=le(),E=(d,C)=>{z(!0),N(C),F(d)},$=()=>{z(!1),N(""),F("")},K=d=>{const C=new URL("/clients/leases/",window.location.origin);Object.entries(v(b({},s),{page:d})).forEach(([V,W])=>{C.searchParams.set(V,W)}),T(C.href,{preserveState:!0})};i.useEffect(()=>{de.post(reverseUrl("open_subscription")).then(d=>{x(d.data)}).catch(d=>{})},[x]);const y=document.getElementById("hide-footer");i.useEffect(()=>(y!==null&&document.getElementById("footer").classList.add("d-none"),()=>{y!==null&&document.getElementById("footer").classList.remove("d-none")}),[y]),s=s||{};const q=(d,C)=>{C?s[d]=C:delete s[d];const V=new URL("/clients/leases/",window.location.origin);Object.entries(s).forEach(([W,Q])=>{V.searchParams.set(W,Q)}),T(V.href,{preserveState:!0})},ne=(d,C)=>{C.key==="Enter"&&q(d,C.target.value)},P=Ie().props.error;return P&&w.error(P),e.jsxs("main",{className:"position-relative",id:"hide-footer",style:{height:"100%"},children:[R&&e.jsxs(ye,{onClose:$,show:X,delay:1e4,className:"w-100 shadow-none ",style:{background:"#dcfce7"},autohide:!0,children:[e.jsxs(ye.Header,{className:"text-uppercase w-100",children:[e.jsx("strong",{className:"me-auto",children:J?`Following message has been sent to ${J}`:""}),e.jsx("small",{className:"text-muted text-capitalize ms-auto",children:"just now"})]}),e.jsx("p",{className:"p-4",children:R})]}),e.jsx("div",{className:"container-xl",children:e.jsxs("div",{className:"card card-raised mb-5",children:[e.jsx("div",{className:"card-header px-4",style:{height:"50px",backgroundColor:"#32a4a8"},children:e.jsx("div",{className:"d-flex justify-content-center align-items-center",children:e.jsx("div",{className:"",children:e.jsx("h2",{className:"display-6 tf-color",children:"Lease Management"})})})}),e.jsxs("div",{className:"card-body p-4 position-relative ",children:[e.jsx("div",{className:"row mb-2",children:e.jsx("div",{className:"col-md-3",children:e.jsx("form",{onSubmit:d=>{d.preventDefault(),q("name",d.target.elements.searchInput.value)},children:e.jsxs("div",{class:"input-group",children:[e.jsx("input",{type:"text",className:"form-control",defaultValue:s.name,placeholder:"Search by name",name:"searchInput",onBlur:d=>q("name",d.target.value),onKeyPress:d=>{d.key==="Enter"&&(d.preventDefault(),q("name",d.target.value)),ne("name",d)}}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Search"})]})})})}),e.jsx("div",{className:"",style:{backgroundColor:"#428f38"},children:e.jsx("h5",{className:"text-center tf-color",children:"Active Lease"})}),e.jsx("div",{className:"table-responsive tableFixHead",children:e.jsxs("table",{className:"table-responsive table table-bordered",children:[e.jsx("thead",{className:"bg-white",children:e.jsxs("tr",{style:{borderTop:"0px"},children:[e.jsx("th",{scope:"col",style:{width:"100px"},children:"No."}),e.jsx("th",{scope:"col",style:{},children:"Tenant"}),e.jsx("th",{scope:"col",style:{},children:"Customer Number"}),e.jsx("th",{scope:"col",className:"text-end",children:"Rent Owing"}),e.jsx("th",{scope:"col",colSpan:3,className:"tf-borderRight",children:e.jsx("span",{style:{visibility:"hidden"},children:"Actions to be done"})})]})}),e.jsx("tbody",{children:o==null?void 0:o.map((d,C)=>e.jsxs("tr",{className:"w-100 py-2",children:[e.jsx("th",{scope:"row",children:C+1}),e.jsx("td",{children:d.name}),e.jsx("td",{children:d.mobile_number}),e.jsxs("td",{className:`bg-${d.color} text-white text-end`,style:{backgroundColor:d.color=="light-red"?"#f87171":""},children:[d.currency,te(d.owing_amount)]}),e.jsx("td",{className:"bg-info text-white text-center tfRow",onClick:()=>{n(!0),j(d)},children:"Receipt"}),e.jsx("td",{className:"bg-primary text-white text-center tfRow",onClick:()=>{c(!0),u(!1),j(d),H({type:d.is_company?"company":"individual"})},children:"Adjust"}),e.jsx("td",{className:"bg-danger text-white text-center tfRow",onClick:()=>{r(!0),j(d)},children:"Terminate"})]},"lease"+C))})]})}),e.jsx(pt,{currentPage:m,totalPages:a,totalItems:t,onPageChange:K}),(S==null?void 0:S.type)==="individual"&&f&&e.jsx(ve,{action:"add",show:f,handleClose:()=>{u(!1),j({})},setShowVerify:B,lesseeDetails:l,subscriptionPeriod:p,handleShowAlert:E}),(S==null?void 0:S.type)==="individual"&&h&&e.jsx(ve,{action:"edit",show:h,handleClose:()=>{c(!1),j({})},handleShowAlert:E,lesseeDetails:l,subscriptionPeriod:l.lease_period}),(S==null?void 0:S.type)==="company"&&f&&e.jsx(we,{action:"add",show:f,handleClose:()=>{u(!1),j({})},lesseeDetails:l,subscriptionPeriod:p,handleShowAlert:E}),(S==null?void 0:S.type)==="company"&&h&&e.jsx(we,{action:"edit",show:h,handleClose:()=>{c(!1),j({})},handleShowAlert:E,lesseeDetails:l,subscriptionPeriod:l.lease_period}),I&&e.jsx(ut,{show:I,handleClose:()=>{r(!1),j({})},handleShowAlert:E,leaseData:l}),O&&e.jsx(pe,{show:O,handleClose:d=>re(void 0,null,function*(){F(d),n(!1),z(!0),j({})}),leaseDetails:l}),_&&e.jsx(xt,{show:_,handleClose:()=>{B(!1)},url:"client-individual-verify-otp",setVerified:L,verification_type:D})]})]})}),e.jsx("div",{className:"w-100 ",style:{backgroundColor:"#e3d329",position:"fixed",bottom:"0",right:"0",width:"100%"},children:e.jsx(De,{isVisible:ae,setIsVisible:Z,trigger:e.jsxs("div",{style:{backgroundColor:"#e3d329"},className:"position-relative tf-color",children:[e.jsx("h5",{className:"text-center tf-color py-2",children:"Open Subscriptions"}),e.jsx("i",{className:"icon material-icons position-absolute top-50 translate-middle",style:{right:"35%",fontSize:"50px",transform:"translateY(-50%)"},children:"keyboard_arrow_up"})]}),children:e.jsx(ze,{title:"Open Subscriptions",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-bordered",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderTop:"0px"},children:[e.jsx("th",{scope:"col",style:{borderTop:"1px solid #e0e0e0"},children:"No."}),e.jsx("th",{scope:"col",style:{borderTop:"1px solid #e0e0e0"},children:"Type"}),e.jsx("th",{scope:"col",style:{borderTop:"1px solid #e0e0e0"},children:"Open Slots"}),e.jsx("th",{scope:"col",style:{borderTop:"1px solid #e0e0e0"},children:"Period (months)"}),e.jsx("th",{scope:"col",style:{borderTop:"1px solid #e0e0e0"},children:"Start Date"}),e.jsx("th",{scope:"col",style:{borderTop:"1px solid #e0e0e0"},children:"End Date"}),e.jsx("th",{scope:"col",colSpan:"2",className:"tf-borderRight"})]})}),e.jsx("tbody",{children:M==null?void 0:M.map((d,C)=>e.jsx(e.Fragment,{children:d.open_slots>0&&e.jsxs("tr",{children:[e.jsx("th",{scope:"row",children:C+1}),e.jsx("td",{children:d.subscription_class}),e.jsx("td",{children:d.open_slots}),e.jsx("td",{children:d.period_length}),e.jsx("td",{children:d.start_date}),e.jsx("td",{children:d.end_date}),e.jsx("td",{colSpan:"2",className:`${d.open_slots===0?"bg-gray":"bg-success"} text-white text-center tfRow`,onClick:()=>{d.open_slots!==0&&(u(!0),c(!1),Z(!1),j({}),H({type:d.subscription_class}),G(d.subscription_class),g(d.period_length))},children:"Activate"})]},"subscription"+C)}))})]})})})})})]})};ft.layout=o=>e.jsx(Le,{children:o,title:"Leases"});export{ft as default};
