var A=Object.defineProperty,C=Object.defineProperties;var R=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var w=(a,s,t)=>s in a?A(a,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[s]=t,y=(a,s)=>{for(var t in s||(s={}))V.call(s,t)&&w(a,t,s[t]);if(v)for(var t of v(s))F.call(s,t)&&w(a,t,s[t]);return a},T=(a,s)=>C(a,R(s));import{r as p,b as f,_ as j,j as e}from"./main-f3a2b3b5.js";import{L as E}from"./Layout-31dd085d.js";import{u as S}from"./index-c2bab56a.js";import"./lodash-1e972248.js";import"./assertThisInitialized-3be3daa4.js";import"./removeClass-9988a4c5.js";import"./Modal-0288d289.js";import"./index-f34ada42.js";import"./formatting-9de8c923.js";import"./MultipleUpload-f4af7a74.js";import"./search-cc04e48e.js";function D(){const[a,s]=p.useState([]),[t,b]=p.useState([]),[u,o]=p.useState(!1);function m(){f.get("/accounting/vat-settings/").then(r=>{b(r.data)}).catch(r=>{console.error(r)})}p.useEffect(()=>{m()},[]);function g(){s(r=>[...r,{id:"item-"+Math.random().toString(36).substr(2,9),description:"",rate:""}])}function i(r){s(l=>l.filter(d=>d.id!==r))}function c(r,l,d){d&&s(n=>n.map(x=>x.id===d?T(y({},x),{[r]:l}):x))}function h(r){f.delete(`/accounting/vat-settings/${r.id}/`).then(l=>{j.success("VAT setting deleted successfully"),m()}).catch(l=>{console.error(l),j.error(S(l))})}function k(r){r.preventDefault(),o(!0);const l=new FormData(r.target),d=Array.from(l.entries()).reduce((n,[x,_])=>{const[O,N]=x.split("-");return n[N]||(n[N]={}),n[N][O]=_,n},[]);f.post("/accounting/vat-settings/",d).then(n=>{o(!1),j.success("VAT settings updated successfully"),m(),s([])}).catch(n=>{o(!1),console.error(n),j.error(S(n))})}return{loading:u,taxOptions:t,newTaxOptions:a,handleSubmit:k,changeHandler:c,addNewTaxOption:g,removeTaxOption:h,removeNewTaxOption:i}}function L({}){const{loading:a,taxOptions:s,newTaxOptions:t,handleSubmit:b,changeHandler:u,removeTaxOption:o,addNewTaxOption:m,removeNewTaxOption:g}=D();return e.jsx("main",{children:e.jsxs("form",{className:"row",onSubmit:b,children:[e.jsx("div",{className:"col col-3 py-0",children:e.jsxs("div",{className:"bg-white border custom-rounded-2 shadow-sm p-4",children:[e.jsx("div",{className:"mb-5 fw-bold",children:"Registration"}),e.jsxs("div",{className:"form-check mb-4",children:[e.jsx("input",{className:"form-check-input",disabled:!0,type:"checkbox",value:"registered",id:"vat_registered"}),e.jsx("label",{className:"form-check-label",htmlFor:"vat_registered",children:"V.A.T Registered"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"vat_registration_number",className:"form-label",children:"V.A.T Registration Number"}),e.jsx("input",{disabled:!0,type:"text",className:"form-control border",id:"vat_registration_number"})]})]})}),e.jsx("div",{className:"col col-9",children:e.jsxs("div",{children:[e.jsx("div",{className:"p-2 fw-bold text-center",children:"Tax Options"}),e.jsx("div",{className:"custom-mn-h-2 mb-3",children:e.jsxs("table",{className:"table table-sm table-respnsive shadow-sm bg-white",children:[e.jsx("thead",{className:"position-sticky c-table-top c-bg-light shadow-sm c-z-5",children:e.jsxs("tr",{className:"c-force-borders text-center",children:[e.jsx("th",{className:"ps-3 text-start",style:{width:"60%"},children:e.jsx("div",{children:" Description"})}),e.jsx("th",{className:"text-start",children:e.jsx("div",{children:"Rate (%) "})}),e.jsx("th",{children:e.jsx("div",{children:" "})})]})}),e.jsxs("tbody",{children:[!(s!=null&&s.length||t!=null&&t.length)&&e.jsx("tr",{children:e.jsx("td",{colSpan:3,children:e.jsx("div",{className:"p-5 bg-white d-flex justify-content-center align-items-center",children:"Nothing to show"})})}),s==null?void 0:s.map((i,c)=>e.jsxs("tr",{children:[e.jsx("td",{className:"ps-3",children:i.description}),e.jsxs("td",{className:"ps-3",children:[i.rate," %"]}),e.jsx("td",{className:"pe-3 custom-mx-w-05 text-end",children:e.jsx("button",{type:"button",className:"btn p-1 btn-sm btn-danger",onClick:()=>o(i),children:e.jsx("i",{className:"material-icons",children:"close"})})})]},c)),t==null?void 0:t.map((i,c)=>e.jsxs("tr",{children:[e.jsx("td",{className:"ps-3",children:e.jsx("div",{children:e.jsx("input",{type:"text",className:"form-control",placeholder:"description",name:"description-"+c,id:"description-"+c,value:i.description,required:!0,onChange:h=>u("description",h.target.value,i.id)})})}),e.jsx("td",{className:"ps-3",children:e.jsx("div",{children:e.jsx("input",{type:"number",step:.001,className:"form-control",placeholder:"rate in %",name:"rate-"+c,required:!0,id:"rate-"+c,value:i.rate,onChange:h=>u("rate",h.target.value,i.id)})})}),e.jsx("td",{className:"pe-3 custom-mx-w-05 text-end",children:e.jsx("button",{type:"button",className:"btn btn-sm btn-danger",onClick:()=>g(i.id),children:e.jsx("i",{className:"material-icons",children:"close"})})})]},c))]})]})}),e.jsx("div",{className:"text-end",children:e.jsxs("button",{type:"button",disabled:a,className:"btn btn-outline-info ",onClick:m,children:[e.jsx("i",{className:"leading-icon material-icons",children:"add"}),"Add Tax Item"]})}),e.jsx("div",{className:"text-center",children:e.jsxs("button",{disabled:a,type:"submit",className:"btn btn-info text-white",children:[a?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-grow spinner-grow-sm"}),e.jsx("span",{className:"d-inline-block ms-2",children:"Updating.."})]}):"Update",e.jsx("i",{className:"trailing-icon material-icons",children:"save"})]})})]})})]})})}L.layout=a=>e.jsx(E,{children:a,title:"Sales Categories"});export{L as default};
