var q=Object.defineProperty,z=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var O=(i,l,t)=>l in i?q(i,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[l]=t,r=(i,l)=>{for(var t in l||(l={}))Y.call(l,t)&&O(i,t,l[t]);if(F)for(var t of F(l))G.call(l,t)&&O(i,t,l[t]);return i},o=(i,l)=>z(i,P(l));import{r as d,a as J,j as e,b as K}from"./main-5ef5aaa0.js";import{L as M}from"./Layout-be807b80.js";import H from"./SearchCustomer-5d76ef64.js";import{f as N}from"./formatting-345d2430.js";import{_ as f}from"./index-5741d9bf.js";import"./lodash-6852e1ff.js";function Q(){const[i,l]=d.useState(""),[t,I]=d.useState(""),[m,y]=d.useState(""),[_,b]=d.useState(""),[c,A]=d.useState(""),[u,v]=d.useState(""),[R,D]=d.useState(""),[C,E]=d.useState(""),[B,U]=d.useState(""),[S,W]=d.useState(""),[L,j]=d.useState(!1),V=n=>{n.preventDefault(),j(!0);let x=[];if(a.customerName!==""&&s.customerName!=="")x=[r({},a),r({},s)];else if(a.customerName!==""&&s.customerName==="")x=[r({},a)];else if(a.customerName===""&&s.customerName!=="")x=[r({},s)];else{f.error("All fields are required",{id:"create-sub"}),j(!1);return}console.log(x),K.post(reverseUrl("debit_journal"),x).then(g=>{if(g.data.status===400){l(g.data.errors[0]),f.error("Can't create journal entry(s). Please try again",{id:"create-sub"});return}k(),f.success("Journal entry(s) created successfully",{id:"create-sub"}),j(!1),E(""),U(""),y(""),v(""),D(""),W(""),I(""),A("")}).catch(g=>{f.error(g.message,{id:"create-sub"}),l(g),j(!1)})},{data:a,setData:p,post:X,reset:k}=J({customerName:"",leaseId:"",customerClass:"",date:new Date().toISOString().split("T")[0],accountBalance:"",debitAmount:"",details:"",endBalance:""}),{data:s,setData:h}=J({customerName:"",leaseId:"",customerClass:"",date:new Date().toISOString().split("T")[0],accountBalance:"",debitAmount:"",details:"",endBalance:""}),w=n=>{n.target.id==="debitAmount"?p(o(r({},a),{[n.target.id]:n.target.value,endBalance:Number(a.accountBalance)+Number(n.target.value)})):p(o(r({},a),{[n.target.id]:n.target.value}))},T=n=>{n.target.id==="debitAmount"?h(o(r({},s),{[n.target.id]:n.target.value,endBalance:Number(s.accountBalance)+Number(n.target.value)})):h(o(r({},s),{[n.target.id]:n.target.value}))};return d.useEffect(()=>{t==="company"&&(p(o(r({},a),{customerClass:"company"})),b(reverseUrl("get_client_company_journals"))),t==="individual"&&(p(o(r({},a),{customerClass:"individual"})),b(reverseUrl("get_client_individual_journals")))},[t]),d.useEffect(()=>{c==="company"&&(h(o(r({},s),{customerClass:"company"})),b(reverseUrl("get_client_company_journals"))),c==="individual"&&(h(o(r({},s),{customerClass:"individual"})),b(reverseUrl("get_client_individual_journals")))},[c]),d.useEffect(()=>{t==="company"&&m!==""&&p(o(r({},a),{customerName:m,leaseId:C,accountBalance:R})),t==="individual"&&m!==""&&p(o(r({},a),{customerName:m,leaseId:C,accountBalance:R}))},[C,m,t,R]),d.useEffect(()=>{c==="company"&&u!==""&&h(o(r({},s),{customerName:u,leaseId:B,accountBalance:S})),c==="individual"&&u!==""&&h(o(r({},s),{customerName:u,leaseId:B,accountBalance:S}))},[B,S,u,c]),L&&f.loading("Creating ...",{id:"create-sub"}),e.jsxs("div",{className:"card card-raised mb-5",style:{height:"60vh",width:"100%",marginInline:"-25px",paddingRight:"30px",paddingLeft:"15px"},children:[e.jsx("div",{className:"p-1 bg-info mt-2",children:e.jsx("h5",{className:"text-white text-center",children:"Debit Journal"})}),e.jsx("div",{className:"card-body p-4 ",style:{height:"60vh"},children:e.jsxs("div",{className:"table-responsive",style:{overflowY:"visible",height:"100%"},children:[e.jsxs("table",{className:"table table-bordered",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderTop:"0px",fontSize:"12px"},children:[e.jsx("th",{scope:"col",style:{borderTop:"1px solid #e0e0e0"},children:"Date"}),e.jsx("th",{scope:"col",style:{borderTop:"1px solid #e0e0e0"},children:"Customer Type"}),e.jsx("th",{scope:"col",style:{borderTop:"1px solid #e0e0e0"},children:"Customer"}),e.jsx("th",{scope:"col",style:{borderTop:"1px solid #e0e0e0"},children:"Details"}),e.jsx("th",{scope:"col",className:"text-end",style:{borderTop:"1px solid #e0e0e0"},children:"Account Balance"}),e.jsx("th",{scope:"col",style:{borderTop:"1px solid #e0e0e0"},children:"Debit Amount"}),e.jsx("th",{scope:"col",className:"text-end",style:{borderTop:"1px solid #e0e0e0"},children:"End Balance"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("th",{scope:"row",className:"tf-borderRight tf-borderLeft",children:e.jsx("input",{type:"date",className:"form-control form-control-sm tf-borderRight tf-input",name:"date",id:"date",value:a.date,onChange:w})}),e.jsx("td",{className:"tf-borderRight",style:{paddingRight:"1px",paddingLeft:"1px"},children:e.jsxs("select",{onChange:n=>I(n.target.value),className:"form-select form-select-sm tf-borderRight tf-input",name:"customerType",value:t,children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"individual",children:"I"}),e.jsx("option",{value:"company",children:"C"})]})}),e.jsxs("td",{className:"tf-borderRight",style:{paddingRight:"1px",paddingLeft:"1px",position:"relative",maxWidth:"100px"},children:[e.jsx(H,{value:m,setValue:y,url:_,placeholder:"Start typing",delay:500,type:t,setCustomerName:y,setLeaseId:E,setOpeningBalance:D}),i&&e.jsx("div",{className:"text-danger mt-1",children:i.customerName})]}),e.jsx("td",{className:"tf-borderRight",style:{paddingRight:"1px",paddingLeft:"1px",minWidth:"200px"},children:e.jsx("textarea",{name:"details",className:"form-control form-control-sm tf-input",rows:2,id:"details",value:a.details,onChange:w})}),e.jsx("td",{className:"tf-borderRight text-end",style:{paddingRight:"1px",paddingLeft:"1px"},children:a.accountBalance?N(a.accountBalance):""}),e.jsx("td",{className:"tf-borderRight",style:{maxWidth:"40px",paddingRight:"1px",paddingLeft:"1px"},children:e.jsx("input",{onChange:w,className:"form-control form-control-sm tf-borderRight tf-input",type:"text",id:"debitAmount",value:a.debitAmount})}),e.jsx("td",{className:"tf-borderRight text-end",style:{paddingRight:"1px",paddingLeft:"1px"},children:a.endBalance?N(a.endBalance):""})]}),e.jsxs("tr",{children:[e.jsx("th",{scope:"row",className:"tf-borderRight tf-borderLeft",children:e.jsx("input",{type:"date",className:"form-control form-control-sm tf-borderRight tf-input",name:"date",id:"date",value:s.date,onChange:T})}),e.jsx("td",{className:"tf-borderRight",style:{paddingRight:"1px",paddingLeft:"1px"},children:e.jsxs("select",{onChange:n=>A(n.target.value),className:"form-select form-select-sm tf-borderRight tf-input",name:"customerType2",value:c,children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"individual",children:"I"}),e.jsx("option",{value:"company",children:"C"})]})}),e.jsxs("td",{className:"tf-borderRight",style:{paddingRight:"1px",paddingLeft:"1px",position:"relative",maxWidth:"100px"},children:[e.jsx(H,{value:u,setValue:v,url:_,placeholder:"Start typing",delay:500,type:c,setCustomerName:v,setLeaseId:U,setOpeningBalance:W}),i&&e.jsx("div",{className:"text-danger mt-1",children:i.customerName2})]}),e.jsx("td",{className:"tf-borderRight",style:{paddingRight:"1px",paddingLeft:"1px",minWidth:"200px"},children:e.jsx("textarea",{name:"details",className:"form-control form-control-sm tf-input",rows:2,id:"details",value:s.details,onChange:T})}),e.jsx("td",{className:"tf-borderRight text-end",style:{paddingRight:"1px",paddingLeft:"1px"},children:s.accountBalance?N(Number(s.accountBalance)):""}),e.jsx("td",{className:"tf-borderRight",style:{maxWidth:"40px",paddingRight:"1px",paddingLeft:"1px"},children:e.jsx("input",{onChange:T,className:"form-control form-control-sm tf-borderRight tf-input",type:"text",id:"debitAmount",value:s.debitAmount})}),e.jsx("td",{className:"tf-borderRight text-end",style:{paddingRight:"1px",paddingLeft:"1px"},children:s.endBalance?N(Number(s.endBalance)):""})]})]})]}),e.jsx("div",{className:"d-flex justify-content-end",children:e.jsx("button",{className:"btn btn-success btn-raised text-white",children:L?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-grow spinner-grow-sm"}),e.jsx("span",{className:"ml-2",children:"processing.."})]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"leading-icon material-icons",children:"add"}),"Add Row"]})})}),e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx("button",{className:"btn btn-info btn-raised text-white",onClick:V,children:L?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-grow spinner-grow-sm"}),e.jsx("span",{className:"ml-2",children:"processing.."})]}):e.jsx(e.Fragment,{children:"Submit"})})})]})})]})}Q.layout=i=>e.jsx(M,{children:i,title:"Customer Credit Adjustment - Debit Journal"});export{Q as default};
