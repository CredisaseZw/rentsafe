import{r as t,b as k,j as r}from"./media/main-e93a7206.js";import{_ as D}from"./lodash-c46b0b18.js";import{u as L}from"./index-c49d93dd.js";import"es-errors/type";import"es-errors/uri";import"./formatting-fad57ba1.js";function T({delay:d=500,url:u,value:o,setValue:m,placeholder:j,setLeaseId:v,setCreditorName:p,setOpeningBalance:f,setEndDate:h}){const[w,l]=t.useState(!1),[b,n]=t.useState(!1),[y,g]=t.useState(!1),[x,_]=t.useState(""),[S,i]=t.useState([]),[N,C]=t.useState([]);t.useEffect(()=>{if(!o){i([]);return}const e=D.debounce(a=>{a.length<3||y||(n(!0),k.post(u,{searchParam:"guess",searchValue:a}).then(s=>{s.data?.status!=="failed"?(C([...s.data]),i(s.data.map(c=>({label:c.company_name||c.full_name,value:c.lease_id}))),_(""),n(!1)):(i([]),n(!1),_(L(s)))}))},d);return e(o),n(!1),()=>{e.cancel()}},[d,u,o]);const E=e=>{g(!0);const a=N.find(s=>s.lease_id===e.value);v(e.value),m(e.label),p&&p(e.label),f&&f(a.company_opening_balance||a.opening_balance),h&&h(a.company_opening_balance_date||a.opening_balance_date),l(!1),g(!1)};return r.jsxs("div",{className:"position-relative",children:[r.jsx("input",{type:"text",placeholder:j,required:!0,value:o,onChange:e=>m(e.target.value),onFocus:()=>l(!0),onBlur:()=>{setTimeout(()=>l(!1),200)},className:"form-control c-bg-light"}),w&&o&&r.jsx("div",{style:{overflowY:"auto"},className:"border border-dark rounded-1 c-bg-light custom-h-2 w-100 position-absolute mt-1 top-100 start-0 z-1",children:!b&&x?r.jsx("div",{className:"text-danger p-2",children:x}):b&&S.length===0?r.jsx("div",{className:"p-2",children:"Loading..."}):S.map((e,a)=>r.jsx("div",{onClick:()=>E(e),className:"c-pointer p-1 small border-bottom border-dark",children:e.label},a))})]})}export{T as default};
