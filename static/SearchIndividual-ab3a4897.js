var ce=Object.defineProperty,te=Object.defineProperties;var he=Object.getOwnPropertyDescriptors;var K=Object.getOwnPropertySymbols;var xe=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable;var Q=(n,i,c)=>i in n?ce(n,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):n[i]=c,$=(n,i)=>{for(var c in i||(i={}))xe.call(i,c)&&Q(n,c,i[c]);if(K)for(var c of K(i))re.call(i,c)&&Q(n,c,i[c]);return n},D=(n,i)=>te(n,he(i));import{r as l,j as e,a as ae,b as ee,H as oe}from"./main-3086900a.js";import{L as me}from"./Layout-6ae2172a.js";import{I as je,_ as se}from"./index-b20093bf.js";import{B as ue}from"./BulkIconButton-96baf3e1.js";import{N as fe}from"./NotFound-53e761a8.js";import{P as ge}from"./PageHeader-60291f18.js";import{I as be}from"./IndividualAdd-ebff14b8.js";import{h as ye}from"./html2pdf-04ccdb1a.js";import{M as J}from"./Modal-575c6cb4.js";import{B as ie}from"./Button-8a7dfb7a.js";import{B as Se}from"./BulkUploadModal-ad947ba6.js";import"./index-c1729276.js";import"./MultipleUpload-14119e44.js";import"./typeof-7fd5df1e.js";import"./useEventCallback-33e3b96c.js";import"./removeClass-4206b808.js";import"./index-29e2be6e.js";import"./Button-86422552.js";function Ne({showReport:n,handleCloseReport:i,selectedRow:c,reportData:s}){var C,I,u,f,o,m,g,b,U,r,W,z,A,j,R,y,T,S,F,N,v,w,P,M,V,p,_,k,G,B,L,a,E,O;const H=l.useRef(),X=()=>{const d=H.current;ye().from(d).set({margin:1,filename:"modal-content.pdf",html2canvas:{scale:2},jsPDF:{orientation:"portrait"}}).save()};return e.jsx(e.Fragment,{children:e.jsxs(J,{show:n,onHide:i,fullscreen:!0,children:[e.jsx(J.Body,{ref:H,children:e.jsxs("div",{style:{border:"3px solid #176987",width:"100%",padding:"20px"},id:"report",children:[e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsxs("div",{children:[e.jsx("div",{children:"CrediSafe"}),e.jsx("div",{children:"Securing you rental investments"})]}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsxs("div",{children:[e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{})]}),e.jsxs("div",{style:{lineHeight:"10px"},children:[e.jsx("p",{style:{textAlign:"right"},children:"+263 71 882 2460"}),e.jsx("p",{style:{textAlign:"right"},children:"credisafezw@gmail.com"}),e.jsx("p",{style:{textAlign:"right"},children:" www.credi-safe.com"})]})]})]}),e.jsx("div",{className:"mt-5 mb-2",children:e.jsxs("h6",{children:["Rent Payment Status Report on"," ",e.jsxs("span",{style:{fontWeight:"bold",color:"#176987"},children:[(C=s==null?void 0:s.individual_details)==null?void 0:C.firstname," ",(I=s==null?void 0:s.individual_details)==null?void 0:I.surname," "]}),"as at ",Date().toLocaleString()]})}),e.jsx("div",{className:"mb-5",style:{border:"1px solid #176987",width:"100%",padding:"5px"},children:e.jsxs("div",{style:{padding:"10px"},children:[e.jsx("table",{className:"table table-bordered",children:e.jsxs("tbody",{children:[e.jsx("tr",{style:{lineHeight:"5px",fontSize:"12px",backgroundColor:"#190062"},children:e.jsx("th",{scope:"row",colSpan:5,className:"text-center text-white",children:"PAYMENT STATUS CLASSIFICATION/INDICATOR"})}),e.jsxs("tr",{style:{lineHeight:"5px",fontSize:"12px"},children:[e.jsx("th",{scope:"row",className:"text-center",children:"Status"}),e.jsx("td",{style:{backgroundColor:((u=s==null?void 0:s.risk_data)==null?void 0:u.class)=="non-payer"?(f=s==null?void 0:s.risk_data)==null?void 0:f.color:((o=s==null?void 0:s.risk_data)==null?void 0:o.class)=="high-high"?(m=s==null?void 0:s.risk_data)==null?void 0:m.color:((g=s==null?void 0:s.risk_data)==null?void 0:g.class)=="high"?(b=s==null?void 0:s.risk_data)==null?void 0:b.color:((U=s==null?void 0:s.risk_data)==null?void 0:U.class)=="medium"?(r=s==null?void 0:s.risk_data)==null?void 0:r.color:((W=s==null?void 0:s.risk_data)==null?void 0:W.class)=="low"?(z=s==null?void 0:s.risk_data)==null?void 0:z.color:"",color:((A=s==null?void 0:s.risk_data)==null?void 0:A.class)=="non-payer"?"white":""},className:"text-center text-white",children:((j=s==null?void 0:s.risk_data)==null?void 0:j.class)=="non-payer"?"Non-Payer":((R=s==null?void 0:s.risk_data)==null?void 0:R.class)=="high-high"?"High-High":((y=s==null?void 0:s.risk_data)==null?void 0:y.class)=="high"?"High":((T=s==null?void 0:s.risk_data)==null?void 0:T.class)=="medium"?"Medium":((S=s==null?void 0:s.risk_data)==null?void 0:S.class)=="low"?"Low":""})]})]})}),e.jsx("table",{className:"table table-bordered",children:e.jsxs("tbody",{children:[e.jsx("tr",{style:{lineHeight:"5px",fontSize:"12px",backgroundColor:"#808080"},children:e.jsx("th",{scope:"row",colSpan:5,className:"text-center text-white",children:"STATUS INDEX"})}),e.jsxs("tr",{style:{lineHeight:"5px",fontSize:"12px"},children:[e.jsx("th",{scope:"row",className:"text-center bg-success text-white",children:"Low"}),e.jsx("td",{style:{fontWeight:"bold"},className:"text-center bg-warning text-white",children:"Medium Risk"}),e.jsx("td",{style:{backgroundColor:"#ff33cc",fontWeight:"bold"},className:"text-center text-white",children:"High Risk"}),e.jsx("td",{style:{fontWeight:"bold"},className:"text-center bg-danger text-white",children:"High-High Risk"}),e.jsx("td",{style:{fontWeight:"bold"},className:"text-center bg-dark text-white",children:"None Payer"})]}),e.jsxs("tr",{style:{lineHeight:"5px",fontSize:"12px"},children:[e.jsx("th",{scope:"row",className:"text-center text-nowrap",children:"Current"}),e.jsx("td",{className:"text-center text-nowrap",children:"1st Month Outstanding"}),e.jsx("td",{className:"text-center text-nowrap",children:"2nd Month Outstanding"}),e.jsx("td",{className:"text-center text-nowrap",children:"3rd Month Outstanding"}),e.jsx("td",{className:"text-center text-nowrap",children:"+3 Months Outstanding"})]})]})})]})}),e.jsx("div",{className:"mb-5",style:{border:"1px solid #176987",width:"100%",padding:"2px"},children:e.jsxs("div",{style:{padding:"10px"},children:[e.jsx("table",{className:"table table-bordered",children:e.jsxs("tbody",{children:[e.jsx("tr",{style:{lineHeight:"5px",fontSize:"12px",backgroundColor:"#305496"},children:e.jsx("th",{scope:"row",colSpan:4,className:"text-center text-white",children:"PERSONAL DETAILS"})}),e.jsx("tr",{style:{lineHeight:"5px",fontSize:"12px",backgroundColor:"#b4c6e7"},children:e.jsx("th",{scope:"row",colSpan:4,className:"text-center ",children:"Identification Details"})}),e.jsxs("tr",{style:{lineHeight:"5px",fontSize:"12px"},children:[e.jsx("th",{scope:"row",children:"Surname :"}),e.jsx("td",{children:(F=s==null?void 0:s.individual_details)==null?void 0:F.surname}),e.jsx("td",{children:"First Name :"}),e.jsx("td",{children:(N=s==null?void 0:s.individual_details)==null?void 0:N.firstname})]}),e.jsxs("tr",{style:{lineHeight:"5px",fontSize:"12px"},children:[e.jsx("th",{scope:"row",children:"National ID No:"}),e.jsx("td",{children:(v=s==null?void 0:s.individual_details)==null?void 0:v.national_id}),e.jsx("td",{children:"Date Of Birth:"}),e.jsx("td",{children:(w=s==null?void 0:s.individual_details)==null?void 0:w.dob})]}),e.jsxs("tr",{style:{lineHeight:"5px",fontSize:"12px"},children:[e.jsx("th",{scope:"row",children:"Marital Status :"}),e.jsxs("td",{children:[" ",(P=s==null?void 0:s.individual_details)==null?void 0:P.marital_status]}),e.jsx("td",{children:"Gender:"}),e.jsx("td",{children:(M=s==null?void 0:s.individual_details)==null?void 0:M.gender})]})]})}),e.jsx("table",{className:"table table-bordered",children:e.jsxs("tbody",{children:[e.jsx("tr",{style:{lineHeight:"5px",fontSize:"12px",backgroundColor:"#b4c6e7"},children:e.jsx("th",{scope:"row",colSpan:6,className:"text-center ",children:"Contact Details"})}),e.jsxs("tr",{style:{lineHeight:"5px",fontSize:"12px"},children:[e.jsx("th",{scope:"row",children:"Mobile Number :"}),e.jsx("td",{children:(V=s==null?void 0:s.individual_details)==null?void 0:V.mobile}),e.jsx("td",{children:"Telephone No:"}),e.jsx("td",{children:(p=s==null?void 0:s.individual_details)==null?void 0:p.mobile})]}),e.jsxs("tr",{style:{lineHeight:"5px",fontSize:"12px"},children:[e.jsx("th",{scope:"row",children:"Address :"}),e.jsx("td",{colSpan:3,children:(_=s==null?void 0:s.individual_details)==null?void 0:_.address})]}),e.jsxs("tr",{style:{lineHeight:"5px",fontSize:"12px"},children:[e.jsx("th",{scope:"row",children:"Email :"}),e.jsx("td",{colSpan:3,children:(k=s==null?void 0:s.individual_details)==null?void 0:k.email})]})]})}),e.jsx("table",{className:"table table-bordered",children:e.jsxs("tbody",{children:[e.jsx("tr",{style:{lineHeight:"5px",fontSize:"12px",backgroundColor:"#b4c6e7"},children:e.jsx("th",{scope:"row",colSpan:6,className:"text-center ",children:"Employment History"})}),e.jsxs("tr",{style:{lineHeight:"5px",fontSize:"12px"},children:[e.jsx("th",{className:"text-center",scope:"row",children:"Employer"}),e.jsx("td",{className:"text-center",children:"Position"}),e.jsx("td",{className:"text-center",children:"Start Date"})]}),e.jsxs("tr",{style:{lineHeight:"5px",fontSize:"12px"},children:[e.jsx("th",{scope:"row",className:"text-center",children:(G=s==null?void 0:s.individual_details)==null?void 0:G.employer_name}),e.jsx("td",{className:"text-center",children:(B=s==null?void 0:s.individual_details)==null?void 0:B.job_title}),e.jsx("td",{className:"text-center",children:(L=s==null?void 0:s.individual_details)==null?void 0:L.date_of_employment})]})]})})]})}),e.jsx("div",{className:"mb-5",style:{border:"1px solid #176987",width:"100%",padding:"2px"},children:e.jsx("div",{style:{padding:"10px"},children:e.jsx("table",{className:"table table-bordered",children:e.jsxs("tbody",{children:[e.jsx("tr",{style:{lineHeight:"5px",fontSize:"12px",backgroundColor:"#305496"},children:e.jsx("th",{scope:"row",colSpan:7,className:"text-center text-white",children:"OUTSTANDING RENTALS"})}),e.jsx("tr",{style:{lineHeight:"5px",fontSize:"12px",backgroundColor:"#b4c6e7"},children:e.jsx("th",{scope:"row",colSpan:4,className:"text-center ",children:"Claims"})}),e.jsxs("tr",{style:{lineHeight:"5px",fontSize:"12px"},children:[e.jsx("th",{scope:"row",children:"Claimant"}),e.jsx("td",{children:"Currency"}),e.jsx("td",{children:"Amount"}),e.jsx("td",{children:"Date of Claim "})]}),((a=s==null?void 0:s.claims_list)==null?void 0:a.length)>0&&((E=s==null?void 0:s.claims_list)==null?void 0:E.map((d,Y)=>e.jsxs("tr",{style:{lineHeight:"5px",fontSize:"12px"},children:[e.jsx("th",{scope:"row",children:d.creditor}),e.jsx("td",{children:d.currency}),e.jsx("td",{children:d.owing_amount}),e.jsx("td",{children:d.claim_date})]},"claim"+Y)))]})})})}),e.jsx("div",{className:"mb-5",style:{border:"1px solid #176987",width:"100%",padding:"2px"},children:e.jsxs("div",{style:{padding:"10px"},children:[e.jsx("table",{className:"table table-bordered",children:e.jsxs("tbody",{children:[e.jsx("tr",{style:{lineHeight:"5px",fontSize:"12px",backgroundColor:"#305496"},children:e.jsx("th",{scope:"row",colSpan:7,className:"text-center",children:"Active"})}),e.jsxs("tr",{style:{lineHeight:"5px",fontSize:"12px"},children:[e.jsx("th",{scope:"row",children:"Type"}),e.jsx("td",{children:"Outstanding Since"}),e.jsx("td",{children:"Amount"})]}),(O=s==null?void 0:s.credit_details)==null?void 0:O.map(d=>e.jsxs("tr",{style:{lineHeight:"5px",fontSize:"12px"},children:[e.jsx("th",{scope:"row",children:d.credit_type}),e.jsxs("td",{children:[" ",d.start_date]}),e.jsxs("td",{children:[d.currency," ",d.overdue_amount]})]},d.lease_id))]})}),e.jsx("table",{className:"table table-bordered",children:e.jsxs("tbody",{children:[e.jsx("tr",{style:{lineHeight:"5px",fontSize:"12px",backgroundColor:"#b4c6e7"},children:e.jsx("th",{scope:"row",colSpan:10,className:"text-center ",children:"Historic"})}),e.jsxs("tr",{style:{lineHeight:"5px",fontSize:"12px"},children:[e.jsx("th",{className:"text-center",scope:"row",colSpan:2,children:"Type"}),e.jsx("td",{className:"text-center",children:"Outstanding Since"}),e.jsx("td",{className:"text-center",children:" Amount"})]})]})})]})}),e.jsxs("div",{style:{width:"100%",padding:"2px"},children:[e.jsx("hr",{}),e.jsxs("div",{children:[e.jsx("p",{children:"Disclaimer: This report is confidential and intended solely for the individual or entity to whom it is addressed. Information on this report is valid at the time of enquiry only. If verification is required, please contact us on the details provided above."}),e.jsx("p",{children:"Terms and Conditions apply."}),e.jsx("p",{children:"Copyrights Â© CrediSafe Zimbabwe"}),e.jsx("p",{children:"All rights reserved"})]})]})]})}),e.jsxs(J.Footer,{children:[e.jsx(ie,{className:"mr-4",variant:"secondary",onClick:i,children:"Close"}),e.jsx(ie,{variant:"primary",onClick:X,children:"Print"})]})]})})}function ve({individuals:n,url:i}){const[c,s]=l.useState(!1),H=()=>s(!1),[X,C]=l.useState(!1),I=()=>s(!0),[u,f]=l.useState([]),[o,m]=l.useState(!1),[g,b]=l.useState(!1),[U,r]=l.useState(!1),[W,z]=l.useState(!1),[A,j]=l.useState(!1),[R,y]=l.useState(!1),[T,S]=l.useState(!0),[F,N]=l.useState(!1),[v,w]=l.useState({}),[P,M]=l.useState(null),[V,p]=l.useState(null),[_,k]=l.useState(!1),[G,B]=l.useState(!1),L=(t,h)=>{t.preventDefault(),se.loading("Loading...",{duration:2500,position:"top-center"});try{b(!0),h&&(ee.post(reverseUrl("enquiry_count"),{isIndividual:!0,isCompany:!1,individualId:h}).then(x=>{}),ee.post(reverseUrl("individual-report"),{individualId:h}).then(x=>{var q,Z;M(h),(q=x.data)!=null&&q.is_eligible?(Z=x.data)!=null&&Z.require_otp?(B(!0),p(x.data)):(p(x.data),z(!0),k(!0)):se.error("You have exhausted your free enquiries. Please subscribe to get more enquiries.",{duration:4e3,id:"error_"})}).catch(x=>{console.error("There was an error!",x)}))}finally{b(!1)}},{data:a,setData:E,post:O}=ae({searchParam:"fullname",searchValue:""}),d=t=>E(D($({},a),{[t.target.id]:t.target.value})),Y=t=>{if(t.preventDefault(),a.searchValue===""){r(!1),w({searchValue:"The search value field is required."});return}O(reverseUrl(i),{onStart:()=>{m(!0),r(!1),f([]),w({}),j(!1)},onSuccess:h=>{const x=q=>JSON.stringify(q)==="{}";h.props.result.length===0&&j(!0),x(h.props.result)===!0?r(!0):f(h.props.result),r(!1),m(!1)},onError:h=>{m(!1)}})},le=()=>{S(!0),y(!1)},ne=()=>{y(!0),S(!1)},de=()=>{N(!0)};return e.jsxs("main",{children:[e.jsx(ge,{title:"Search Individual"}),e.jsxs("div",{className:"container-xl p-5",children:[e.jsx(je,{position:"top-right",duration:"4000"}),e.jsx("div",{className:"row align-items-center mb-5",children:e.jsx("div",{className:"col-12 col-md-auto",children:e.jsx("form",{className:"mb-5",onSubmit:Y,children:e.jsxs("div",{className:"d-flex flex-column flex-sm-row gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:"",children:"Filter by Name / Surname / ID"}),e.jsx("input",{value:a.searchValue,onChange:d,type:"text",name:"searchValue",id:"searchValue",className:"form-control form-control"}),v.searchValue&&e.jsx("small",{className:"text-danger",children:v.searchValue})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:"",children:"Select filter Parameter"}),e.jsxs("select",{className:"form-select","aria-label":"Default select example",name:"searchParam",id:"searchParam",onChange:d,children:[e.jsx("option",{value:"fullname",children:"Full name"}),e.jsx("option",{value:"nationalid",children:"Identification Number"})]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("button",{className:"btn btn-raised-info text-white",type:"submit",disabled:o,children:[e.jsx("i",{className:"leading-icon material-icons",children:"search"}),o?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-grow spinner-grow-sm"}),e.jsx("span",{className:"ml-2",children:"Searching.."})]}):"Search"]})}),e.jsx("div",{className:"mt-4",children:e.jsx(ue,{handleClick:de})})]})})})}),e.jsx(Se,{type:"individual",actionType:"user",show:F,handleClose:()=>N(!1)}),_&&e.jsx(Ne,{showReport:_,handleCloseReport:()=>k(!1),selectedRow:P,reportData:V}),e.jsx(be,{show:c,isMultiple:R,isSingle:T,handleMultiple:ne,handleSingle:le,handleClose:H,setAddSuccessful:C,action:"create",url:"cl-store-individual"}),e.jsx("div",{className:"card card-raised",children:e.jsx("div",{className:"card-body p-4",children:e.jsxs("div",{className:"datatable-wrapper datatable-loading no-footer sortable searchable fixed-columns",children:[e.jsxs("div",{className:"datatable-container",children:[e.jsx("table",{className:"table table-striped",children:e.jsxs("tbody",{children:[e.jsxs("tr",{style:{backgroundColor:"#e4e4e4"},children:[e.jsx("th",{scope:"col",children:"Forenames"}),e.jsx("th",{scope:"col",children:"surname"}),e.jsx("th",{scope:"col",children:"Identification Number"}),e.jsx("th",{scope:"col",children:"Select"})]}),o?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-grow spinner-grow-sm"}),e.jsx("span",{className:"ml-2",children:"searching.."})]}):u.length>0&&u.map(t=>e.jsxs("tr",{children:[e.jsx("th",{scope:"row",children:t.firstname}),e.jsx("td",{children:t.surname}),e.jsx("td",{children:t.national_id}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-info mdc-ripple-upgraded text-white ",type:"submit",disabled:g,onClick:h=>L(h,t.id),children:g?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-grow spinner-grow-sm"}),e.jsx("span",{className:"ml-2",children:"processing.."})]}):"View"})})]},t.id))]})}),e.jsx("div",{className:"row justify-content-center",children:e.jsx("div",{className:"col-md-auto",children:A&&e.jsx(fe,{handleShow:I,handleCloseModal:()=>j(!1),userType:"individual",searchValue:a.searchValue})})})]}),e.jsxs("div",{className:"datatable-bottom",children:[e.jsx("div",{className:"datatable-info"}),e.jsx("nav",{className:"datatable-pagination"})]})]})})})]})]})}function we({individuals:n}){return e.jsxs(e.Fragment,{children:[e.jsx(oe,{title:"Search individual"}),e.jsx(ve,{individuals:n,url:"cl-search-individuals"})]})}we.layout=n=>e.jsx(me,{children:n,title:"Search Individual"});export{we as default};
