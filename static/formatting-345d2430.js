var P=Object.defineProperty,w=Object.defineProperties;var M=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable;var C=(a,t,e)=>t in a?P(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e,D=(a,t)=>{for(var e in t||(t={}))k.call(t,e)&&C(a,e,t[e]);if(b)for(var e of b(t))v.call(t,e)&&C(a,e,t[e]);return a},f=(a,t)=>w(a,M(t));const O=(a,t)=>{const e=new Date,o=new Date(e);o.setMonth(e.getMonth()-3);let u=[...a,...t].filter(s=>new Date(s.date_updated)>=o);return u.sort((s,c)=>{const y=new Date(s.date_updated),h=new Date(c.date_updated);return y-h}),u.map(s=>f(D({},s),{type:s.reference==="cash-receipt"?"payment":"invoice"}))},T=a=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:2}).format(a),_=(a,t)=>{const e={safe:"Current",low:"Past Due 1-30 days",medium:"Past Due 31-60 days",high:"Past Due 61-90 days","non-payer":"Past Due 90+ days"},o=(r,d)=>{const m=r.map(n=>({label:e[n.status]||"Current",amount:n.amount_owing||0,bg:d[n.status]||"green"}));return Object.values(e).forEach(n=>{if(!m.some(i=>i.label===n)){const i=n==="Current"?"green":n==="Past Due 1-30 days"?"orange":n==="Past Due 31-60 days"?"#f87171":n==="Past Due 61-90 days"?"#991b1b":"black";m.push({label:n,amount:0,bg:i})}}),m.sort((n,i)=>{const p=["Current","Past Due 1-30 days","Past Due 31-60 days","Past Due 61-90 days","Past Due 90+ days"];return p.indexOf(n.label)-p.indexOf(i.label)}),m},g={safe:"green",low:"orange",medium:"#f87171",high:"#991b1b","non-payer":"black"},u=o(a,g),l=o(t,g),s=u.reduce((r,d)=>r+d.amount,0)||0,c=l.reduce((r,d)=>r+d.amount,0)||0,y=u.map(r=>f(D({},r),{percentage:Math.round(r.amount/s*100,2)||0})),h=l.map(r=>f(D({},r),{percentage:Math.round(r.amount/c*100,2)||0}));return{creditGivenWithPercentages:y,creditTakenWithPercentages:h,totalCreditGiven:s,totalCreditTaken:c}};export{O as a,T as f,_ as t};
