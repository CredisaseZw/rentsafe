import{r as u,a as _,j as e,_ as r,b as j}from"./media/main-e93a7206.js";import{M as p}from"./Modal-f2882484.js";const k=({type:a,actionType:s})=>{const[o,c]=u.useState(!1),[i,d]=u.useState(""),{data:l,setData:x,post:b,reset:f,progress:w}=_({csv_file:null}),m=async()=>{i!==""?(window.open(`/download_template/${i}`,"_blank"),d("")):a==="individual"?s==="user"?window.open("/download_template/individual_template.csv","_blank"):s==="lease"&&window.open("/download_template/individual_lease_template.csv","_blank"):a==="company"&&(s==="user"?window.open("/download_template/company_template.csv","_blank"):s==="lease"&&window.open("/download_template/company_lease_template.csv","_blank"))},h=async n=>{if(n.preventDefault(),l.csv_file===null){r.error("Please select a file to upload");return}const v=a==="individual"&&s==="user"?"create_bulk_individuals":a==="company"&&s==="user"?"create_bulk_companies":a==="company"&&s==="lease"?"create_company_bulk_leases":"create_individual_bulk_leases";try{c(!0),d("");const t=await j.post(reverseUrl(v),l,{headers:{"Content-Type":"multipart/form-data"}});t.data.status==="failed"?(f(),d(t.data.file_path),r.error("Some records failed to be created. Download the returned file and try again")):r.success("All records created successfully"),c(!1)}catch{r.error("An error occurred. Please try again")}};return e.jsx("div",{children:e.jsxs("div",{className:"card card-raised",children:[e.jsx("div",{className:"card-header bg-info",children:e.jsxs("div",{className:`d-flex justify-content-between
                align-items-center`,children:[e.jsxs("div",{className:"me-4",children:[e.jsx("h2",{className:"display-6 mb-0 text-white",children:a==="individual"&&s==="user"?"Multiple Individuals Uploader":a==="company"&&s==="user"?"Multiple Companies Uploader":a==="company"&&s==="lease"?"Multiple Company Lease Uploader":"Multiple Individual Lease Uploader"}),e.jsx("div",{className:"card-text"})]}),e.jsx("div",{className:"d-flex gap-2"})]})}),e.jsx("div",{className:"card-body p-4",children:e.jsx("form",{onSubmit:h,children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-body p-4",style:{border:"1px dashed #999",borderColor:"#26a69a",backgroundColor:"rgb(239, 239, 239)"},onClick:()=>document.getElementById("csv_file").click(),children:[e.jsx(p.Body,{children:e.jsx("div",{className:"row mb-4",children:e.jsx("div",{className:"col-md-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"material-icons",style:{color:"#26a69a",fontSize:"48px"},children:"cloud_upload"}),e.jsx("div",{children:l.csv_file?l.csv_file.name:"Drag and drop files here, or browse your computer."}),e.jsx("input",{className:"form-control d-none",id:"csv_file",type:"file",accept:"text/csv",onChange:n=>x("csv_file",n.target.files[0])})]})})})}),e.jsx(p.Footer,{})]}),e.jsxs("div",{className:"card-footer d-flex flex-row align-items-center justify-content-between",children:[i===""?e.jsxs("p",{children:["Use the template provided"," ",e.jsx("a",{onClick:m,style:{cursor:"pointer"},className:"text-info text-decoration-underline ",children:"here"})]}):e.jsxs("p",{className:"text-danger",children:["Download the error file"," ",e.jsx("a",{onClick:m,style:{cursor:"pointer"},className:"text-info text-decoration-underline ",children:"here"})]}),e.jsx("button",{className:"btn btn-raised-info text-white btn-sm",type:"submit",disabled:o,children:o?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-grow spinner-grow-sm"}),e.jsx("span",{className:"ml-2",children:"Uploading..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"leading-icon material-icons",children:"upload"}),"Submit"]})})]})]})})})]})})};export{k as M};
