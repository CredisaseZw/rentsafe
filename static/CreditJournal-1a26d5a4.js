var q=Object.defineProperty,z=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var J=(l,i,t)=>i in l?q(l,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[i]=t,n=(l,i)=>{for(var t in i||(i={}))Y.call(i,t)&&J(l,t,i[t]);if(O)for(var t of O(i))G.call(i,t)&&J(l,t,i[t]);return l},c=(l,i)=>z(l,P(i));import{r as d,a as W,j as e,b as K}from"./main-5ef5aaa0.js";import{L as M}from"./Layout-be807b80.js";import H from"./SearchCustomer-5d76ef64.js";import{f as b}from"./formatting-345d2430.js";import{_ as f}from"./index-5741d9bf.js";import"./lodash-6852e1ff.js";function Q(){const[l,i]=d.useState(""),[t,I]=d.useState(""),[m,y]=d.useState(""),[_,j]=d.useState(""),[o,A]=d.useState(""),[u,v]=d.useState(""),[R,D]=d.useState(""),[C,E]=d.useState(""),[B,U]=d.useState(""),[S,F]=d.useState(""),[L,N]=d.useState(!1),V=r=>{r.preventDefault(),N(!0);let x=[];if(a.customerName!==""&&s.customerName!=="")x=[n({},a),n({},s)];else if(a.customerName!==""&&s.customerName==="")x=[n({},a)];else if(a.customerName===""&&s.customerName!=="")x=[n({},s)];else{f.error("All fields are required",{id:"create-sub"}),N(!1);return}console.log(x),K.post(reverseUrl("credit_journal"),x).then(g=>{if(g.data.status===400){i(g.data.errors[0]),f.error("Can't create journal entry(s). Please try again",{id:"create-sub"});return}k(),f.success("Journal entry(s) created successfully",{id:"create-sub"}),N(!1),E(""),U(""),y(""),v(""),D(""),F(""),I(""),A("")}).catch(g=>{f.error(g.message,{id:"create-sub"}),i(g),N(!1)})},w=r=>{r.target.id==="creditAmount"?p(c(n({},a),{[r.target.id]:r.target.value,endBalance:Number(a.accountBalance)-Number(r.target.value)})):p(c(n({},a),{[r.target.id]:r.target.value}))},T=r=>{r.target.id==="creditAmount"?h(c(n({},s),{[r.target.id]:r.target.value,endBalance:Number(s.accountBalance)-Number(r.target.value)})):h(c(n({},s),{[r.target.id]:r.target.value}))},{data:a,setData:p,post:X,reset:k}=W({customerName:"",leaseId:"",customerClass:"",date:new Date().toISOString().split("T")[0],accountBalance:"",creditAmount:"",details:"",endBalance:""}),{data:s,setData:h}=W({customerName:"",leaseId:"",customerClass:"",date:new Date().toISOString().split("T")[0],accountBalance:"",creditAmount:"",details:"",endBalance:""});return d.useEffect(()=>{t==="company"&&(p(c(n({},a),{customerClass:"company"})),j(reverseUrl("get_client_company_journals"))),t==="individual"&&(p(c(n({},a),{customerClass:"individual"})),j(reverseUrl("get_client_individual_journals")))},[t]),d.useEffect(()=>{o==="company"&&(h(c(n({},s),{customerClass:"company"})),j(reverseUrl("get_client_company_journals"))),o==="individual"&&(h(c(n({},s),{customerClass:"individual"})),j(reverseUrl("get_client_individual_journals")))},[o]),d.useEffect(()=>{t==="company"&&m!==""&&p(c(n({},a),{customerName:m,leaseId:C,accountBalance:R})),t==="individual"&&m!==""&&p(c(n({},a),{customerName:m,leaseId:C,accountBalance:R}))},[C,m,t,R]),d.useEffect(()=>{o==="company"&&u!==""&&h(c(n({},s),{customerName:u,leaseId:B,accountBalance:S})),o==="individual"&&u!==""&&h(c(n({},s),{customerName:u,leaseId:B,accountBalance:S}))},[B,S,u,o]),L&&f.loading("Creating ...",{id:"create-sub"}),e.jsxs("div",{className:"card card-raised mb-5",style:{height:"60vh",width:"100%",marginInline:"-25px",paddingRight:"30px",paddingLeft:"15px"},children:[e.jsx("div",{className:"mt-2 p-1 bg-danger",children:e.jsx("h5",{className:"text-white text-center",children:"Credit Journal"})}),e.jsx("div",{className:"card-body p-4 ",style:{height:"60vh"},children:e.jsxs("div",{className:"table-responsive",style:{overflowY:"visible",height:"100%"},children:[e.jsxs("table",{className:"table table-bordered",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderTop:"0px",fontSize:"12px"},children:[e.jsx("th",{scope:"col",style:{borderTop:"1px solid #e0e0e0"},children:"Date"}),e.jsx("th",{scope:"col",style:{borderTop:"1px solid #e0e0e0"},children:"Customer Type"}),e.jsx("th",{scope:"col",style:{borderTop:"1px solid #e0e0e0"},children:"Customer"}),e.jsx("th",{scope:"col",style:{borderTop:"1px solid #e0e0e0"},children:"Details"}),e.jsx("th",{scope:"col",className:"text-end",style:{borderTop:"1px solid #e0e0e0"},children:"Account Balance"}),e.jsx("th",{scope:"col",style:{borderTop:"1px solid #e0e0e0"},children:"Credit Amount"}),e.jsx("th",{scope:"col",className:"text-end",style:{borderTop:"1px solid #e0e0e0"},children:"End Balance"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("th",{scope:"row",className:"tf-borderRight tf-borderLeft",children:e.jsx("input",{type:"date",className:"form-control form-control-sm tf-borderRight tf-input",name:"date",id:"date",value:a.date,onChange:w})}),e.jsx("td",{className:"tf-borderRight",style:{paddingRight:"1px",paddingLeft:"1px"},children:e.jsxs("select",{onChange:r=>I(r.target.value),className:"form-select form-select-sm tf-borderRight tf-input",name:"customerType",value:t,children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"individual",children:"I"}),e.jsx("option",{value:"company",children:"C"})]})}),e.jsxs("td",{className:"tf-borderRight",style:{paddingRight:"1px",paddingLeft:"1px",position:"relative"},children:[e.jsx(H,{value:m,setValue:y,url:_,placeholder:"Start typing",delay:500,type:t,setCustomerName:y,setLeaseId:E,setOpeningBalance:D}),l&&e.jsx("div",{className:"text-danger mt-1",children:l.customerName})]}),e.jsx("td",{className:"tf-borderRight",style:{paddingRight:"1px",paddingLeft:"1px",minWidth:"200px"},children:e.jsx("textarea",{name:"details",className:"form-control form-control-sm tf-input",rows:2,id:"details",value:a.details,onChange:w})}),e.jsx("td",{className:"tf-borderRight text-end",style:{paddingRight:"1px",paddingLeft:"1px"},children:a.accountBalance?b(Number(a.accountBalance)):""}),e.jsx("td",{className:"tf-borderRight",style:{maxWidth:"40px",paddingRight:"1px",paddingLeft:"1px"},children:e.jsx("input",{onChange:w,className:"form-control form-control-sm tf-borderRight tf-input",type:"text",id:"creditAmount",value:a.creditAmount})}),e.jsx("td",{className:"tf-borderRight text-end",style:{paddingRight:"1px",paddingLeft:"1px"},children:a.endBalance?b(Number(a.endBalance)):""})]}),e.jsxs("tr",{children:[e.jsx("th",{scope:"row",className:"tf-borderRight tf-borderLeft",children:e.jsx("input",{type:"date",className:"form-control form-control-sm tf-borderRight tf-input",name:"date",id:"date",value:s.date,onChange:T})}),e.jsx("td",{className:"tf-borderRight",style:{paddingRight:"1px",paddingLeft:"1px"},children:e.jsxs("select",{onChange:r=>A(r.target.value),className:"form-select form-select-sm tf-borderRight tf-input",name:"customerType2",value:o,children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"individual",children:"I"}),e.jsx("option",{value:"company",children:"C"})]})}),e.jsxs("td",{className:"tf-borderRight",style:{paddingRight:"1px",paddingLeft:"1px",position:"relative"},children:[e.jsx(H,{value:u,setValue:v,url:_,placeholder:"Start typing",delay:500,type:o,setCustomerName:v,setLeaseId:U,setOpeningBalance:F}),l&&e.jsx("div",{className:"text-danger mt-1",children:l.customerName2})]}),e.jsx("td",{className:"tf-borderRight",style:{paddingRight:"1px",paddingLeft:"1px",minWidth:"200px"},children:e.jsx("textarea",{name:"details",className:"form-control form-control-sm tf-input",rows:2,id:"details",value:s.details,onChange:T})}),e.jsx("td",{className:"tf-borderRight text-end",style:{paddingRight:"1px",paddingLeft:"1px"},children:s.accountBalance?b(Number(s.accountBalance)):""}),e.jsx("td",{className:"tf-borderRight",style:{maxWidth:"40px",paddingRight:"1px",paddingLeft:"1px"},children:e.jsx("input",{onChange:T,className:"form-control form-control-sm tf-borderRight tf-input",type:"text",id:"creditAmount",value:s.creditAmount})}),e.jsx("td",{className:"tf-borderRight text-end",style:{paddingRight:"1px",paddingLeft:"1px"},children:s.endBalance?b(Number(s.endBalance)):""})]})]})]}),e.jsx("div",{className:"d-flex justify-content-end",children:e.jsx("button",{className:"btn btn-success btn-raised text-white",children:L?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-grow spinner-grow-sm"}),e.jsx("span",{className:"ml-2",children:"processing.."})]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"leading-icon material-icons",children:"add"}),"Add Row"]})})}),e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx("button",{className:"btn btn-info btn-raised text-white",onClick:V,children:L?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-grow spinner-grow-sm"}),e.jsx("span",{className:"ml-2",children:"processing.."})]}):e.jsx(e.Fragment,{children:"Submit"})})})]})})]})}Q.layout=l=>e.jsx(M,{children:l,title:"Customer Credit Adjustment - Credit Journal"});export{Q as default};
