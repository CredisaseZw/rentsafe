import{r,b as L,j as t}from"./main-159d3891.js";import{_ as z}from"./lodash-a81afe97.js";function F({delay:c=500,url:u,value:l,setValue:m,placeholder:_,type:p,setLeaseId:j,setCustomerName:f,setOpeningBalance:b}){const[C,i]=r.useState(!1),[g,d]=r.useState(!1),[k,h]=r.useState(!1),[x,y]=r.useState(""),[S,n]=r.useState([]),[R,D]=r.useState([]);r.useEffect(()=>{if(!l){n([]);return}const e=z.debounce(a=>{a.length<3||k||(d(!0),L.post(u,{searchParam:"guess",searchValue:a}).then(o=>{var v,w;((v=o.data)==null?void 0:v.status)!=="failed"?(D([...o.data]),n(p==="company"?o.data.map(s=>({label:s.company_name,value:s.lease_id})):o.data.map(s=>({label:s.full_name,value:s.lease_id}))),y(""),d(!1)):(n([]),d(!1),y((w=o.data)==null?void 0:w.result))}))},c);return e(l),d(!1),()=>{e.cancel()}},[c,u,l]);const E=e=>{h(!0);const a=R.find(o=>o.lease_id===e.value);j(e.value),m(e.label),f&&f(e.label),b&&b(p==="company"?a.company_opening_balance:a.opening_balance),i(!1),h(!1)};return t.jsxs("div",{style:{width:"100%",border:"1px solid gray",borderRadius:"0.5rem",position:"relative"},children:[t.jsx("input",{type:"text",placeholder:_,value:l,onChange:e=>m(e.target.value),onFocus:()=>i(!0),onBlur:()=>{setTimeout(()=>i(!1),200)},style:{width:"100%",padding:"0.2rem",fontSize:"1rem",border:"none",borderRadius:"0.5rem",backgroundColor:"#eee",color:"black",opacity:"0.8"},className:"form-control"}),C&&t.jsx("div",{style:{border:"2px #ccc solid",borderRadius:"0.5rem",backgroundColor:"#d9d9d9",padding:"1rem 0.2rem",height:"250px",overflowY:"scroll",width:"100%",marginTop:"0.1rem",position:"absolute",top:"100%",left:"0",zIndex:"100"},children:!g&&x?t.jsx("div",{style:{color:"red",margin:"auto"},children:x}):g&&S.length===0?t.jsx("div",{style:{color:"black",margin:"auto"},children:"Loading..."}):S.map((e,a)=>t.jsx("div",{onClick:()=>E(e),style:{cursor:"pointer",padding:"0.2rem 0.5rem",color:"black",opacity:"0.8",backgroundColor:"#d3d3d3",borderRadius:"0.5rem",margin:"0.5rem 0"},children:e.label},a))})]})}export{F as default};
