var Pe=Object.defineProperty,Me=Object.defineProperties;var Ee=Object.getOwnPropertyDescriptors;var re=Object.getOwnPropertySymbols;var pe=Object.prototype.hasOwnProperty,fe=Object.prototype.propertyIsEnumerable;var Ne=Math.pow,xe=(c,s,n)=>s in c?Pe(c,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):c[s]=n,B=(c,s)=>{for(var n in s||(s={}))pe.call(s,n)&&xe(c,n,s[n]);if(re)for(var n of re(s))fe.call(s,n)&&xe(c,n,s[n]);return c},P=(c,s)=>Me(c,Ee(s));var ne=(c,s)=>{var n={};for(var a in c)pe.call(c,a)&&s.indexOf(a)<0&&(n[a]=c[a]);if(c!=null&&re)for(var a of re(c))s.indexOf(a)<0&&fe.call(c,a)&&(n[a]=c[a]);return n};var ee=(c,s,n)=>new Promise((a,p)=>{var N=o=>{try{i(n.next(o))}catch(x){p(x)}},y=o=>{try{i(n.throw(o))}catch(x){p(x)}},i=o=>o.done?a(o.value):Promise.resolve(o.value).then(N,y);i((n=n.apply(c,s)).next())});import{r as l,j as e,a as se,b as le,u as Ye,R as _e}from"./main-3086900a.js";import"./PageHeader-60291f18.js";import{L as Oe}from"./Layout-6ae2172a.js";import{h as T}from"./moment-686b5dfa.js";import{_ as g,I as de}from"./index-b20093bf.js";import{R as ce}from"./Receipt-52a0c49f.js";import{f as ie}from"./formatting-345d2430.js";import{M as ye}from"./MultipleUpload-14119e44.js";import{u as Re,a as Le,F as ke,C as Ae,M as V}from"./Modal-575c6cb4.js";import{B as H}from"./Button-8a7dfb7a.js";import{S as Ie}from"./search-9f30240a.js";import{B as He,D as Ve}from"./DrawerContent-91877dce.js";import{a as me,u as Fe,c as he}from"./useEventCallback-33e3b96c.js";import{E as Ue,e as Ge}from"./removeClass-4206b808.js";import{S as $e,P as qe}from"./PaginationControls-46e86f29.js";import"./assertThisInitialized-3be3daa4.js";import"./defineProperty-a6ed99fe.js";import"./typeof-7fd5df1e.js";import"./index-29e2be6e.js";import"./Button-86422552.js";import"./lodash-f6a6d579.js";const oe=Ne(2,31)-1;function ve(c,s,n){const a=n-Date.now();c.current=a<=oe?setTimeout(s,a):setTimeout(()=>ve(c,s,n),oe)}function ze(){const c=Re(),s=l.useRef();return Le(()=>clearTimeout(s.current)),l.useMemo(()=>{const n=()=>clearTimeout(s.current);function a(p,N=0){c()&&(n(),N<=oe?s.current=setTimeout(p,N):ve(s,p,Date.now()+N))}return{set:a,clear:n,handleRef:s}},[])}const We={[Ue]:"showing",[Ge]:"showing show"},we=l.forwardRef((c,s)=>e.jsx(ke,P(B({},c),{ref:s,transitionClasses:We})));we.displayName="ToastFade";const Ze=we,Xe=l.createContext({onClose(){}}),Se=Xe,Te=l.forwardRef((o,i)=>{var x=o,{bsPrefix:c,closeLabel:s="Close",closeVariant:n,closeButton:a=!0,className:p,children:N}=x,y=ne(x,["bsPrefix","closeLabel","closeVariant","closeButton","className","children"]);c=me(c,"toast-header");const v=l.useContext(Se),_=Fe(d=>{v==null||v.onClose==null||v.onClose(d)});return e.jsxs("div",P(B({ref:i},y),{className:he(c,p),children:[N,a&&e.jsx(Ae,{"aria-label":s,variant:n,onClick:_,"data-dismiss":"toast"})]}))});Te.displayName="ToastHeader";const Ke=Te,Be=l.forwardRef((N,p)=>{var y=N,{className:c,bsPrefix:s,as:n="div"}=y,a=ne(y,["className","bsPrefix","as"]);return s=me(s,"toast-body"),e.jsx(n,B({ref:p,className:he(c,s)},a))});Be.displayName="ToastBody";const Je=Be,Ce=l.forwardRef((M,t)=>{var r=M,{bsPrefix:c,className:s,transition:n=Ze,show:a=!0,animation:p=!0,delay:N=5e3,autohide:y=!1,onClose:i,onEntered:o,onExit:x,onExiting:v,onEnter:_,onEntering:d,onExited:O,bg:F}=r,L=ne(r,["bsPrefix","className","transition","show","animation","delay","autohide","onClose","onEntered","onExit","onExiting","onEnter","onEntering","onExited","bg"]);c=me(c,"toast");const E=l.useRef(N),k=l.useRef(i);l.useEffect(()=>{E.current=N,k.current=i},[N,i]);const U=ze(),w=!!(y&&a),R=l.useCallback(()=>{w&&(k.current==null||k.current())},[w]);l.useEffect(()=>{U.set(R,E.current)},[U,R]);const Y=l.useMemo(()=>({onClose:i}),[i]),q=!!(n&&p),G=e.jsx("div",P(B({},L),{ref:t,className:he(c,s,F&&`bg-${F}`,!q&&(a?"show":"hide")),role:"alert","aria-live":"assertive","aria-atomic":"true"}));return e.jsx(Se.Provider,{value:Y,children:q&&n?e.jsx(n,{in:a,onEnter:_,onEntering:d,onEntered:o,onExit:x,onExiting:v,onExited:O,unmountOnExit:!0,children:G}):G})});Ce.displayName="Toast";const je=Object.assign(Ce,{Body:Je,Header:Ke});function Qe(c,s){const[n,a]=l.useState(c);return l.useEffect(()=>{const p=setTimeout(()=>{a(c)},s);return()=>{clearTimeout(p)}},[c,s]),n}const ge=({show:c,handleClose:s,action:n,lesseeDetails:a,subscriptionPeriod:p,handleShowAlert:N})=>{const[y,i]=l.useState(!1),[o,x]=l.useState(""),[v,_]=l.useState(!1),[d,O]=l.useState({}),[F,L]=l.useState(!1),[t,M]=l.useState(!0),{data:r,setData:E,post:k,reset:U}=se({identificationNumber:(a==null?void 0:a.reg_ID_Number)||"",lesseeName:(a==null?void 0:a.name)||"",lesseeAddress:(a==null?void 0:a.address)||"",lesseePhone:(a==null?void 0:a.mobile)||"",leaseDetails:(a==null?void 0:a.lease_details)||"",leaseStartDate:(a==null?void 0:a.start_date)||"",leaseEndDate:(a==null?void 0:a.end_date)||"",leaseCurrency:(a==null?void 0:a.currency)||"USD",depositAmount:(a==null?void 0:a.deposit_amount)||0,leasePeriod:p||(a==null?void 0:a.lease_period),rentVariable:(a==null?void 0:a.rent_variable)||!1,depositPeriod:(a==null?void 0:a.deposit_period)||0,monthlyRental:(a==null?void 0:a.monthly_rentals)||0,paymentPeriodStart:(a==null?void 0:a.payment_period_start)||"25",paymentPeriodEnd:(a==null?void 0:a.payment_period_end)||"7",isCompany:!1,leaseId:(a==null?void 0:a.lease_id)||-1,monthOneBalance:"",monthTwoBalance:"",monthThreeBalance:"",moreThanThreeMonthsBalance:"",currentBalance:""}),w=()=>{M(!0),L(!1)},R=()=>{L(!0),M(!1)},Y=T(),q=Y.clone().add(r.paymentPeriodEnd>=Y.date()?0:1,"months").date(r.paymentPeriodEnd).format("DD-MMM-YY"),G=Y.clone().subtract(r.paymentPeriodEnd>=Y.date()?1:0,"months").date(r.paymentPeriodEnd).format("DD-MMM-YY"),X=Y.clone().subtract(r.paymentPeriodEnd>=Y.date()?2:1,"months").date(r.paymentPeriodEnd).format("DD-MMM-YY"),K=Y.clone().subtract(r.paymentPeriodEnd>=Y.date()?3:2,"months").date(r.paymentPeriodEnd).format("DD-MMM-YY"),z=Qe(r.identificationNumber,500),W=l.useCallback(()=>{if(z&&z.length>=5)try{i(!0),le.post(reverseUrl("get-user"),r).then(m=>{var f,C,I,h,u,ae,te,S;(f=m.data)!=null&&f.props.name?(E(P(B({},r),{lesseeName:((C=m.data)==null?void 0:C.props.name)||"",lesseeAddress:((I=m.data)==null?void 0:I.props.address)||"",lesseePhone:((h=m.data)==null?void 0:h.props.phone)||""})),O((ae=(u=m.data)==null?void 0:u.props)==null?void 0:ae.openingBalances)):((r.identificationNumber.length===6||r.identificationNumber.length>7)&&g.error("User not found!",{duration:4e3,id:"error-toast",icon:"❌"}),x((S=(te=m.data)==null?void 0:te.props)==null?void 0:S.errors)),i(!1)}).catch(m=>{g.error("Something went wrong! Please try again"),x(m)}).finally(()=>{i(!1)})}catch(m){g.error("Something went wrong! Please try again"),x(m)}},[z]);l.useEffect(()=>{n==="add"&&W()},[n,W]),l.useEffect(()=>{if(r.leaseStartDate){const f=T(r.leaseStartDate);E(P(B({},r),{leaseEndDate:f}))}},[]);const b=m=>{m.target.id==="rentVariable"?E(P(B({},r),{[m.target.id]:m.target.checked})):m.target.id==="leasePeriod"?Number(m.target.value)>Number(p)?(g.error(`Lease period cannot be more than your subscription period (${p} months)`),E(P(B({},r),{[m.target.id]:p}))):E(P(B({},r),{[m.target.id]:m.target.value})):E(P(B({},r),{[m.target.id]:m.target.value}))},A=m=>ee(void 0,null,function*(){if(m.preventDefault(),r.lesseeName===""){g.error("Please enter a valid lessee");return}r.leaseEndDate=T(r.leaseStartDate).add(r.leasePeriod,"months").format("YYYY-MM-DD"),r.leaseStartDate=T(r.leaseStartDate).format("YYYY-MM-DD"),r.monthOneBalance=Number(r.monthOneBalance),r.monthTwoBalance=Number(r.monthTwoBalance),r.monthThreeBalance=Number(r.monthThreeBalance),r.moreThanThreeMonthsBalance=Number(r.moreThanThreeMonthsBalance),r.currentBalance=Number(r.currentBalance),r.monthOneDate=T(G).format("YYYY-MM-DD"),r.monthTwoDate=T(X).format("YYYY-MM-DD"),r.monthThreeDate=T(K).format("YYYY-MM-DD"),r.currentDate=T(q).format("YYYY-MM-DD"),r.monthlyRental=Number(r.monthlyRental),r.depositAmount=r.depositAmount,r.depositPeriod=Number(r.depositPeriod),r.leasePeriod=Number(r.leasePeriod),r.outStandingBalance=r.moreThanThreeMonthsBalance+r.monthThreeBalance+r.monthTwoBalance+r.monthOneBalance+r.currentBalance,k(reverseUrl("create-individual-lease"),{onStart:()=>{i(!0)},onSuccess:f=>{var I,h,u;const C=(I=f==null?void 0:f.props)==null?void 0:I.flash.message;C&&((h=f==null?void 0:f.props)==null?void 0:h.flash.type)==="success"?(s(),N(C,r.lesseeName)):C&&((u=f==null?void 0:f.props)==null?void 0:u.flash.type)==="error"&&g.error(C.message),U(),i(!1)},onError:f=>{g.error(m.message||"Something went wrong! Please try again"),x(m),i(!1)}})}),J=m=>{m.preventDefault(),r.leaseStartDate=T(r.leaseStartDate).format("YYYY-MM-DD"),r.leaseEndDate=T(r.leaseStartDate).add(r.leasePeriod,"months").format("YYYY-MM-DD"),k(reverseUrl("client-edit-lease"),{onStart:()=>{i(!0)},onSuccess:f=>{var C,I;((C=f==null?void 0:f.props)==null?void 0:C.flash.type)==="success"?(s(),N("Lease updated successfully")):((I=f==null?void 0:f.props)==null?void 0:I.flash.type)==="error"&&g.error("An error occurred, please try again later"),i(!1)},onError:f=>{g.error("Something went wrong! Please try again"),x(f),i(!1)}})};return e.jsx(e.Fragment,{children:e.jsx(V,{size:"lg",show:c,onHide:s,children:e.jsxs("div",{children:[e.jsx(V.Header,{closeButton:!0,className:"card-header bg-transparent",style:{paddingLeft:"0px"},children:e.jsxs("div",{className:"",children:[e.jsx("button",{className:`btn  btn-sm ${t?"btn-info text-white":"btn-light"}`,onClick:w,children:"Single"}),e.jsx("button",{className:`btn  btn-sm ${F?"btn-info text-white":"btn-light"}`,onClick:R,children:"Multiple"})]})}),t?e.jsxs("div",{className:"card card-raised",children:[e.jsx("div",{className:"card-header bg-info",children:e.jsxs("div",{className:`d-flex justify-content-between
                      align-items-center`,children:[e.jsxs("div",{className:"me-4",children:[e.jsx("h2",{className:"display-6 mb-0 text-white",children:n==="view"?"View Lease - Individual":n==="edit"?"Edit Lease - Individual":"Add Lease - Individual"}),e.jsx("div",{className:"card-text"})]}),e.jsx("div",{className:"d-flex gap-2"})]})}),e.jsx("div",{className:"card-body p-4",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header bg-info px-4",style:{paddingTop:"2px",paddingBottom:"2px"},children:e.jsx("div",{className:`d-flex justify-content-center
                            align-items-center`,children:e.jsxs("div",{className:"me-4",children:[e.jsx("h6",{className:"display-6 mb-0 text-white",children:"Lease details"}),e.jsx("div",{className:"card-text"})]})})}),e.jsx("div",{className:"card-body p-4",style:{borderStyle:"solid",borderColor:"#26a69a"},children:e.jsx(V.Body,{children:e.jsxs("form",{onSubmit:n==="add"?A:n==="edit"?J:()=>{},children:[e.jsxs("div",{className:"row mb-4",children:[e.jsx(de,{}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"National ID:"}),e.jsx("input",{value:r.identificationNumber,onChange:b,type:"text",required:!0,name:"identificationNumber",id:"identificationNumber",className:"form-control form-control-sm"}),o&&e.jsx("div",{className:"text-danger mt-1",children:o.identificationNumber})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Lessee Name:"}),e.jsx("input",{value:r.lesseeName,onChange:b,type:"text",name:"lesseeName",required:!0,id:"lesseeName",className:"form-control form-control-sm",readOnly:!0}),o&&e.jsx("div",{className:"text-danger mt-1",children:o.lesseeName})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Lessee Mobile Number"}),e.jsx("input",{value:r.lesseePhone,onChange:b,type:"text",name:"lesseePhone",id:"lesseePhone",required:!0,className:"form-control form-control-sm",readOnly:n==="view"}),o&&e.jsx("div",{className:"text-danger mt-1",children:o.lesseePhone})]})]})]}),e.jsx("div",{className:"row mb-4",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Lease Address:"}),e.jsx("textarea",{value:r.lesseeAddress,onChange:b,type:"text",required:!!r.lesseeName,name:"lesseeAddress",id:"lesseeAddress",className:"form-control form-control-sm",readOnly:n==="view"}),o&&e.jsx("div",{className:"text-danger mt-1",children:o.lesseeAddress})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Lease Details:"}),e.jsx("textarea",{value:r.leaseDetails,onChange:b,name:"leaseDetails",id:"leaseDetails",className:"form-control form-control-sm",readOnly:n==="view"}),o&&e.jsx("div",{className:"text-danger mt-1",children:o.leaseDetails})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Lease Currency"}),e.jsxs("select",{value:r.leaseCurrency,onChange:b,id:"leaseCurrency",name:"leaseCurrency",className:"form-select form-select-sm",readOnly:n==="view",children:[e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"ZWG",children:"ZWG"})]}),o&&e.jsx("div",{className:"text-danger mt-1",children:o.leaseCurrency})]})]})}),e.jsx("div",{className:"row mb-4",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Monthly Rental:"}),e.jsx("input",{value:r.monthlyRental===0?"":r.monthlyRental,placeholder:"enter monthly rental",onChange:b,type:"text",required:!!r.lesseeName,id:"monthlyRental",name:"monthlyRental",className:"form-control form-control-sm",readOnly:n==="view"}),o&&e.jsx("div",{className:"text-danger mt-1",children:o.monthlyRental})]}),e.jsxs("div",{className:"mt-1 col-lg-4 d-flex flex-column",children:[e.jsx("label",{className:"form-label",children:"Variable Rent:"}),e.jsx("input",{checked:r.rentVariable,onChange:b,type:"checkbox",id:"rentVariable",name:"rentVariable",className:"form-check-input border-1 p-2 border-black"}),o&&e.jsx("div",{className:"text-danger mt-1",children:o.rentVariable})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Deposit Period(Months):"}),e.jsx("input",{value:r.depositPeriod===0?"":r.depositPeriod,placeholder:"enter deposit period",onChange:b,type:"text",id:"depositPeriod",name:"depositPeriod",className:"form-control form-control-sm",readOnly:n==="view"}),o&&e.jsx("div",{className:"text-danger mt-1",children:o.depositPeriod})]})]})}),e.jsx("div",{className:"row mb-4",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Deposit Amount:"}),e.jsx("input",{value:r.depositAmount===0?"":r.depositAmount,placeholder:"enter deposit amount",onChange:b,type:"text",name:"depositAmount",id:"depositAmount",className:"form-control form-control-sm",readOnly:n==="view"}),o&&e.jsx("div",{className:"text-danger mt-1",children:o.depositAmount})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Subs Months Remaining:"}),e.jsx("input",{value:r.leasePeriod,onChange:b,type:"number",id:"leasePeriod",name:"leasePeriod",className:"form-control form-control-sm"}),o&&e.jsx("div",{className:"text-danger mt-1",children:o.leasePeriod})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Lease Start Date:"}),e.jsx("input",{value:r.leaseStartDate,onChange:b,type:"date",required:!!r.lesseeName,name:"leaseStartDate",id:"leaseStartDate",className:"form-control form-control-sm",readOnly:n==="view"}),o&&e.jsx("div",{className:"text-danger mt-1",children:o.leaseStartDate})]})]})}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Lease End Date:"}),e.jsx("span",{className:"form-control form-control-sm",children:r.leaseStartDate?T(r.leaseStartDate).add(r.leasePeriod,"months").subtract(1,"days").format("DD / MM / YYYY"):""}),o&&e.jsx("div",{className:"text-danger mt-1",children:o.leaseEndDate})]}),e.jsxs("div",{className:"col-lg-4 mt-1",children:[e.jsx("label",{className:"form-label",children:"Payment Period Start Date:"}),e.jsx("input",{value:r.paymentPeriodStart,type:"number",id:"paymentPeriodStart",name:"paymentPeriodStart",className:"form-control form-control-sm",readOnly:!0,disabled:!0}),o&&e.jsx("div",{className:"text-danger mt-1",children:o.paymentPeriodStart})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Payment Period End Date:"}),e.jsx("input",{value:r.paymentPeriodEnd,onChange:b,type:"number",min:"1",max:"31",required:!!r.lesseeName,name:"paymentPeriodEnd",id:"paymentPeriodEnd",className:"form-control form-control-sm",readOnly:n==="view"}),o&&e.jsx("div",{className:"text-danger mt-1",children:o.paymentPeriodEnd})]})]}),n==="add"&&e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"table-responsive table-bordered",children:[e.jsx("h3",{className:"text-center p-2 fw-bolder h6",style:{backgroundColor:"#a0a0af"},children:"Opening Rent Balances"}),e.jsx("table",{className:"table table-bordered",children:e.jsxs("tbody",{children:[e.jsxs("tr",{style:{lineHeight:"5px",fontSize:"12px"},children:[e.jsx("th",{scope:"row",className:"fw-bold",style:{lineHeight:"15px"},children:"Payment Date"}),e.jsx("td",{className:"",style:{lineHeight:"15px"},children:"More than 3 months"}),e.jsx("td",{className:"",style:{lineHeight:"15px"},children:K}),e.jsx("td",{className:"",style:{lineHeight:"15px"},children:X}),e.jsx("td",{className:"",style:{lineHeight:"15px"},children:G}),e.jsx("td",{className:"",style:{lineHeight:"15px"},children:q}),e.jsx("td",{className:"fw-bold",style:{lineHeight:"15px"},children:"Outstanding Balance"})]}),e.jsxs("tr",{style:{lineHeight:"5px",fontSize:"12px"},children:[e.jsx("th",{scope:"row",className:"fw-bold",children:"Amount"}),e.jsx("td",{className:"bg-black text-white",children:e.jsx("input",{className:"form-control form-control-sm",type:"text",id:"moreThanThreeMonthsBalance",name:"moreThanThreeMonthsBalance",onChange:b,value:r.moreThanThreeMonthsBalance})}),e.jsx("td",{className:"text-white bg-danger",children:e.jsx("input",{className:"form-control form-control-sm",type:"text",id:"monthThreeBalance",name:"monthThreeBalance",onChange:b,value:r.monthThreeBalance})}),e.jsx("td",{className:"text-white",style:{backgroundColor:"#f87171"},children:e.jsx("input",{className:"form-control form-control-sm",type:"text",id:"monthTwoBalance",name:"monthTwoBalance",onChange:b,value:r.monthTwoBalance})}),e.jsx("td",{className:"text-white bg-warning",children:e.jsx("input",{className:"form-control form-control-sm",type:"text",id:"monthOneBalance",name:"monthOneBalance",onChange:b,value:r.monthOneBalance})}),e.jsx("td",{className:"text-white bg-success",children:e.jsx("input",{className:"form-control form-control-sm",type:"text",id:"currentBalance",name:"currentBalance",onChange:b,value:r.currentBalance})}),e.jsx("td",{className:`text-white d-flex align-items-center justify-content-center py-4 my-auto ${Number(r.moreThanThreeMonthsBalance)>0?"bg-black":Number(r.monthThreeBalance)>0?"bg-danger":Number(r.monthTwoBalance)>0?"bg-transperant":Number(r.monthOneBalance)>0?"bg-warning":"bg-success"}`,style:{backgroundColor:Number(r.monthTwoBalance)>0?"#f87171":""},children:ie(Number(r.moreThanThreeMonthsBalance)+Number(r.monthThreeBalance)+Number(r.monthTwoBalance)+Number(r.monthOneBalance)+Number(r.currentBalance)||0)})]})]})})]})}),e.jsx("div",{className:"w-100 mt-4 d-flex justify-content-end gap-3",children:n==="view"?e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"text-white",variant:"info",onClick:()=>{_(!0)},children:"Receipt"}),e.jsx(H,{className:"text-white",variant:"success",onClick:()=>{s()},children:"Edit"}),e.jsx(H,{className:"text-white",variant:"danger",onClick:()=>{s()},children:"Terminate"})]}):e.jsxs(e.Fragment,{children:[e.jsx(H,{variant:"secondary",onClick:s,children:"Cancel"}),e.jsx(H,{className:"text-white",variant:"info",type:"submit",disabled:y,children:y?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-grow spinner-grow-sm"}),e.jsx("span",{className:"ml-2",children:"processing.."})]}):"Submit"})," "]})})]})})}),v&&e.jsx(ce,{show:v,handleClose:()=>{_(!1)}})]})})]}):e.jsx(ye,{type:"individual",actionType:"lease"})]})})})},be=({show:c,handleClose:s,action:n,lesseeDetails:a,subscriptionPeriod:p,handleShowAlert:N})=>{const[y,i]=l.useState(!1),[o,x]=l.useState(!1),[v,_]=l.useState(!0),[d,O]=l.useState(""),[F,L]=l.useState(!1),{data:t,setData:M,post:r,reset:E}=se({identificationNumber:(a==null?void 0:a.reg_ID_Number)||"",lesseeName:(a==null?void 0:a.name)||"",lesseeAddress:(a==null?void 0:a.address)||"",mobile:(a==null?void 0:a.mobile)||"",email:(a==null?void 0:a.email)||"",rentGuarantorId:(a==null?void 0:a.rent_guarantor_id)||"",rentGuarantorIdType:(a==null?void 0:a.rent_guarantor_id_type)||"",rentGuarantorName:(a==null?void 0:a.rent_guarantor_name)||"",leaseDetails:(a==null?void 0:a.lease_details)||"",leaseStartDate:(a==null?void 0:a.start_date)||"",rentVariable:(a==null?void 0:a.rent_variable)||!1,leaseEndDate:(a==null?void 0:a.end_date)||"",leaseCurrency:(a==null?void 0:a.currency)||"USD",depositAmount:(a==null?void 0:a.deposit_amount)||0,leasePeriod:p||(a==null?void 0:a.lease_period),depositPeriod:(a==null?void 0:a.deposit_period)||0,monthlyRental:(a==null?void 0:a.monthly_rentals)||0,paymentPeriodStart:(a==null?void 0:a.payment_period_start)||"25",paymentPeriodEnd:(a==null?void 0:a.payment_period_end)||"7",isCompany:!0,leaseId:(a==null?void 0:a.lease_id)||-1,monthOneBalance:"",monthTwoBalance:"",monthThreeBalance:"",moreThanThreeMonthsBalance:"",currentBalance:""}),[k,U]=l.useState(n==="edit"?t.lesseeName:""),[w,R]=l.useState(t.lesseeName),[Y,q]=l.useState(t.email),[G,X]=l.useState(t.identificationNumber),[K,z]=l.useState(t.mobile),[W,b]=l.useState(t.lesseeAddress),A=T(),J=A.clone().add(t.paymentPeriodEnd>=A.date()?0:1,"months").date(t.paymentPeriodEnd).format("DD-MMM-YY"),m=A.clone().subtract(t.paymentPeriodEnd>=A.date()?1:0,"months").date(t.paymentPeriodEnd).format("DD-MMM-YY"),f=A.clone().subtract(t.paymentPeriodEnd>=A.date()?2:1,"months").date(t.paymentPeriodEnd).format("DD-MMM-YY"),C=A.clone().subtract(t.paymentPeriodEnd>=A.date()?3:2,"months").date(t.paymentPeriodEnd).format("DD-MMM-YY");l.useEffect(()=>{M(P(B({},t),{lesseeName:w,email:Y,identificationNumber:String(G),mobile:K,lesseeAddress:W}))},[G,w,Y,K,W]),l.useEffect(()=>{n==="add"&&(()=>{if(t.rentGuarantorId&&/^[\d]{8,9}[A-Za-z]{1}[\d]{2}$/.test(t.rentGuarantorId))try{i(!0),le.post(reverseUrl("get-user"),{identificationNumber:t.rentGuarantorId}).then(j=>{var $,Z,Q,D,ue;($=j.data)!=null&&$.props.name?M(P(B({},t),{rentGuarantorName:((Z=j.data)==null?void 0:Z.props.name)||"",rentGuarantorIdType:((Q=j.data)==null?void 0:Q.props.identification_type)||""})):(g.error("User not found!",{duration:4e3,icon:"❌"}),O((ue=(D=j.data)==null?void 0:D.props)==null?void 0:ue.errors)),i(!1)}).catch(j=>{g.error("Something went wrong! Please try again"),O(j)}).finally(()=>{i(!1)})}catch(j){g.error("Something went wrong! Please try again"),O(j)}})()},[t.rentGuarantorId]);const I=()=>{_(!0),x(!1)},h=()=>{x(!0),_(!1)},u=S=>{S.target.id==="rentVariable"?M(P(B({},t),{[S.target.id]:S.target.checked})):S.target.id==="leasePeriod"?Number(S.target.value)>Number(p)?(g.error(`Lease period cannot be more than your subscription period (${p} months)`),M(P(B({},t),{[S.target.id]:p}))):M(P(B({},t),{[S.target.id]:S.target.value})):M(P(B({},t),{[S.target.id]:S.target.value}))},ae=S=>ee(void 0,null,function*(){if(S.preventDefault(),!t.lesseeName){g.error("Please add a valid lessee");return}i(!0),t.leaseEndDate=T(t.leaseStartDate).add(t.leasePeriod,"months").format("YYYY-MM-DD"),t.monthOneBalance=Number(t.monthOneBalance),t.monthTwoBalance=Number(t.monthTwoBalance),t.monthThreeBalance=Number(t.monthThreeBalance),t.moreThanThreeMonthsBalance=Number(t.moreThanThreeMonthsBalance),t.currentBalance=Number(t.currentBalance),t.monthOneDate=T(m).format("YYYY-MM-DD"),t.monthTwoDate=T(f).format("YYYY-MM-DD"),t.monthThreeDate=T(C).format("YYYY-MM-DD"),t.currentDate=T(J).format("YYYY-MM-DD"),t.monthlyRental=Number(t.monthlyRental),t.depositAmount=t.depositAmount,t.depositPeriod=Number(t.depositPeriod),t.leasePeriod=Number(t.leasePeriod),t.outStandingBalance=t.moreThanThreeMonthsBalance+t.monthThreeBalance+t.monthTwoBalance+t.monthOneBalance+t.currentBalance,r(reverseUrl("create-company-lease"),{onStart:()=>{i(!0)},onSuccess:j=>{var Z,Q,D;const $=(Z=j==null?void 0:j.props)==null?void 0:Z.flash.message;$&&((Q=j==null?void 0:j.props)==null?void 0:Q.flash.type)==="success"?(s(),E(),N($,t.lesseeName)):$&&((D=j==null?void 0:j.props)==null?void 0:D.flash.type)==="error"&&g.error($.message),i(!1)},onError:j=>{g.error(S.message||"Something went wrong! Please try again"),O(S),i(!1)}})}),te=S=>{S.preventDefault(),t.leaseStartDate=T(t.leaseStartDate).format("YYYY-MM-DD"),r(reverseUrl("client-edit-lease"),{onStart:()=>{i(!0)},onSuccess:j=>{var $,Z;(($=j==null?void 0:j.props)==null?void 0:$.flash.type)==="success"?(s(),N("Lease updated successfully")):((Z=j==null?void 0:j.props)==null?void 0:Z.flash.type)==="error"&&g.error("An error occurred, please try again"),i(!1)},onError:j=>{g.error("Something went wrong! Please try again"),O(j),i(!1)}})};return e.jsx(e.Fragment,{children:e.jsx(V,{size:"lg",show:c,onHide:s,children:e.jsxs("div",{children:[e.jsx(V.Header,{closeButton:!0,className:"card-header bg-transparent",style:{paddingLeft:"0px"},children:e.jsxs("div",{className:"",children:[e.jsx("button",{className:`btn  btn-sm ${v?"btn-info text-white":"btn-light"}`,onClick:I,children:"Single"}),e.jsx("button",{className:`btn  btn-sm ${o?"btn-info text-white":"btn-light"}`,onClick:h,children:"Multiple"})]})}),v?e.jsxs("div",{className:"card card-raised",children:[e.jsx("div",{className:"card-header bg-info",children:e.jsxs("div",{className:`d-flex justify-content-between
                      align-items-center`,children:[e.jsxs("div",{className:"me-4",children:[e.jsx("h2",{className:"display-6 mb-0 text-white",children:n==="view"?"View Lease - Company":n==="edit"?"Edit Lease - Company":"Add Lease - Company"}),e.jsx("div",{className:"card-text"})]}),e.jsx("div",{className:"d-flex gap-2"})]})}),e.jsx("div",{className:"card-body p-4",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header bg-info px-4",style:{paddingTop:"2px",paddingBottom:"2px"},children:e.jsx("div",{className:`d-flex justify-content-center
                            align-items-center`,children:e.jsxs("div",{className:"me-4",children:[e.jsx("h6",{className:"display-6 mb-0 text-white",children:"Lease details"}),e.jsx("div",{className:"card-text"})]})})}),e.jsx("div",{className:"card-body p-4",style:{borderStyle:"solid",borderColor:"#26a69a"},children:e.jsx(V.Body,{children:e.jsxs("form",{onSubmit:n==="add"?ae:n==="edit"?te:()=>{},children:[e.jsx("div",{className:"row mb-4",children:e.jsxs("div",{className:"row",children:[e.jsx(de,{}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Company Trading Name:"}),e.jsx(Ie,{from:"leases",delay:500,placeholder:"Company Name",value:k,setValue:U,url:reverseUrl("get_searched_companies"),type:"company",setAddress:b,setClientName:R,setRegNumber:q,setClientId:X,setMobileNo:z}),d&&e.jsx("div",{className:"text-danger mt-1",children:d.identificationNumber})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Lessee Name:"}),e.jsx("input",{value:t.lesseeName,onChange:u,type:"text",name:"lesseeName",readOnly:!0,required:!0,id:"lesseeName",className:"form-control form-control-sm"}),d&&e.jsx("div",{className:"text-danger mt-1",children:d.lesseeName})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Email:"}),e.jsx("input",{value:t.email,onChange:u,type:"text",name:"email",required:!0,id:"email",className:"form-control form-control-sm",readOnly:n==="view"}),d&&e.jsx("div",{className:"text-danger mt-1",children:d.email})]})]})}),e.jsx("div",{className:"row mb-4",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Mobile:"}),e.jsx("input",{value:t.mobile,onChange:u,type:"text",name:"mobile",required:!0,id:"mobile",className:"form-control form-control-sm",readOnly:n==="view"}),d&&e.jsx("div",{className:"text-danger mt-1",children:d.mobile})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Rent Guarantor ID:"}),e.jsx("input",{value:t.rentGuarantorId,onChange:u,type:"text",name:"rentGuarantorId",id:"rentGuarantorId",className:"form-control form-control-sm",readOnly:n==="view"}),d&&e.jsx("div",{className:"text-danger mt-1",children:d.rentGuarantorId})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Rent Guarantor Name:"}),e.jsx("input",{value:t.rentGuarantorName,onChange:u,type:"text",name:"rentGuarantorName",id:"rentGuarantorName",className:"form-control form-control-sm",readOnly:!0}),d&&e.jsx("div",{className:"text-danger mt-1",children:d.rentGuarantorName})]})]})}),e.jsx("div",{className:"row mb-4",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Lease Address:"}),e.jsx("textarea",{value:t.lesseeAddress,onChange:u,type:"text",required:!!t.lesseeName,name:"lesseeAddress",id:"lesseeAddress",className:"form-control form-control-sm",readOnly:n==="view"}),d&&e.jsx("div",{className:"text-danger mt-1",children:d.lesseeAddress})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Lease Details:"}),e.jsx("textarea",{value:t.leaseDetails,onChange:u,type:"text",name:"leaseDetails",id:"leaseDetails",className:"form-control form-control-sm",readOnly:n==="view"}),d&&e.jsx("div",{className:"text-danger mt-1",children:d.leaseDetails})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Lease Currency"}),e.jsxs("select",{value:t.leaseCurrency,onChange:u,id:"leaseCurrency",name:"leaseCurrency",className:"form-select form-select-sm",readOnly:n==="view",children:[e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"ZWG",children:"ZWG"})]}),d&&e.jsx("div",{className:"text-danger mt-1",children:d.leaseCurrency})]})]})}),e.jsx("div",{className:"row mb-4",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Monthly Rental:"}),e.jsx("input",{value:t.monthlyRental===0?"":t.monthlyRental,placeholder:"enter monthly rental",onChange:u,type:"text",required:!!t.lesseeName,id:"monthlyRental",name:"monthlyRental",className:"form-control form-control-sm",readOnly:n==="view"}),d&&e.jsx("div",{className:"text-danger mt-1",children:d.monthlyRental})]}),e.jsxs("div",{className:"mt-1 col-lg-4 d-flex flex-column",children:[e.jsx("label",{className:"form-label",children:"Variable Rent:"}),e.jsx("input",{checked:t.rentVariable,onChange:u,type:"checkbox",id:"rentVariable",name:"rentVariable",className:"form-check-input border-1 p-2 border-black",readOnly:n==="view"}),d&&e.jsx("div",{className:"text-danger mt-1",children:d.rentVariable})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Deposit Period(Months):"}),e.jsx("input",{value:t.depositPeriod===0?"":t.depositPeriod,placeholder:"enter deposit period",onChange:u,type:"text",id:"depositPeriod",name:"depositPeriod",className:"form-control form-control-sm",readOnly:n==="view"}),d&&e.jsx("div",{className:"text-danger mt-1",children:d.depositPeriod})]})]})}),e.jsx("div",{className:"row mb-4",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Deposit Amount:"}),e.jsx("input",{value:t.depositAmount===0?"":t.depositAmount,placeholder:"enter deposit amount",onChange:u,type:"text",name:"depositAmount",id:"depositAmount",className:"form-control form-control-sm",readOnly:n==="view"}),d&&e.jsx("div",{className:"text-danger mt-1",children:d.depositAmount})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Subs Months Remaining:"}),e.jsx("input",{value:t.leasePeriod,onChange:u,type:"number",id:"leasePeriod",name:"leasePeriod",className:"form-control form-control-sm"}),d&&e.jsx("div",{className:"text-danger mt-1",children:d.leasePeriod})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Lease Start Date:"}),e.jsx("input",{value:t.leaseStartDate,onChange:u,type:"date",name:"leaseStartDate",required:!!t.lesseeName,id:"leaseStartDate",className:"form-control form-control-sm",readOnly:n==="view"}),d&&e.jsx("div",{className:"text-danger mt-1",children:d.leaseStartDate})]})]})}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Lease End Date:"}),e.jsx("span",{className:"form-control form-control-sm",children:t.leaseStartDate?T(t.leaseStartDate).add(t.leasePeriod,"months").subtract(1,"days").format("DD / MM / YYYY"):""}),d&&e.jsx("div",{className:"text-danger mt-1",children:d.leaseEndDate})]}),e.jsxs("div",{className:"col-lg-4 mt-1",children:[e.jsx("label",{className:"form-label",children:"Payment Period Start Date:"}),e.jsx("input",{value:t.paymentPeriodStart,onChange:u,type:"number",id:"paymentPeriodStart",name:"paymentPeriodStart",className:"form-control form-control-sm",readOnly:!0,disabled:!0}),d&&e.jsx("div",{className:"text-danger mt-1",children:d.paymentPeriodStart})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Payment Period End Date:"}),e.jsx("input",{value:t.paymentPeriodEnd,onChange:u,min:"1",max:"31",type:"number",required:!!t.lesseeName,name:"paymentPeriodEnd",id:"paymentPeriodEnd",className:"form-control form-control-sm",readOnly:n==="view"}),d&&e.jsx("div",{className:"text-danger mt-1",children:d.paymentPeriodEnd})]})]}),n==="add"&&e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"table-responsive table-bordered",children:[e.jsx("h3",{className:"text-center p-2 fw-bolder h6",style:{backgroundColor:"#a0a0af"},children:"Opening Rent Balances"}),e.jsx("table",{className:"table table-bordered",children:e.jsxs("tbody",{children:[e.jsxs("tr",{style:{lineHeight:"5px",fontSize:"12px"},children:[e.jsx("th",{scope:"row",className:"fw-bold",style:{lineHeight:"15px"},children:"Payment Date"}),e.jsx("td",{className:"",style:{lineHeight:"15px"},children:"More than 3 months"}),e.jsx("td",{className:"",style:{lineHeight:"15px"},children:C}),e.jsx("td",{className:"",style:{lineHeight:"15px"},children:f}),e.jsx("td",{className:"",style:{lineHeight:"15px"},children:m}),e.jsx("td",{className:"",style:{lineHeight:"15px"},children:J}),e.jsx("td",{className:"fw-bold",style:{lineHeight:"15px"},children:"Outstanding Balance"})]}),e.jsxs("tr",{style:{lineHeight:"5px",fontSize:"12px"},children:[e.jsx("th",{scope:"row",className:"fw-bold",children:"Amount"}),e.jsx("td",{className:"bg-black text-white",children:e.jsx("input",{className:"form-control form-control-sm",type:"text",id:"moreThanThreeMonthsBalance",name:"moreThanThreeMonthsBalance",onChange:u,value:t.moreThanThreeMonthsBalance})}),e.jsx("td",{className:"text-white bg-danger",children:e.jsx("input",{className:"form-control form-control-sm",type:"text",id:"monthThreeBalance",name:"monthThreeBalance",onChange:u,value:t.monthThreeBalance})}),e.jsx("td",{className:"text-white",style:{backgroundColor:"#f87171"},children:e.jsx("input",{className:"form-control form-control-sm",type:"text",id:"monthTwoBalance",name:"monthTwoBalance",onChange:u,value:t.monthTwoBalance})}),e.jsx("td",{className:"text-white bg-warning",children:e.jsx("input",{className:"form-control form-control-sm",type:"text",id:"monthOneBalance",name:"monthOneBalance",onChange:u,value:t.monthOneBalance})}),e.jsx("td",{className:"text-white bg-success",children:e.jsx("input",{className:"form-control form-control-sm",type:"text",id:"currentBalance",name:"currentBalance",onChange:u,value:t.currentBalance})}),e.jsx("td",{className:`text-white text-end h-100 d-flex align-items-center justify-content-center py-4 my-auto ${Number(t.moreThanThreeMonthsBalance)>0?"bg-black":Number(t.monthThreeBalance)>0?"bg-danger":Number(t.monthTwoBalance)>0?"bg-transperant":Number(t.monthOneBalance)>0?"bg-warning":"bg-success"}`,style:{backgroundColor:Number(t.monthTwoBalance)>0?"#f87171":""},children:ie(Number(t.moreThanThreeMonthsBalance)+Number(t.monthThreeBalance)+Number(t.monthTwoBalance)+Number(t.monthOneBalance)+Number(t.currentBalance)||0)})]})]})})]})}),e.jsx("div",{className:"w-100 d-flex justify-content-end gap-3",children:n==="view"?e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"text-white",variant:"info",onClick:()=>{L(!0)},children:"Receipt"}),e.jsx(H,{className:"text-white",variant:"success",onClick:()=>{s()},children:"Edit"}),e.jsx(H,{className:"text-white",variant:"danger",onClick:()=>{s()},children:"Terminate"})]}):e.jsxs(e.Fragment,{children:[e.jsx(H,{variant:"secondary",onClick:s,children:"Cancel"}),e.jsx(H,{className:"text-white",variant:"info",type:"submit",disabled:y,children:y?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-grow spinner-grow-sm"}),e.jsx("span",{className:"ml-2",children:"processing.."})]}):"Submit"})," "]})})]})})}),F&&e.jsx(ce,{show:F,handleClose:()=>{L(!1)}})]})})]}):e.jsx(ye,{type:"company",actionType:"lease"})]})})})},De=({show:c,handleClose:s,handleShowAlert:n,leaseData:a})=>{const[p,N]=l.useState(!1),{data:y,post:i}=se({leaseId:a.lease_id}),o=()=>{i(reverseUrl("delete_lease"),{onStart:()=>{N(!0)},onSuccess:x=>{n("Lease terminated successfully"),N(!1)},onError:x=>{g.error("Something went wrong! Please try again"),N(!1)},onFinish:()=>{s()}})};return e.jsx("div",{className:"container-xl p-5",children:e.jsx("div",{className:"card card-raised",children:e.jsx("div",{className:"card-body p-4",children:e.jsxs(V,{show:c,onHide:s,size:"md",backdrop:"static",centered:!0,children:[e.jsx(V.Header,{closeButton:!0,className:"h4 bg-info text-white text-center text-uppercase",children:"Confirm Lease Termination"}),e.jsxs(V.Body,{className:"p-4 d-flex justify-content-between align-items-center gap-4",children:[e.jsx(de,{}),e.jsxs("p",{className:"my-3 text-center",children:["Are you sure you want to terninate lease for ",a.name,"? This action cannot be undone."]})]}),e.jsxs(V.Footer,{className:"p-4 d-flex justify-content-end gap-4",children:[e.jsxs(H,{onClick:s,variant:"secondary",children:[e.jsx("i",{className:"material-icons",children:"cancel"}),"Cancel"]}),e.jsxs(H,{onClick:o,variant:"danger",children:[e.jsx("i",{className:"material-icons",children:"done"}),"Delete"]})]})]})})})})},ea=({show:c,handleClose:s,url:n,setVerified:a,verification_type:p,setCreditInfo:N})=>{const[y,i]=l.useState(!1),[o,x]=l.useState({}),{data:v,setData:_,post:d,reset:O}=se({otp:"",verification_type:p}),[F,L]=l.useState(!1),[t,M]=l.useState(30);l.useEffect(()=>{const w=setInterval(()=>{M(R=>R<=1?(clearInterval(w),L(!0),0):R-1)},1e3);return()=>clearInterval(w)},[]);const r=()=>ee(void 0,null,function*(){L(!1);try{(yield le.get(reverseUrl("new_otp"))).data.status==="success"?g.success("OTP sent successfully"):g.error("Something went wrong! Please try again")}catch(w){g.error("Something went wrong! Please try again")}}),E=w=>_(P(B({},v),{[w.target.id]:w.target.value})),k=()=>v.otp.length!==4?(x({otp:"otp must be four digits"}),!1):parseInt(v.otp,10)?!0:(x({otp:"otp must be a number"}),!1),U=w=>{console.log("indi"),w.preventDefault(),k()&&(d(reverseUrl(n),{onStart:()=>{i(!0)},onSuccess:R=>{s(),O(),g.success("Verification successful"),i(!1),typeof a=="function"&&a(!0)},onError:R=>{g.error("Something went wrong! Please try again"),x(R),console.log(erros),i(!1)}}),i(!1))};return e.jsx(e.Fragment,{children:e.jsx(V,{size:"lg",show:c,onHide:s,centered:!0,children:e.jsx("div",{children:e.jsxs("div",{className:"card card-raised",children:[e.jsx("div",{className:"card-header bg-info px-4",children:e.jsxs("div",{className:`d-flex justify-content-between
                                align-items-center`,children:[e.jsxs("div",{className:"me-4",children:[e.jsx("h2",{className:"display-6 mb-0 text-white",children:"Verify OTP"}),e.jsx("div",{className:"card-text"})]}),e.jsx("div",{className:"d-flex gap-2"})]})}),e.jsx("div",{className:"card-body p-4",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body p-4",style:{borderStyle:"solid",borderColor:"#26a69a"},children:[e.jsx(V.Body,{children:e.jsxs("div",{className:"row mb-4",children:[e.jsxs("div",{className:"col-md-12",children:[e.jsx("div",{children:e.jsx("p",{children:p==="individual"?"Enter the 4-digit code we sent to user's mobile number. This code will expire after 5 minutes":"Enter the 4-digit code we sent to user's email. This code will expire after 5 minutes"})}),e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Verification Code"}),e.jsx("input",{value:v.otp,onChange:E,type:"text",name:"otp",id:"otp",placeholder:"Enter your 4 digit otp",className:"form-control form-control-sm"}),o&&e.jsx("div",{className:"text-danger mt-1",children:o.otp})]})})]}),e.jsxs("div",{className:"mt-5 d-flex gap-4 align-items-center ",children:[e.jsxs("p",{children:["Didn't receive code?",e.jsx("button",{onClick:r,className:"ms-2 text-decoration-underline border-0 bg-transparent text-info",disabled:F===!1,children:"Resend Code"})]}),t>0&&e.jsx("p",{className:"text-success",children:`Resend code in ${t} seconds`})]})]})}),e.jsx(V.Footer,{children:e.jsx(H,{className:"text-white",variant:"info",onClick:w=>U(w),disabled:y,children:y?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-grow spinner-grow-sm"}),e.jsx("span",{className:"ml-2",children:"processing.."})]}):"Verify"})})]})})})]})})})})},aa=({leases:c,total_pages:s,total_items:n,current_page:a})=>{const[p,N]=l.useState(!1),[y,i]=l.useState(!1),[o,x]=l.useState({}),[v,_]=l.useState([]),[d,O]=l.useState({}),[F,L]=l.useState(!1),[t,M]=l.useState(!1),[r,E]=l.useState(0),[k,U]=l.useState(!1),[w,R]=l.useState(!1),[Y,q]=l.useState(""),[G,X]=l.useState(!1),[K,z]=l.useState(!1),[W,b]=l.useState(""),[A,J]=l.useState(""),m=(h,u)=>{z(!0),J(u),b(h)},f=()=>{z(!1),J(""),b("")};l.useEffect(()=>{le.post(reverseUrl("open_subscription")).then(h=>{_(h.data)}).catch(h=>{})},[_]);const C=document.getElementById("hide-footer");l.useEffect(()=>(C!==null&&document.getElementById("footer").classList.add("d-none"),()=>{C!==null&&document.getElementById("footer").classList.remove("d-none")}),[C]);const I=Ye().props.error;return I&&g.error(I),e.jsxs("main",{className:"position-relative",id:"hide-footer",style:{height:"100%"},children:[W&&e.jsxs(je,{onClose:f,show:K,delay:1e4,className:"w-100 shadow-none ",style:{background:"#dcfce7"},autohide:!0,children:[e.jsxs(je.Header,{className:"text-uppercase w-100",children:[e.jsx("strong",{className:"me-auto",children:A?`Following message has been sent to ${A}`:""}),e.jsx("small",{className:"text-muted text-capitalize ms-auto",children:"just now"})]}),e.jsx("p",{className:"p-4",children:W})]}),e.jsx("div",{className:"container-xl",children:e.jsxs("div",{className:"card card-raised mb-5",children:[e.jsx("div",{className:"card-header px-4",style:{height:"50px",backgroundColor:"#32a4a8"},children:e.jsx("div",{className:"d-flex justify-content-center align-items-center",children:e.jsx("div",{className:"",children:e.jsx("h2",{className:"display-6 tf-color",children:"Lease Management"})})})}),e.jsxs("div",{className:"card-body p-4 position-relative ",children:[e.jsx("div",{className:"row mb-2",children:e.jsx("div",{className:"col-md-4",children:e.jsx($e,{searchBy:"name"})})}),e.jsx("div",{className:"",style:{backgroundColor:"#428f38"},children:e.jsx("h5",{className:"text-center tf-color",children:"Active Lease"})}),e.jsx("div",{className:"table-responsive tableFixHead",children:e.jsxs("table",{className:"table-responsive table table-bordered",children:[e.jsx("thead",{className:"bg-white",children:e.jsxs("tr",{style:{borderTop:"0px"},children:[e.jsx("th",{scope:"col",style:{width:"100px"},children:"No."}),e.jsx("th",{scope:"col",style:{},children:"Tenant"}),e.jsx("th",{scope:"col",style:{},children:"Customer Number"}),e.jsx("th",{scope:"col",className:"text-end",children:"Rent Owing"}),e.jsx("th",{scope:"col",colSpan:3,className:"tf-borderRight",children:e.jsx("span",{style:{visibility:"hidden"},children:"Actions to be done"})})]})}),e.jsx("tbody",{children:c==null?void 0:c.map((h,u)=>e.jsxs("tr",{className:"w-100 py-2",children:[e.jsx("th",{scope:"row",children:u+1}),e.jsx("td",{children:h.name}),e.jsx("td",{children:h.mobile_number}),e.jsxs("td",{className:`bg-${h.color} text-white text-end`,style:{backgroundColor:h.color=="light-red"?"#f87171":""},children:[h.currency,ie(h.owing_amount)]}),e.jsx("td",{className:"bg-info text-white text-center tfRow",onClick:()=>{M(!0),x(h)},children:"Receipt"}),e.jsx("td",{className:"bg-primary text-white text-center tfRow",onClick:()=>{i(!0),N(!1),x(h),O({type:h.is_company?"company":"individual"})},children:"Adjust"}),e.jsx("td",{className:"bg-danger text-white text-center tfRow",onClick:()=>{L(!0),x(h)},children:"Terminate"})]},"lease"+u))})]})}),e.jsx(qe,{currentPage:a,totalPages:s}),(d==null?void 0:d.type)==="individual"&&p&&e.jsx(ge,{action:"add",show:p,handleClose:()=>{N(!1),x({})},setShowVerify:U,lesseeDetails:o,subscriptionPeriod:r,handleShowAlert:m}),(d==null?void 0:d.type)==="individual"&&y&&e.jsx(ge,{action:"edit",show:y,handleClose:()=>{i(!1),x({})},handleShowAlert:m,lesseeDetails:o,subscriptionPeriod:o.lease_period}),(d==null?void 0:d.type)==="company"&&p&&e.jsx(be,{action:"add",show:p,handleClose:()=>{N(!1),x({})},lesseeDetails:o,subscriptionPeriod:r,handleShowAlert:m}),(d==null?void 0:d.type)==="company"&&y&&e.jsx(be,{action:"edit",show:y,handleClose:()=>{i(!1),x({})},handleShowAlert:m,lesseeDetails:o,subscriptionPeriod:o.lease_period}),F&&e.jsx(De,{show:F,handleClose:()=>{L(!1),x({})},handleShowAlert:m,leaseData:o}),t&&e.jsx(ce,{show:t,handleClose:h=>ee(void 0,null,function*(){b(h),M(!1),z(!0),x({})}),leaseDetails:o,myKey:"leases"}),k&&e.jsx(ea,{show:k,handleClose:()=>{U(!1)},url:"client-individual-verify-otp",setVerified:R,verification_type:Y})]})]})}),e.jsx("div",{className:"w-100 ",style:{backgroundColor:"#e3d329",position:"fixed",bottom:"0",right:"0",width:"100%"},children:e.jsx(He,{isVisible:G,setIsVisible:X,trigger:e.jsxs("div",{style:{backgroundColor:"#e3d329"},className:"position-relative tf-color",children:[e.jsx("h5",{className:"text-center tf-color py-2",children:"Open Subscriptions"}),e.jsx("i",{className:"icon material-icons position-absolute top-50 translate-middle",style:{right:"35%",fontSize:"50px",transform:"translateY(-50%)"},children:"keyboard_arrow_up"})]}),children:e.jsx(Ve,{title:"Open Subscriptions",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-bordered",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderTop:"0px"},children:[e.jsx("th",{scope:"col",style:{borderTop:"1px solid #e0e0e0"},children:"No."}),e.jsx("th",{scope:"col",style:{borderTop:"1px solid #e0e0e0"},children:"Type"}),e.jsx("th",{scope:"col",style:{borderTop:"1px solid #e0e0e0"},children:"Open Slots"}),e.jsx("th",{scope:"col",style:{borderTop:"1px solid #e0e0e0"},children:"Period (months)"}),e.jsx("th",{scope:"col",style:{borderTop:"1px solid #e0e0e0"},children:"Start Date"}),e.jsx("th",{scope:"col",style:{borderTop:"1px solid #e0e0e0"},children:"End Date"}),e.jsx("th",{scope:"col",colSpan:"2",className:"tf-borderRight"})]})}),e.jsx("tbody",{children:v==null?void 0:v.map((h,u)=>e.jsx(_e.Fragment,{children:h.open_slots>0&&e.jsxs("tr",{children:[e.jsx("th",{scope:"row",children:u+1}),e.jsx("td",{children:h.subscription_class}),e.jsx("td",{children:h.open_slots}),e.jsx("td",{children:h.period_length}),e.jsx("td",{children:h.start_date}),e.jsx("td",{children:h.end_date}),e.jsx("td",{colSpan:"2",className:`${h.open_slots===0?"bg-gray":"bg-success"} text-white text-center tfRow`,onClick:()=>{h.open_slots!==0&&(N(!0),i(!1),X(!1),x({}),O({type:h.subscription_class}),q(h.subscription_class),E(h.period_length))},children:"Activate"})]},"subscription"+u)},u))})]})})})})})]})};aa.layout=c=>e.jsx(Oe,{children:c,title:"Leases"});export{aa as default};
