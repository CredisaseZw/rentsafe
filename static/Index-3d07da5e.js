var ke=Object.defineProperty,Oe=Object.defineProperties;var Me=Object.getOwnPropertyDescriptors;var re=Object.getOwnPropertySymbols;var fe=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable;var Ne=Math.pow,be=(d,o,t)=>o in d?ke(d,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):d[o]=t,E=(d,o)=>{for(var t in o||(o={}))fe.call(o,t)&&be(d,t,o[t]);if(re)for(var t of re(o))ge.call(o,t)&&be(d,t,o[t]);return d},I=(d,o)=>Oe(d,Me(o));var se=(d,o)=>{var t={};for(var i in d)fe.call(d,i)&&o.indexOf(i)<0&&(t[i]=d[i]);if(d!=null&&re)for(var i of re(d))o.indexOf(i)<0&&ge.call(d,i)&&(t[i]=d[i]);return t};var ne=(d,o,t)=>new Promise((i,p)=>{var x=n=>{try{h(t.next(n))}catch(l){p(l)}},m=n=>{try{h(t.throw(n))}catch(l){p(l)}},h=n=>n.done?i(n.value):Promise.resolve(n.value).then(x,m);h((t=t.apply(d,o)).next())});import{r as u,j as e,a as le,b as Z,u as we,d as Ae,R as Le}from"./main-773842c3.js";import{b as Ye,d as Re,F as Fe,u as me,a as Ve,c as he,C as Ge,M as q}from"./Modal-fc586ea6.js";import{E as $e,e as Ue}from"./removeClass-3d960475.js";import{a as oe,R as ue,L as He}from"./Layout-7e87a7d6.js";import{h as U}from"./moment-686b5dfa.js";import{_ as T,I as xe}from"./index-dffc6c30.js";import{f as pe}from"./formatting-345d2430.js";import{M as _e}from"./MultipleUpload-022234c2.js";import{S as qe}from"./search-ea531b73.js";import{B as de}from"./Button-332a7bb4.js";import{B as ze,D as Je}from"./DrawerContent-997e2305.js";import{S as We,P as Ze}from"./PaginationControls-8975778e.js";import{l as ee}from"./lodash-52129a8b.js";import{b as ce,f as Se}from"./index-fe327e9d.js";import{A as ae}from"./index-644a7572.js";import"./index-8bd7aac5.js";import"./assertThisInitialized-3be3daa4.js";import"./Button-d3573c47.js";const ie=Ne(2,31)-1;function Te(d,o,t){const i=t-Date.now();d.current=i<=ie?setTimeout(o,i):setTimeout(()=>Te(d,o,t),ie)}function Xe(){const d=Ye(),o=u.useRef();return Re(()=>clearTimeout(o.current)),u.useMemo(()=>{const t=()=>clearTimeout(o.current);function i(p,x=0){d()&&(t(),x<=ie?o.current=setTimeout(p,x):Te(o,p,Date.now()+x))}return{set:i,clear:t,handleRef:o}},[])}const Ke={[$e]:"showing",[Ue]:"showing show"},Ce=u.forwardRef((d,o)=>e.jsx(Fe,I(E({},d),{ref:o,transitionClasses:Ke})));Ce.displayName="ToastFade";const Qe=Ce,De=u.createContext({onClose(){}}),Pe=De,Be=u.forwardRef((n,h)=>{var l=n,{bsPrefix:d,closeLabel:o="Close",closeVariant:t,closeButton:i=!0,className:p,children:x}=l,m=se(l,["bsPrefix","closeLabel","closeVariant","closeButton","className","children"]);d=me(d,"toast-header");const c=u.useContext(Pe),S=Ve(N=>{c==null||c.onClose==null||c.onClose(N)});return e.jsxs("div",I(E({ref:h},m),{className:he(d,p),children:[x,i&&e.jsx(Ge,{"aria-label":o,variant:t,onClick:S,"data-dismiss":"toast"})]}))});Be.displayName="ToastHeader";const et=Be,Ee=u.forwardRef((x,p)=>{var m=x,{className:d,bsPrefix:o,as:t="div"}=m,i=se(m,["className","bsPrefix","as"]);return o=me(o,"toast-body"),e.jsx(t,E({ref:p,className:he(d,o)},i))});Ee.displayName="ToastBody";const tt=Ee,Ie=u.forwardRef((F,v)=>{var R=F,{bsPrefix:d,className:o,transition:t=Qe,show:i=!0,animation:p=!0,delay:x=5e3,autohide:m=!1,onClose:h,onEntered:n,onExit:l,onExiting:c,onEnter:S,onEntering:N,onExited:a,bg:r}=R,s=se(R,["bsPrefix","className","transition","show","animation","delay","autohide","onClose","onEntered","onExit","onExiting","onEnter","onEntering","onExited","bg"]);d=me(d,"toast");const k=u.useRef(x),L=u.useRef(h);u.useEffect(()=>{k.current=x,L.current=h},[x,h]);const Y=Xe(),P=!!(m&&i),B=u.useCallback(()=>{P&&(L.current==null||L.current())},[P]);u.useEffect(()=>{Y.set(B,k.current)},[Y,B]);const _=u.useMemo(()=>({onClose:h}),[h]),V=!!(t&&p),z=e.jsx("div",I(E({},s),{ref:v,className:he(d,o,r&&`bg-${r}`,!V&&(i?"show":"hide")),role:"alert","aria-live":"assertive","aria-atomic":"true"}));return e.jsx(Pe.Provider,{value:_,children:V&&t?e.jsx(t,{in:i,onEnter:S,onEntering:N,onEntered:n,onExit:l,onExiting:c,onExited:a,unmountOnExit:!0,children:z}):z})});Ie.displayName="Toast";const je=Object.assign(Ie,{Body:tt,Header:et});function D({title:d,children:o,noBoundary:t,noOuterStyles:i}){const p=i?"":t?"bg-white mb-3":"bg-white rounded-2 border overflow-hidden border-dark shadow-sm mb-3";return e.jsxs("div",{className:p,children:[e.jsx("div",{className:"rounded-top-2 custom-bg-grey text-white text-center p-1",children:ee.capitalize(d)}),o]})}function at(d,o){const[t,i]=u.useState(d);return u.useEffect(()=>{const p=setTimeout(()=>{i(d)},o);return()=>{clearTimeout(p)}},[d,o]),t}function nt(d,o,t,i,p){const[x,m]=u.useState(!1),[h,n]=u.useState(""),[l,c]=u.useState(!1),[S,N]=u.useState({}),[a,r]=u.useState("single"),{data:s,setData:v,post:F,reset:R}=le({identificationNumber:(t==null?void 0:t.reg_ID_Number)||"",lesseeName:(t==null?void 0:t.name)||"",lesseeAddress:(t==null?void 0:t.address)||"",rentGuarantorId:(t==null?void 0:t.rent_guarantor_id)||"",rentGuarantorIdType:(t==null?void 0:t.rent_guarantor_id_type)||"",rentGuarantorName:(t==null?void 0:t.rent_guarantor_name)||"",lesseePhone:(t==null?void 0:t.mobile)||"",leaseDetails:(t==null?void 0:t.lease_details)||"",leaseStartDate:(t==null?void 0:t.start_date)||"",leaseEndDate:(t==null?void 0:t.end_date)||"",leaseCurrency:(t==null?void 0:t.currency)||"USD",depositAmount:(t==null?void 0:t.deposit_amount)||0,leasePeriod:i||(t==null?void 0:t.lease_period),rentVariable:(t==null?void 0:t.rent_variable)||!1,depositPeriod:(t==null?void 0:t.deposit_period)||0,monthlyRental:(t==null?void 0:t.monthly_rentals)||0,paymentPeriodStart:(t==null?void 0:t.payment_period_start)||"25",paymentPeriodEnd:(t==null?void 0:t.payment_period_end)||"7",isCompany:!1,leaseId:(t==null?void 0:t.lease_id)||-1,monthOneBalance:"",monthTwoBalance:"",monthThreeBalance:"",moreThanThreeMonthsBalance:"",currentBalance:"",landlordType:t!=null&&t.agent_reg_number?"COMPANY":"INDIVIDUAL",regIdNumber:(t==null?void 0:t.agent_reg_number)||(t==null?void 0:t.agent_id),landlordName:(t==null?void 0:t.agent_name)||"",commission:Number(t!=null&&t.commission_amount&&(t==null?void 0:t.commission_amount)!=="N/A"?t==null?void 0:t.commission_amount:0),openingBalance:Number(t!=null&&t.agent_opening_balance&&(t==null?void 0:t.agent_opening_balance)!=="N/A"?t==null?void 0:t.agent_opening_balance:0)}),k=U(),L=k.clone().add(s.paymentPeriodEnd>=k.date()?0:1,"months").date(s.paymentPeriodEnd).format("DD-MMM-YY"),Y=k.clone().subtract(s.paymentPeriodEnd>=k.date()?1:0,"months").date(s.paymentPeriodEnd).format("DD-MMM-YY"),P=k.clone().subtract(s.paymentPeriodEnd>=k.date()?2:1,"months").date(s.paymentPeriodEnd).format("DD-MMM-YY"),B=k.clone().subtract(s.paymentPeriodEnd>=k.date()?3:2,"months").date(s.paymentPeriodEnd).format("DD-MMM-YY"),_=at(s.identificationNumber,500),V=u.useCallback(()=>{if(_&&_.length>=5)try{m(!0),Z.post(reverseUrl("get-user"),{identificationNumber:s.identificationNumber}).then(f=>{var g,O,G,$,H,K,j,y;(g=f.data)!=null&&g.props.name?(v(I(E({},s),{lesseeName:((O=f.data)==null?void 0:O.props.name)||"",lesseeAddress:((G=f.data)==null?void 0:G.props.address)||"",lesseePhone:(($=f.data)==null?void 0:$.props.phone)||""})),N((K=(H=f.data)==null?void 0:H.props)==null?void 0:K.openingBalances)):((s.identificationNumber.length===6||s.identificationNumber.length>7)&&T.error("User not found!",{duration:4e3,id:"error-toast",icon:"❌"}),n((y=(j=f.data)==null?void 0:j.props)==null?void 0:y.errors)),m(!1)}).catch(f=>{T.error("Something went wrong! Please try again"),n(f)}).finally(()=>{m(!1)})}catch(f){T.error("Something went wrong! Please try again"),n(f)}},[_]);u.useEffect(()=>{o==="add"&&V()},[o,V]),u.useEffect(()=>{o==="add"&&(()=>{if(s.rentGuarantorId&&/^[\d]{8,9}[A-Za-z]{1}[\d]{2}$/.test(s.rentGuarantorId))try{m(!0),Z.post(reverseUrl("get-user"),{identificationNumber:s.rentGuarantorId}).then(g=>{var O,G,$,H,K;(O=g.data)!=null&&O.props.name?v(I(E({},s),{rentGuarantorName:((G=g.data)==null?void 0:G.props.name)||"",rentGuarantorIdType:(($=g.data)==null?void 0:$.props.identification_type)||""})):(T.error("User not found!",{duration:4e3,icon:"❌"}),n((K=(H=g.data)==null?void 0:H.props)==null?void 0:K.errors)),m(!1)}).catch(g=>{T.error("Something went wrong! Please try again"),n(g)}).finally(()=>{m(!1)})}catch(g){T.error("Something went wrong! Please try again"),n(g)}})()},[s.rentGuarantorId]);function z(f){v(g=>I(E({},g),{rentGuarantorId:f.label.split(" - ")[1]}))}const J=f=>{f.target.id==="rentVariable"?v(I(E({},s),{[f.target.id]:f.target.checked})):f.target.id==="leasePeriod"?Number(f.target.value)>Number(i)?(T.error(`Lease period cannot be more than your subscription period (${i} months)`),v(I(E({},s),{[f.target.id]:i}))):v(I(E({},s),{[f.target.id]:f.target.value})):v(I(E({},s),{[f.target.id]:f.target.value}))},Q=f=>ne(this,null,function*(){if(f.preventDefault(),s.lesseeName===""){T.error("Please enter a valid lessee");return}s.leaseEndDate=U(s.leaseEndDate).format("YYYY-MM-DD"),s.leaseStartDate=U(s.leaseStartDate).format("YYYY-MM-DD"),s.monthOneBalance=Number(s.monthOneBalance),s.monthTwoBalance=Number(s.monthTwoBalance),s.monthThreeBalance=Number(s.monthThreeBalance),s.moreThanThreeMonthsBalance=Number(s.moreThanThreeMonthsBalance),s.currentBalance=Number(s.currentBalance),s.monthOneDate=U(Y).format("YYYY-MM-DD"),s.monthTwoDate=U(P).format("YYYY-MM-DD"),s.monthThreeDate=U(B).format("YYYY-MM-DD"),s.currentDate=U(L).format("YYYY-MM-DD"),s.monthlyRental=Number(s.monthlyRental),s.depositAmount=s.depositAmount,s.depositPeriod=Number(s.depositPeriod),s.leasePeriod=Number(s.leasePeriod),s.outStandingBalance=s.moreThanThreeMonthsBalance+s.monthThreeBalance+s.monthTwoBalance+s.monthOneBalance+s.currentBalance,F(reverseUrl("create-individual-lease"),{onStart:()=>{m(!0)},onSuccess:g=>{var G,$,H;const O=(G=g==null?void 0:g.props)==null?void 0:G.flash.message;O&&(($=g==null?void 0:g.props)==null?void 0:$.flash.type)==="success"?(d(),p(O,s.lesseeName)):O&&((H=g==null?void 0:g.props)==null?void 0:H.flash.type)==="error"&&T.error(O.message),R(),m(!1)},onError:g=>{T.error(JSON.stringify(g)),n(g),m(!1)}})}),A=f=>{f.preventDefault(),s.leaseStartDate=U(s.leaseStartDate).format("YYYY-MM-DD"),s.leaseEndDate=U(s.leaseEndDate).format("YYYY-MM-DD"),F(reverseUrl("client-edit-lease"),{onStart:()=>{console.log(s),m(!0)},onSuccess:g=>{var O,G;((O=g==null?void 0:g.props)==null?void 0:O.flash.type)==="success"?(d(),p("Lease updated successfully")):((G=g==null?void 0:g.props)==null?void 0:G.flash.type)==="error"&&T.error("An error occurred, please try again later"),m(!1)},onError:g=>{T.error(JSON.stringify(g)),n(g),m(!1)}})};function X(f){if(f.preventDefault,o==="add")Q(f);else if(o==="edit")A(f);else throw new Error("Invalid action: "+o)}return{isSingleTab:a==="single",toggleTab:()=>{r(f=>f==="single"?"multiple":"single")},handleAddLease:Q,handleUpdateLease:A,changeHandler:J,errors:h,monthThree:B,monthTwo:P,monthOne:Y,currentDate:L,data:s,isLoading:x,showReceipt:l,viewReceipt:()=>c(!0),closeReceipt:()=>c(!1),handleSubmit:X,changeRentGuarantorId:z,changeLandlordType:f=>v(g=>I(E({},g),{landlordType:f,regIdNumber:"",landlordName:""})),changeLandlord:f=>v(g=>I(E({},g),{landlordName:f.label.split(" - ")[0],regIdNumber:f.label.split(" - ")[1],landlordName:f.label.split(" - ")[0]}))}}function ye({show:d,handleClose:o,action:t,lesseeDetails:i,subscriptionPeriod:p,handleShowAlert:x}){const{isSingleTab:m,toggleTab:h,changeHandler:n,errors:l,monthThree:c,monthTwo:S,monthOne:N,currentDate:a,data:r,isLoading:s,showReceipt:v,viewReceipt:F,closeReceipt:R,handleSubmit:k,changeLandlordType:L,changeLandlord:Y,changeRentGuarantorId:P}=nt(o,t,i,p,x);return e.jsxs(q,{size:"lg",show:d,onHide:o,centered:!0,children:[e.jsxs(q.Header,{closeButton:!0,className:"card-header bg-transparent ps-0",children:[e.jsx("button",{className:`btn btn-sm ${m?"btn-info text-white":"btn-light"}`,onClick:h,children:"Single"}),e.jsx("button",{className:`btn btn-sm ${m?"btn-light":"btn-info text-white"}`,onClick:h,children:"Multiple"})]}),e.jsx(q.Body,{className:"p-0",children:m?e.jsxs("div",{className:"card card-raised",children:[e.jsx("div",{className:"card-header bg-info",children:e.jsx("h2",{className:"display-6 mb-0 text-white",children:t==="view"?"View Lease - Individual":t==="edit"?"Edit Lease - Individual":"Add Lease - Individual"})}),e.jsxs("div",{className:"card-body p-4",children:[e.jsx("h6",{className:"bg-info p-1 display-6 m-0 text-center text-white",children:"Lease details"}),e.jsxs("form",{className:"p-5 border border-2 border-info",onSubmit:k,children:[e.jsxs("div",{className:"row mb-4",children:[e.jsx(xe,{}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"National ID:"}),e.jsx("input",{value:r.identificationNumber,onChange:n,type:"text",required:!0,name:"identificationNumber",id:"identificationNumber",className:"form-control form-control-sm"}),l&&e.jsx("div",{className:"text-danger mt-1",children:l.identificationNumber})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Lessee Name:"}),e.jsx("input",{value:r.lesseeName,onChange:n,type:"text",name:"lesseeName",required:!0,id:"lesseeName",className:"form-control form-control-sm",readOnly:!0}),l&&e.jsx("div",{className:"text-danger mt-1",children:l.lesseeName})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Lessee Mobile Number"}),e.jsx("input",{value:r.lesseePhone,onChange:n,type:"text",name:"lesseePhone",id:"lesseePhone",required:!0,className:"form-control form-control-sm",readOnly:t==="view"}),l&&e.jsx("div",{className:"text-danger mt-1",children:l.lesseePhone})]})]})]}),e.jsxs("div",{className:"row mb-4",children:[e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Lease Address:"}),e.jsx("textarea",{value:r.lesseeAddress,onChange:n,type:"text",required:!!r.lesseeName,name:"lesseeAddress",id:"lesseeAddress",className:"form-control form-control-sm",readOnly:t==="view"}),l&&e.jsx("div",{className:"text-danger mt-1",children:l.lesseeAddress})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Rent Guarantor ID:"}),e.jsx(oe,{onChange:B=>P(B),extraProps:{required:!1,className:"w-100",name:"rentGuarantorId",id:"rentGuarantorId",placeholder:r.rentGuarantorId||void 0},isDisabled:t==="view",defaultValue:t==="view"?r.rentGuarantorId:"",useAlternateFetchOptions:{type:"individual"}}),l&&e.jsx("div",{className:"text-danger mt-1",children:l.rentGuarantorId})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Rent Guarantor Name:"}),e.jsx("input",{value:r.rentGuarantorName,onChange:n,type:"text",name:"rentGuarantorName",id:"rentGuarantorName",className:"form-control form-control-sm",readOnly:!0}),l&&e.jsx("div",{className:"text-danger mt-1",children:l.rentGuarantorName})]})]}),e.jsxs("div",{className:"row mb-4",children:[e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Lease Details:"}),e.jsx("textarea",{value:r.leaseDetails,onChange:n,name:"leaseDetails",id:"leaseDetails",className:"form-control form-control-sm",readOnly:t==="view"}),l&&e.jsx("div",{className:"text-danger mt-1",children:l.leaseDetails})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Lease Currency"}),e.jsxs("select",{value:r.leaseCurrency,onChange:n,id:"leaseCurrency",name:"leaseCurrency",className:"form-select form-select-sm",readOnly:t==="view",children:[e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"ZWG",children:"ZWG"})]}),l&&e.jsx("div",{className:"text-danger mt-1",children:l.leaseCurrency})]})]}),e.jsxs("div",{className:"row mb-4",children:[e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Monthly Rental:"}),e.jsx("input",{value:r.monthlyRental===0?"":r.monthlyRental,placeholder:"enter monthly rental",onChange:n,type:"text",required:!!r.lesseeName,id:"monthlyRental",name:"monthlyRental",className:"form-control form-control-sm",readOnly:t==="view"}),l&&e.jsx("div",{className:"text-danger mt-1",children:l.monthlyRental})]}),e.jsxs("div",{className:"mt-1 col-lg-4 d-flex flex-column",children:[e.jsx("label",{className:"form-label",children:"Variable Rent:"}),e.jsx("input",{checked:r.rentVariable,onChange:n,type:"checkbox",id:"rentVariable",name:"rentVariable",className:"form-check-input border-1 p-2 border-black"}),l&&e.jsx("div",{className:"text-danger mt-1",children:l.rentVariable})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Deposit Period(Months):"}),e.jsx("input",{value:r.depositPeriod===0?"":r.depositPeriod,placeholder:"enter deposit period",onChange:n,type:"text",id:"depositPeriod",name:"depositPeriod",className:"form-control form-control-sm",readOnly:t==="view"}),l&&e.jsx("div",{className:"text-danger mt-1",children:l.depositPeriod})]})]}),e.jsxs("div",{className:"row mb-4",children:[e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Deposit Amount:"}),e.jsx("input",{value:r.depositAmount===0?"":r.depositAmount,placeholder:"enter deposit amount",onChange:n,type:"text",name:"depositAmount",id:"depositAmount",className:"form-control form-control-sm",readOnly:t==="view"}),l&&e.jsx("div",{className:"text-danger mt-1",children:l.depositAmount})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Subscription period left (months):"}),e.jsx("input",{value:r.leasePeriod,onChange:n,type:"number",id:"leasePeriod",name:"leasePeriod",className:"form-control form-control-sm"}),l&&e.jsx("div",{className:"text-danger mt-1",children:l.leasePeriod})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Lease Start Date:"}),e.jsx("input",{value:r.leaseStartDate,onChange:n,type:"date",required:!!r.lesseeName,name:"leaseStartDate",id:"leaseStartDate",className:"form-control form-control-sm",readOnly:t==="view"}),l&&e.jsx("div",{className:"text-danger mt-1",children:l.leaseStartDate})]})]}),e.jsxs("div",{className:"row mb-4",children:[e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Lease End Date:"}),e.jsx("input",{value:r.leaseEndDate,onChange:n,type:"date",name:"leaseEndDate",id:"leaseEndDate",className:"form-control form-control-sm",readOnly:t==="view"}),l&&e.jsx("div",{className:"text-danger mt-1",children:l.leaseEndDate})]}),e.jsxs("div",{className:"col-lg-4 mt-1",children:[e.jsx("label",{className:"form-label",children:"Payment Period Start Date:"}),e.jsx("input",{value:r.paymentPeriodStart,type:"number",id:"paymentPeriodStart",name:"paymentPeriodStart",className:"form-control form-control-sm",readOnly:!0,disabled:!0}),l&&e.jsx("div",{className:"text-danger mt-1",children:l.paymentPeriodStart})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Payment Period End Date:"}),e.jsx("input",{value:r.paymentPeriodEnd,onChange:n,type:"number",min:"1",max:"31",required:!!r.lesseeName,name:"paymentPeriodEnd",id:"paymentPeriodEnd",className:"form-control form-control-sm",readOnly:t==="view"}),l&&e.jsx("div",{className:"text-danger mt-1",children:l.paymentPeriodEnd})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-center p-2 fw-bolder h6 custom-bg-grey",children:"Estate Agents Section"}),e.jsxs("div",{className:"row align-items-center",children:[e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Landlord Type:"}),e.jsxs("select",{className:"form-select form-select-md",name:"landlordType",id:"landlordType",value:r.landlordType,disabled:t==="view"||t==="edit",onChange:B=>L(B.target.value),children:[e.jsx("option",{value:"INDIVIDUAL",children:"Individual"}),e.jsx("option",{value:"COMPANY",children:"Company"})]}),l&&e.jsx("div",{className:"text-danger mt-1",children:l.landlordType})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsxs("label",{htmlFor:"regIdNumber",className:"form-label",children:[r.landlordType==="COMPANY"?"Reg Number":"ID"," (or Name)",":"]}),e.jsx(oe,{onChange:B=>Y(B),extraProps:{required:!1,id:"regIdNumber",className:"w-100",name:"regIdNumber",placeholder:(r.regIdNumber||r.landlordName)&&(r.regIdNumber||" - "+r.landlordName)||""},defaultValue:r.regIdNumber?r.regIdNumber:"",isDisabled:t==="view"||t==="edit"||r.landlordType==="",useAlternateFetchOptions:{type:r.landlordType.toLowerCase()}},r.landlordType),l&&e.jsx("div",{className:"text-danger mt-1",children:l.idRegOrName})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{htmlFor:"landlordName",className:"form-label",children:"Landlord Name"}),e.jsx("input",{value:r.landlordName,name:"landlordName",id:"landlordName",className:"form-control form-control-md custom-no-pointer-events border border-2",readOnly:!0}),l&&e.jsx("div",{className:"text-danger mt-1",children:l.landlordName})]}),e.jsxs("div",{className:"mt-2 col-lg-4",children:[e.jsx("label",{htmlFor:"commission",className:"form-label",children:"Commission %"}),e.jsx("input",{value:r.commission,onChange:n,type:"number",min:0,max:100,name:"commission",id:"commission",className:"form-control form-control-sm",disabled:t==="view"||t==="edit"}),l&&e.jsx("div",{className:"text-danger mt-1",children:l.commission})]}),e.jsxs("div",{className:"mt-2 col-lg-4",children:[e.jsx("label",{htmlFor:"openingBalance",className:"form-label",children:"Landlord Opening Balance"}),e.jsx("input",{value:r.openingBalance,onChange:n,type:"number",min:0,name:"openingBalance",id:"openingBalance",className:"form-control form-control-sm",disabled:t==="view"||t==="edit"}),l&&e.jsx("div",{className:"text-danger mt-1",children:l.openingBalance})]})]})]}),t==="add"&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-center p-2 fw-bolder h6 custom-bg-grey",children:"Tenant Opening Rent Balances"}),e.jsx("table",{className:"table table-responsive table-bordered",children:e.jsxs("tbody",{children:[e.jsxs("tr",{style:{lineHeight:"5px",fontSize:"12px"},children:[e.jsx("th",{scope:"row",className:"fw-bold",style:{lineHeight:"15px"},children:"Payment Date"}),e.jsx("td",{className:"",style:{lineHeight:"15px"},children:"More than 3 months"}),e.jsx("td",{className:"",style:{lineHeight:"15px"},children:c}),e.jsx("td",{className:"",style:{lineHeight:"15px"},children:S}),e.jsx("td",{className:"",style:{lineHeight:"15px"},children:N}),e.jsx("td",{className:"",style:{lineHeight:"15px"},children:a}),e.jsx("td",{className:"fw-bold",style:{lineHeight:"15px"},children:"Outstanding Balance"})]}),e.jsxs("tr",{style:{lineHeight:"5px",fontSize:"12px"},children:[e.jsx("th",{scope:"row",className:"fw-bold",children:"Amount"}),e.jsx("td",{className:"bg-black text-white",children:e.jsx("input",{className:"form-control form-control-sm",type:"text",id:"moreThanThreeMonthsBalance",name:"moreThanThreeMonthsBalance",onChange:n,value:r.moreThanThreeMonthsBalance})}),e.jsx("td",{className:"text-white bg-danger",children:e.jsx("input",{className:"form-control form-control-sm",type:"text",id:"monthThreeBalance",name:"monthThreeBalance",onChange:n,value:r.monthThreeBalance})}),e.jsx("td",{className:"text-white custom-bg-pink",children:e.jsx("input",{className:"form-control form-control-sm",type:"text",id:"monthTwoBalance",name:"monthTwoBalance",onChange:n,value:r.monthTwoBalance})}),e.jsx("td",{className:"text-white bg-warning",children:e.jsx("input",{className:"form-control form-control-sm",type:"text",id:"monthOneBalance",name:"monthOneBalance",onChange:n,value:r.monthOneBalance})}),e.jsx("td",{className:"text-white bg-success",children:e.jsx("input",{className:"form-control form-control-sm",type:"text",id:"currentBalance",name:"currentBalance",onChange:n,value:r.currentBalance})}),e.jsx("td",{className:`text-white d-flex align-items-center justify-content-center py-4 my-auto ${Number(r.moreThanThreeMonthsBalance)>0?"bg-black":Number(r.monthThreeBalance)>0?"bg-danger":Number(r.monthTwoBalance)>0?"custom-bg-pink":Number(r.monthOneBalance)>0?"bg-warning":"bg-success"}`,style:{backgroundColor:Number(r.monthTwoBalance)>0?"#f87171":""},children:pe(Number(r.moreThanThreeMonthsBalance)+Number(r.monthThreeBalance)+Number(r.monthTwoBalance)+Number(r.monthOneBalance)+Number(r.currentBalance)||0)})]})]})})]}),e.jsx("div",{className:"d-flex justify-content-end align-items-center gap-3",children:t==="view"?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-info text-white",onClick:F,children:"Receipt"}),e.jsx("button",{className:"btn btn-success",onClick:o,children:"Edit"}),e.jsx("button",{className:"btn btn-danger",onClick:o,children:"Terminate"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-secondary",onClick:o,children:"Cancel"}),e.jsx("button",{className:"btn btn-info text-white",type:"submit",disabled:s,children:s?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-grow spinner-grow-sm"}),e.jsx("span",{className:"d-inline-block ml-2",children:"processing.."})]}):"Submit"})]})})]}),e.jsx(ue,{show:v,handleClose:R})]})]}):e.jsx(_e,{type:"individual",actionType:"lease"})})]})}function rt(d,o,t,i,p){const[x,m]=u.useState(!1),[h,n]=u.useState("single"),[l,c]=u.useState(""),[S,N]=u.useState(!1),{data:a,setData:r,post:s,reset:v}=le({identificationNumber:(t==null?void 0:t.reg_ID_Number)||"",lesseeName:(t==null?void 0:t.name)||"",lesseeAddress:(t==null?void 0:t.address)||"",mobile:(t==null?void 0:t.mobile)||"",email:(t==null?void 0:t.email)||"",rentGuarantorId:(t==null?void 0:t.rent_guarantor_id)||"",rentGuarantorIdType:(t==null?void 0:t.rent_guarantor_id_type)||"",rentGuarantorName:(t==null?void 0:t.rent_guarantor_name)||"",leaseDetails:(t==null?void 0:t.lease_details)||"",leaseStartDate:(t==null?void 0:t.start_date)||"",rentVariable:(t==null?void 0:t.rent_variable)||!1,leaseEndDate:(t==null?void 0:t.end_date)||"",leaseCurrency:(t==null?void 0:t.currency)||"USD",depositAmount:(t==null?void 0:t.deposit_amount)||0,leasePeriod:i||(t==null?void 0:t.lease_period),depositPeriod:(t==null?void 0:t.deposit_period)||0,monthlyRental:(t==null?void 0:t.monthly_rentals)||0,paymentPeriodStart:(t==null?void 0:t.payment_period_start)||"25",paymentPeriodEnd:(t==null?void 0:t.payment_period_end)||"7",isCompany:!0,leaseId:(t==null?void 0:t.lease_id)||-1,monthOneBalance:"",monthTwoBalance:"",monthThreeBalance:"",moreThanThreeMonthsBalance:"",currentBalance:"",isGovernment:!1,accountNumber:t.customer_number||"",landlordType:t!=null&&t.agent_reg_number?"COMPANY":"INDIVIDUAL",regIdNumber:(t==null?void 0:t.agent_reg_number)||(t==null?void 0:t.agent_id),landlordName:(t==null?void 0:t.agent_name)||"",commission:Number(t!=null&&t.commission_amount&&(t==null?void 0:t.commission_amount)!=="N/A"?t==null?void 0:t.commission_amount:0),openingBalance:Number(t!=null&&t.agent_opening_balance&&(t==null?void 0:t.agent_opening_balance)!=="N/A"?t==null?void 0:t.agent_opening_balance:0)}),[F,R]=u.useState(o==="edit"?a.lesseeName:""),[k,L]=u.useState(a.lesseeName),[Y,P]=u.useState(a.email),[B,_]=u.useState(a.identificationNumber),[V,z]=u.useState(a.mobile),[J,Q]=u.useState(a.lesseeAddress),A=U(),X=A.clone().add(a.paymentPeriodEnd>=A.date()?0:1,"months").date(a.paymentPeriodEnd).format("DD-MMM-YY"),f=A.clone().subtract(a.paymentPeriodEnd>=A.date()?1:0,"months").date(a.paymentPeriodEnd).format("DD-MMM-YY"),g=A.clone().subtract(a.paymentPeriodEnd>=A.date()?2:1,"months").date(a.paymentPeriodEnd).format("DD-MMM-YY"),O=A.clone().subtract(a.paymentPeriodEnd>=A.date()?3:2,"months").date(a.paymentPeriodEnd).format("DD-MMM-YY");u.useEffect(()=>{r(I(E({},a),{lesseeName:k,email:Y,identificationNumber:String(B),mobile:V,lesseeAddress:J}))},[B,k,Y,V,J]),u.useEffect(()=>{o==="add"&&(()=>{if(a.rentGuarantorId&&/^[\d]{8,9}[A-Za-z]{1}[\d]{2}$/.test(a.rentGuarantorId))try{m(!0),Z.post(reverseUrl("get-user"),{identificationNumber:a.rentGuarantorId}).then(b=>{var w,M,C,W,te;(w=b.data)!=null&&w.props.name?r(I(E({},a),{rentGuarantorName:((M=b.data)==null?void 0:M.props.name)||"",rentGuarantorIdType:((C=b.data)==null?void 0:C.props.identification_type)||""})):(T.error("User not found!",{duration:4e3,icon:"❌"}),c((te=(W=b.data)==null?void 0:W.props)==null?void 0:te.errors)),m(!1)}).catch(b=>{T.error("Something went wrong! Please try again"),c(b)}).finally(()=>{m(!1)})}catch(b){T.error("Something went wrong! Please try again"),c(b)}})()},[a.rentGuarantorId]);const G=y=>{y.target.id==="rentVariable"?r(I(E({},a),{[y.target.id]:y.target.checked})):y.target.id==="leasePeriod"?Number(y.target.value)>Number(i)?(T.error(`Lease period cannot be more than your subscription period (${i} months)`),r(I(E({},a),{[y.target.id]:i}))):r(I(E({},a),{[y.target.id]:y.target.value})):r(I(E({},a),{[y.target.id]:y.target.value}))},$=y=>ne(this,null,function*(){if(y.preventDefault(),!a.lesseeName){T.error("Please add a valid lessee");return}m(!0),a.leaseEndDate=U(a.leaseEndDate).format("YYYY-MM-DD"),a.monthOneBalance=Number(a.monthOneBalance),a.monthTwoBalance=Number(a.monthTwoBalance),a.monthThreeBalance=Number(a.monthThreeBalance),a.moreThanThreeMonthsBalance=Number(a.moreThanThreeMonthsBalance),a.currentBalance=Number(a.currentBalance),a.monthOneDate=U(f).format("YYYY-MM-DD"),a.monthTwoDate=U(g).format("YYYY-MM-DD"),a.monthThreeDate=U(O).format("YYYY-MM-DD"),a.currentDate=U(X).format("YYYY-MM-DD"),a.monthlyRental=Number(a.monthlyRental),a.depositAmount=a.depositAmount,a.depositPeriod=Number(a.depositPeriod),a.leasePeriod=Number(a.leasePeriod),a.outStandingBalance=a.moreThanThreeMonthsBalance+a.monthThreeBalance+a.monthTwoBalance+a.monthOneBalance+a.currentBalance,s(reverseUrl("create-company-lease"),{onStart:()=>{m(!0)},onSuccess:b=>{var M,C,W;const w=(M=b==null?void 0:b.props)==null?void 0:M.flash.message;w&&((C=b==null?void 0:b.props)==null?void 0:C.flash.type)==="success"?(d(),v(),p(w,a.lesseeName)):w&&((W=b==null?void 0:b.props)==null?void 0:W.flash.type)==="error"&&T.error(w.message),m(!1)},onError:b=>{T.error(JSON.stringify(b)),c(b),m(!1)}})}),H=y=>{y.preventDefault(),a.leaseStartDate=U(a.leaseStartDate).format("YYYY-MM-DD"),a.leaseEndDate=U(a.leaseEndDate).format("YYYY-MM-DD"),s(reverseUrl("client-edit-lease"),{onStart:()=>{console.log(a),m(!0)},onSuccess:b=>{var w,M;((w=b==null?void 0:b.props)==null?void 0:w.flash.type)==="success"?(d(),p("Lease updated successfully")):((M=b==null?void 0:b.props)==null?void 0:M.flash.type)==="error"&&T.error("An error occurred, please try again"),m(!1)},onError:b=>{T.error(JSON.stringify(b)),c(b),m(!1)}})};function K(y){if(y.preventDefault,o==="add")$(y);else if(o==="edit")H(y);else throw new Error("Invalid action: "+o)}function j(y){r(b=>I(E({},b),{rentGuarantorId:y.label.split(" - ")[1]}))}return{isSingleTab:h==="single",isLoading:x,errors:l,showReceipt:S,data:a,value:F,currentDate:X,monthOne:f,monthTwo:g,monthThree:O,handleSubmit:K,toggleTab:()=>{n(y=>y==="single"?"multiple":"single")},viewReceipt:()=>N(!0),closeReceipt:()=>N(!1),setValue:R,setClientName:L,setClientId:_,setMobileNo:z,setRegNumber:P,setAddress:Q,changeHandler:G,changeLandlordType:y=>r(b=>I(E({},b),{landlordType:y,regIdNumber:"",landlordName:""})),changeLandlord:y=>r(b=>I(E({},b),{landlordName:y.label.split(" - ")[0],regIdNumber:y.label.split(" - ")[1],landlordName:y.label.split(" - ")[0]})),changeRentGuarantorId:j,toggleIsGovernment:()=>r(y=>I(E({},y),{isGovernment:!y.isGovernment}))}}const st=({show:d,handleClose:o,action:t,lesseeDetails:i,subscriptionPeriod:p,handleShowAlert:x})=>{const{isLoading:m,isSingleTab:h,errors:n,showReceipt:l,data:c,value:S,currentDate:N,monthOne:a,monthTwo:r,monthThree:s,handleSubmit:v,toggleTab:F,setValue:R,setClientName:k,setClientId:L,setMobileNo:Y,setRegNumber:P,setAddress:B,changeHandler:_,viewReceipt:V,closeReceipt:z,changeLandlordType:J,changeLandlord:Q,toggleIsGovernment:A,changeRentGuarantorId:X}=rt(o,t,i,p,x);return e.jsxs(q,{size:"lg",show:d,onHide:o,centered:!0,children:[e.jsxs(q.Header,{closeButton:!0,className:"card-header bg-transparent ps-0",children:[e.jsx("button",{className:`btn btn-sm ${h?"btn-info text-white":"btn-light"}`,onClick:F,children:"Single"}),e.jsx("button",{className:`btn btn-sm ${h?"btn-light":"btn-info text-white"}`,onClick:F,children:"Multiple"})]}),e.jsx(q.Body,{className:"p-0",children:h?e.jsxs("div",{className:"card card-raised",children:[e.jsx("div",{className:"card-header bg-info",children:e.jsx("h2",{className:"display-6 mb-0 text-white",children:t==="view"?"View Lease - Company":t==="edit"?"Edit Lease - Company":"Add Lease - Company"})}),e.jsxs("div",{className:"card-body p-4",children:[e.jsx("h6",{className:"bg-info p-1 display-6 m-0 text-center text-white",children:"Lease details"}),e.jsxs("form",{className:"p-5 border border-2 border-info",onSubmit:v,children:[e.jsxs("div",{className:"row mb-4",children:[e.jsx(xe,{}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Company Name:"}),e.jsx(qe,{from:"leases",delay:500,placeholder:"Company Name",value:S,setValue:R,url:reverseUrl("get_searched_companies"),type:"company",setAddress:B,setClientName:k,setRegNumber:P,setClientId:L,setMobileNo:Y}),n&&e.jsx("div",{className:"text-danger mt-1",children:n.identificationNumber})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Account Number:"}),e.jsx("input",{value:c.accountNumber,onChange:_,type:"text",name:"accountNumber",id:"accountNumber",className:"form-control form-control-sm",readOnly:t==="view"}),n&&e.jsx("div",{className:"text-danger mt-1",children:n.accountNumber})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Lessee Name:"}),e.jsx("input",{value:c.lesseeName,onChange:_,type:"text",name:"lesseeName",readOnly:!0,required:!0,id:"lesseeName",className:"form-control form-control-sm"}),n&&e.jsx("div",{className:"text-danger mt-1",children:n.lesseeName})]})]}),e.jsxs("div",{className:"row mb-4",children:[e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Email:"}),e.jsx("input",{value:c.email,onChange:_,type:"text",name:"email",required:!0,id:"email",className:"form-control form-control-sm",readOnly:t==="view"}),n&&e.jsx("div",{className:"text-danger mt-1",children:n.email})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Mobile:"}),e.jsx("input",{value:c.mobile,onChange:_,type:"text",name:"mobile",required:!0,id:"mobile",className:"form-control form-control-sm",readOnly:t==="view"}),n&&e.jsx("div",{className:"text-danger mt-1",children:n.mobile})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Rent Guarantor ID:"}),e.jsx(oe,{onChange:f=>X(f),extraProps:{required:!1,className:"w-100",name:"rentGuarantorId",id:"rentGuarantorId",placeholder:c.rentGuarantorId||void 0},isDisabled:t==="view",defaultValue:t==="view"?c.rentGuarantorId:"",useAlternateFetchOptions:{type:"individual"}}),n&&e.jsx("div",{className:"text-danger mt-1",children:n.rentGuarantorId})]})]}),e.jsxs("div",{className:"row mb-4",children:[e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Rent Guarantor Name:"}),e.jsx("input",{value:c.rentGuarantorName,onChange:_,type:"text",name:"rentGuarantorName",id:"rentGuarantorName",className:"form-control form-control-sm",readOnly:!0}),n&&e.jsx("div",{className:"text-danger mt-1",children:n.rentGuarantorName})]}),e.jsxs("div",{className:"mt-1 col-lg-4 d-flex flex-column",children:[e.jsx("label",{htmlFor:"isGovernment",className:"form-label",children:"Government:"}),e.jsx("input",{checked:c.isGovernment,onChange:A,type:"checkbox",id:"isGovernment",name:"isGovernment",className:"form-check-input border-1 p-2 border-black",readOnly:t==="view"}),n&&e.jsx("div",{className:"text-danger mt-1",children:n.isGovernment})]})]}),e.jsxs("div",{className:"row mb-4",children:[e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Lease Address:"}),e.jsx("textarea",{value:c.lesseeAddress,onChange:_,type:"text",required:!!c.lesseeName,name:"lesseeAddress",id:"lesseeAddress",className:"form-control form-control-sm",readOnly:t==="view"}),n&&e.jsx("div",{className:"text-danger mt-1",children:n.lesseeAddress})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Lease Details:"}),e.jsx("textarea",{value:c.leaseDetails,onChange:_,type:"text",name:"leaseDetails",id:"leaseDetails",className:"form-control form-control-sm",readOnly:t==="view"}),n&&e.jsx("div",{className:"text-danger mt-1",children:n.leaseDetails})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Lease Currency"}),e.jsxs("select",{value:c.leaseCurrency,onChange:_,id:"leaseCurrency",name:"leaseCurrency",className:"form-select form-select-sm",readOnly:t==="view",children:[e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"ZWG",children:"ZWG"})]}),n&&e.jsx("div",{className:"text-danger mt-1",children:n.leaseCurrency})]})]}),e.jsxs("div",{className:"row mb-4",children:[e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Monthly Rental:"}),e.jsx("input",{value:c.monthlyRental===0?"":c.monthlyRental,placeholder:"enter monthly rental",onChange:_,type:"text",required:!!c.lesseeName,id:"monthlyRental",name:"monthlyRental",className:"form-control form-control-sm",readOnly:t==="view"}),n&&e.jsx("div",{className:"text-danger mt-1",children:n.monthlyRental})]}),e.jsxs("div",{className:"mt-1 col-lg-4 d-flex flex-column",children:[e.jsx("label",{className:"form-label",children:"Variable Rent:"}),e.jsx("input",{checked:c.rentVariable,onChange:_,type:"checkbox",id:"rentVariable",name:"rentVariable",className:"form-check-input border-1 p-2 border-black",readOnly:t==="view"}),n&&e.jsx("div",{className:"text-danger mt-1",children:n.rentVariable})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Deposit Period(Months):"}),e.jsx("input",{value:c.depositPeriod===0?"":c.depositPeriod,placeholder:"enter deposit period",onChange:_,type:"text",id:"depositPeriod",name:"depositPeriod",className:"form-control form-control-sm",readOnly:t==="view"}),n&&e.jsx("div",{className:"text-danger mt-1",children:n.depositPeriod})]})]}),e.jsxs("div",{className:"row mb-4",children:[e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Deposit Amount:"}),e.jsx("input",{value:c.depositAmount===0?"":c.depositAmount,placeholder:"enter deposit amount",onChange:_,type:"text",name:"depositAmount",id:"depositAmount",className:"form-control form-control-sm",readOnly:t==="view"}),n&&e.jsx("div",{className:"text-danger mt-1",children:n.depositAmount})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Subscription period left (months):"}),e.jsx("input",{value:c.leasePeriod,onChange:_,type:"number",id:"leasePeriod",name:"leasePeriod",className:"form-control form-control-sm"}),n&&e.jsx("div",{className:"text-danger mt-1",children:n.leasePeriod})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Lease Start Date:"}),e.jsx("input",{value:c.leaseStartDate,onChange:_,type:"date",name:"leaseStartDate",required:!!c.lesseeName,id:"leaseStartDate",className:"form-control form-control-sm",readOnly:t==="view"}),n&&e.jsx("div",{className:"text-danger mt-1",children:n.leaseStartDate})]})]}),e.jsxs("div",{className:"row mb-4",children:[e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Lease End Date:"}),e.jsx("input",{value:c.leaseEndDate,onChange:_,type:"date",name:"leaseEndDate",id:"leaseEndDate",className:"form-control form-control-sm",readOnly:t==="view"}),n&&e.jsx("div",{className:"text-danger mt-1",children:n.leaseEndDate})]}),e.jsxs("div",{className:"col-lg-4 mt-1",children:[e.jsx("label",{className:"form-label",children:"Payment Period Start Date:"}),e.jsx("input",{value:c.paymentPeriodStart,onChange:_,type:"number",id:"paymentPeriodStart",name:"paymentPeriodStart",className:"form-control form-control-sm",readOnly:!0,disabled:!0}),n&&e.jsx("div",{className:"text-danger mt-1",children:n.paymentPeriodStart})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Payment Period End Date:"}),e.jsx("input",{value:c.paymentPeriodEnd,onChange:_,min:"1",max:"31",type:"number",required:!!c.lesseeName,name:"paymentPeriodEnd",id:"paymentPeriodEnd",className:"form-control form-control-sm",readOnly:t==="view"}),n&&e.jsx("div",{className:"text-danger mt-1",children:n.paymentPeriodEnd})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-center p-2 fw-bolder h6 custom-bg-grey",children:"Estate Agents Section"}),e.jsxs("div",{className:"row align-items-center",children:[e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{className:"form-label",children:"Landlord Type:"}),e.jsxs("select",{className:"form-select form-select-md",name:"landlordType",id:"landlordType",value:c.landlordType,disabled:t==="view"||t==="edit",onChange:f=>J(f.target.value),children:[e.jsx("option",{value:"INDIVIDUAL",children:"Individual"}),e.jsx("option",{value:"COMPANY",children:"Company"})]}),n&&e.jsx("div",{className:"text-danger mt-1",children:n.landlordType})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsxs("label",{htmlFor:"regIdNumber",className:"form-label",children:[c.landlordType==="COMPANY"?"Reg Number":"ID"," (or Name)",":"]}),e.jsx(oe,{onChange:f=>Q(f),extraProps:{required:!1,id:"regIdNumber",className:"w-100",name:"regIdNumber",placeholder:(c.regIdNumber||c.landlordName)&&(c.regIdNumber||" - "+c.landlordName)||""},defaultValue:c.regIdNumber?c.regIdNumber:"",isDisabled:t==="view"||t==="edit"||c.landlordType==="",useAlternateFetchOptions:{type:c.landlordType.toLowerCase()}},c.landlordType),n&&e.jsx("div",{className:"text-danger mt-1",children:n.regIdNumber})]}),e.jsxs("div",{className:"mt-1 col-lg-4",children:[e.jsx("label",{htmlFor:"landlordName",className:"form-label",children:"Landlord Name"}),e.jsx("input",{value:c.landlordName,name:"landlordName",id:"landlordName",className:"form-control form-control-md custom-no-pointer-events border border-2",readOnly:!0}),n&&e.jsx("div",{className:"text-danger mt-1",children:n.landlordName})]}),e.jsxs("div",{className:"mt-2 col-lg-4",children:[e.jsx("label",{htmlFor:"commission",className:"form-label",children:"Commission %"}),e.jsx("input",{value:c.commission,onChange:_,type:"number",min:0,max:100,name:"commission",id:"commission",className:"form-control form-control-sm",disabled:t==="view"||t==="edit"}),n&&e.jsx("div",{className:"text-danger mt-1",children:n.commission})]}),e.jsxs("div",{className:"mt-2 col-lg-4",children:[e.jsx("label",{htmlFor:"openingBalance",className:"form-label",children:"Landlord Opening Balance"}),e.jsx("input",{value:c.openingBalance,onChange:_,type:"number",min:0,name:"openingBalance",id:"openingBalance",className:"form-control form-control-sm",disabled:t==="view"||t==="edit"}),n&&e.jsx("div",{className:"text-danger mt-1",children:n.openingBalance})]})]})]}),t==="add"&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-center p-2 fw-bolder h6 custom-bg-grey",children:"Tenant Opening Rent Balances"}),e.jsx("table",{className:"table table-responsive table-bordered",children:e.jsxs("tbody",{children:[e.jsxs("tr",{style:{lineHeight:"5px",fontSize:"12px"},children:[e.jsx("th",{scope:"row",className:"fw-bold",style:{lineHeight:"15px"},children:"Payment Date"}),e.jsx("td",{className:"",style:{lineHeight:"15px"},children:"More than 3 months"}),e.jsx("td",{className:"",style:{lineHeight:"15px"},children:s}),e.jsx("td",{className:"",style:{lineHeight:"15px"},children:r}),e.jsx("td",{className:"",style:{lineHeight:"15px"},children:a}),e.jsx("td",{className:"",style:{lineHeight:"15px"},children:N}),e.jsx("td",{className:"fw-bold",style:{lineHeight:"15px"},children:"Outstanding Balance"})]}),e.jsxs("tr",{style:{lineHeight:"5px",fontSize:"12px"},children:[e.jsx("th",{scope:"row",className:"fw-bold",children:"Amount"}),e.jsx("td",{className:"bg-black text-white",children:e.jsx("input",{className:"form-control form-control-sm",type:"text",id:"moreThanThreeMonthsBalance",name:"moreThanThreeMonthsBalance",onChange:_,value:c.moreThanThreeMonthsBalance})}),e.jsx("td",{className:"text-white bg-danger",children:e.jsx("input",{className:"form-control form-control-sm",type:"text",id:"monthThreeBalance",name:"monthThreeBalance",onChange:_,value:c.monthThreeBalance})}),e.jsx("td",{className:"text-white custom-bg-pink",children:e.jsx("input",{className:"form-control form-control-sm",type:"text",id:"monthTwoBalance",name:"monthTwoBalance",onChange:_,value:c.monthTwoBalance})}),e.jsx("td",{className:"text-white bg-warning",children:e.jsx("input",{className:"form-control form-control-sm",type:"text",id:"monthOneBalance",name:"monthOneBalance",onChange:_,value:c.monthOneBalance})}),e.jsx("td",{className:"text-white bg-success",children:e.jsx("input",{className:"form-control form-control-sm",type:"text",id:"currentBalance",name:"currentBalance",onChange:_,value:c.currentBalance})}),e.jsx("td",{className:`text-white text-end h-100 d-flex align-items-center justify-content-center py-4 my-auto ${Number(c.moreThanThreeMonthsBalance)>0?"bg-black":Number(c.monthThreeBalance)>0?"bg-danger":Number(c.monthTwoBalance)>0?"custom-bg-pink":Number(c.monthOneBalance)>0?"bg-warning":"bg-success"}`,style:{backgroundColor:Number(c.monthTwoBalance)>0?"#f87171":""},children:pe(Number(c.moreThanThreeMonthsBalance)+Number(c.monthThreeBalance)+Number(c.monthTwoBalance)+Number(c.monthOneBalance)+Number(c.currentBalance)||0)})]})]})})]}),e.jsx("div",{className:"d-flex justify-content-end align-items-center gap-3",children:t==="view"?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-info text-white",onClick:V,children:"Receipt"}),e.jsx("button",{className:"btn btn-success",onClick:o,children:"Edit"}),e.jsx("button",{className:"btn btn-danger",onClick:o,children:"Terminate"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-secondary",onClick:o,children:"Cancel"}),e.jsx("button",{className:"btn btn-info text-white",type:"submit",disabled:m,children:m?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-grow spinner-grow-sm"}),e.jsx("span",{className:"d-inline-block ml-2",children:"processing.."})]}):"Submit"})]})})]}),e.jsx(ue,{show:l,handleClose:z})]})]}):e.jsx(_e,{type:"company",actionType:"lease"})})]})},ve=st,ot=({show:d,handleClose:o,handleShowAlert:t,leaseData:i})=>{const[p,x]=u.useState(!1),{data:m,post:h}=le({leaseId:i.lease_id}),n=()=>{h(reverseUrl("delete_lease"),{onStart:()=>{x(!0)},onSuccess:l=>{t("Lease terminated successfully"),x(!1)},onError:l=>{T.error("Something went wrong! Please try again"),x(!1)},onFinish:()=>{o()}})};return e.jsxs(q,{show:d,onHide:o,size:"md",backdrop:"static",centered:!0,children:[e.jsx(q.Header,{closeButton:!0,className:"h4 bg-info text-white text-center text-uppercase",children:"Confirm Lease Termination"}),e.jsxs(q.Body,{className:"p-4 d-flex justify-content-between align-items-center gap-4",children:[e.jsx(xe,{}),e.jsxs("p",{className:"my-3 text-center",children:["Are you sure you want to terninate lease for ",i.name,"? This action cannot be undone."]})]}),e.jsxs(q.Footer,{className:"p-4 d-flex justify-content-end gap-4",children:[e.jsxs(de,{onClick:o,variant:"secondary",children:[e.jsx("i",{className:"material-icons",children:"cancel"}),"Cancel"]}),e.jsxs(de,{onClick:n,variant:"danger",children:[e.jsx("i",{className:"material-icons",children:"done"}),"Delete"]})]})]})},lt=ot;function dt({data:d}){let o=0;return Object.keys(d).forEach(t=>o+=d[t]),e.jsx(D,{title:"aged analysis",children:e.jsxs("table",{className:"table table-sm table-responsive table-bordered  mb-0",children:[e.jsx("thead",{className:"custom-bg-grey-2 text-white",children:e.jsxs("tr",{children:[e.jsx("th",{children:"90+ Days"}),e.jsx("th",{children:"90 Days"}),e.jsx("th",{children:"60 Days"}),e.jsx("th",{children:"30 Days"}),e.jsx("th",{children:"Current"}),e.jsx("th",{children:"total"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{children:d.oneTwentyDays}),e.jsx("td",{children:d.ninetyDays}),e.jsx("td",{children:d.sixtyDays}),e.jsx("td",{children:d.thirtyDays}),e.jsx("td",{children:d.current}),e.jsxs("td",{children:["$",o]})]})})]})})}function ct(d,o){const[t,i]=u.useState(!d),[p,x]=u.useState(d),[m,h]=u.useState(""),[n,l]=u.useState(!1),{Auth:c}=we().props,S=`${c.user_profile.first_name} ${c.user_profile.last_name}`;function N(a){a.preventDefault(),l(!0),h("");const r=Object.fromEntries(new FormData(a.target).entries());r.client_id=o.toString(),Z.put(reverseUrl("debtor_intelligence"),r).then(s=>{const v={text:s.data.note,user:s.data.user_name,timestamp:s.data.updated_at||s.data.created_at};x(v),h(""),l(!1),i(!1)}).catch(s=>{s instanceof ae?h(s.response.status===500?`Error: ${s.response.statusText}`:JSON.stringify(s.response.data)):h(s),l(!1),i(!p)})}return{data:p,isEditMode:t,handleSave:N,loggedInUser:S,setIsEditMode:i,error:m,setError:h,isLoading:n}}function it({data:d,clientId:o}){const{data:t,isEditMode:i,handleSave:p,loggedInUser:x,setIsEditMode:m,error:h,setError:n,isLoading:l}=ct(d,o);return e.jsx(D,{title:"debtor intelligence",children:e.jsxs("div",{className:"px-3 py-2",children:[h&&e.jsxs("p",{className:"d-flex align-items-start gap-1 small text-danger",children:[e.jsx("button",{type:"button",onClick:()=>n(""),className:"btn-close btn-sm"}),ee.truncate(h,{length:150})]}),i?e.jsxs("form",{onSubmit:p,children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{htmlFor:"note",className:"form-label",children:t&&t.text?"Edit note":"No note found, create new note"}),e.jsx("textarea",{className:"form-control",name:"note",id:"note",rows:"2",defaultValue:t&&t.text?t.text:"",placeholder:"type here...",disabled:l})]}),e.jsx("b",{className:"d-block my-1",children:x}),e.jsx("div",{className:"small text-success",children:"today"}),e.jsx("button",{disabled:l,type:"submit",className:"d-block btn btn-info text-white w-100 mt-3",children:l?"Saving...":"Save"})]}):e.jsxs("div",{children:[e.jsx("small",{children:t.text}),e.jsx("b",{className:"d-block my-1",children:t.user}),e.jsx("div",{className:"small text-success",children:ce(t.timestamp)}),e.jsx("button",{onClick:()=>m(!0),type:"button",className:"d-block btn btn-info w-100 mt-4 text-white",children:"Edit"})]})]})})}function mt(d,o){const[t,i]=u.useState(!d),[p,x]=u.useState(d),[m,h]=u.useState(""),[n,l]=u.useState(!1);function c(S){S.preventDefault(),l(!0),h("");const N=Object.fromEntries(new FormData(S.target).entries());N.client_id=o.toString(),N.other_numbers=N.other_numbers.split(",").filter(Boolean).map(a=>a.trim()),Z.put(reverseUrl("update_client_contact_details"),N).then(a=>{const r={contactPerson:`${a.data.firstname} ${a.data.surname}`,smsNumber:a.data.sms_number,otherNumbers:a.data.other_numbers?a.data.other_numbers.join(", "):"",emailAddress:a.data.email_address,address:a.data.address};x(r),h(""),l(!1),i(!1)}).catch(a=>{a instanceof ae?h(a.response.status===500?`Error: ${a.response.statusText}`:JSON.stringify(a.response.data)):h(a),l(!1),i(!p)})}return{data:p,isEditMode:t,handleSave:c,setIsEditMode:i,error:m,setError:h,isLoading:n}}function ht({data:d,clientId:o}){const{data:t,isEditMode:i,handleSave:p,setIsEditMode:x,error:m,setError:h,isLoading:n}=mt(d,o);return e.jsx(D,{title:"contact details",children:e.jsxs("div",{className:"py-2",children:[m&&e.jsxs("p",{className:"d-flex align-items-start px-2 gap-1 small text-danger",children:[e.jsx("button",{type:"button",onClick:()=>h(""),className:"btn-close btn-sm"}),ee.truncate(m,{length:150})]}),i?e.jsxs("form",{onSubmit:p,children:[e.jsxs("div",{className:"d-flex gap-2 justify-content-between align-items-center py-1 px-2 border-bottom custom-bg-whitesmoke",children:[e.jsx("label",{htmlFor:"firstname",className:"form-label small",children:"First Name"}),e.jsx("input",{type:"text",className:"form-control form-control-sm w-50 rounded-2",name:"firstname",id:"firstname",disabled:n,defaultValue:t&&t.contactPerson?t.contactPerson.trim().split(" ")[0]:""})]}),e.jsxs("div",{className:"d-flex gap-2 justify-content-between align-items-center py-1 px-2 border-bottom",children:[e.jsx("label",{htmlFor:"surname",className:"form-label small",children:"Surname"}),e.jsx("input",{type:"text",className:"form-control form-control-sm w-50 rounded-2",name:"surname",id:"surname",disabled:n,defaultValue:t&&t.contactPerson?t.contactPerson.trim().split(" ")[1]:""})]}),e.jsxs("div",{className:"d-flex gap-2 justify-content-between align-items-center py-1 px-2 border-bottom custom-bg-whitesmoke",children:[e.jsx("label",{htmlFor:"sms_number",className:"form-label small",children:"SMS Number"}),e.jsx("input",{type:"text",className:"form-control form-control-sm w-50 rounded-2",name:"sms_number",id:"sms_number",disabled:n,defaultValue:t&&t.smsNumber?t.smsNumber:""})]}),e.jsxs("div",{className:"d-flex gap-2 justify-content-between align-items-center py-1 px-2 border-bottom",children:[e.jsx("label",{htmlFor:"other_numbers",className:"form-label small",children:"Other Numbers (comma separated)"}),e.jsx("input",{type:"text",className:"form-control form-control-sm w-50 rounded-2",name:"other_numbers",id:"other_numbers",disabled:n,defaultValue:t&&t.other_numbers?t.other_numbers:"",placeholder:"(comma separated)"})]}),e.jsxs("div",{className:"d-flex gap-2 justify-content-between align-items-center py-1 px-2 border-bottom custom-bg-whitesmoke",children:[e.jsx("label",{htmlFor:"email_address",className:"form-label small",children:"Email Address"}),e.jsx("input",{type:"email",className:"form-control form-control-sm w-50 rounded-2",name:"email_address",id:"email_address",disabled:n,defaultValue:t&&t.emailAddress?t.emailAddress:""})]}),e.jsxs("div",{className:"d-flex gap-2 justify-content-between align-items-center py-1 px-2 border-bottom",children:[e.jsx("label",{htmlFor:"address",className:"form-label small",children:"Address"}),e.jsx("input",{type:"text",className:"form-control form-control-sm w-50 rounded-2",name:"address",id:"address",disabled:n,defaultValue:t&&t.address?t.address:""})]}),e.jsx("button",{disabled:n,type:"submit",className:"d-block btn btn-info text-white w-100 mt-3",children:n?"Saving...":"Save"})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"d-flex gap-2 py-1 px-2 border-bottom custom-bg-whitesmoke",children:[e.jsx("div",{children:"Contact Person: "}),e.jsx("div",{className:"flex-grow-1 text-center",children:t.contactPerson})]}),e.jsxs("div",{className:"d-flex gap-2 py-1 px-2 border-bottom",children:[e.jsx("div",{children:"SMS Number: "}),e.jsx("div",{className:"flex-grow-1 text-center",children:t.smsNumber})]}),e.jsxs("div",{className:"d-flex gap-2 py-1 px-2 border-bottom custom-bg-whitesmoke",children:[e.jsx("div",{children:"Other Numbers: "}),e.jsx("div",{className:"flex-grow-1 text-center",children:t.otherNumbers})]}),e.jsxs("div",{className:"d-flex gap-2 py-1 px-2 border-bottom",children:[e.jsx("div",{children:"Email Address: "}),e.jsx("div",{className:"flex-grow-1 text-center",children:t.emailAddress})]}),e.jsxs("div",{className:"d-flex gap-2 py-1 px-2 border-bottom custom-bg-whitesmoke",children:[e.jsx("div",{children:"Address: "}),e.jsx("div",{className:"flex-grow-1 text-center",children:t.address})]}),e.jsx("div",{className:"mt-4 px-2",children:e.jsx("button",{onClick:()=>x(!0),type:"button",className:"d-block btn btn-info w-100 text-white",children:"Edit"})})]})]})})}function ut({data:d}){return e.jsx(D,{title:"forecast inflows",children:e.jsxs("table",{className:"table table-sm table-responsive table-bordered  mb-0",children:[e.jsx("thead",{className:"custom-bg-grey-2 text-white",children:e.jsxs("tr",{children:[e.jsx("th",{children:"0-7 Days"}),e.jsx("th",{children:"8-14 Days"}),e.jsx("th",{children:"15-21 Days"}),e.jsx("th",{children:"21+ Days"}),e.jsx("th",{children:"total"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{children:d.zeroToSevenDays}),e.jsx("td",{children:d.eightToFourteenDays}),e.jsx("td",{children:d.fourteenToTwentyOneDays}),e.jsx("td",{children:d.twentyOnePlusDays}),e.jsxs("td",{children:["$",d.total]})]})})]})})}function xt(d,o){const[t,i]=u.useState(d),[p,x]=u.useState(""),[m,h]=u.useState(!1),[n,l]=u.useState("note");function c(S){S.preventDefault(),h(!0),x("");const N=Object.fromEntries(new FormData(S.target).entries());N.client_id=o.toString(),N.reminder_type=n.toUpperCase(),n==="note"&&(N.action_date=new Date().toISOString().split("T")[0]),Z.post(reverseUrl("communication_history"),N).then(a=>{i(r=>[...r,{text:a.data.message,actionDone:a.data.action_done,user:a.data.user_name,communicationType:a.data.reminder_type.toLowerCase(),timestamp:a.data.created_at}]),x(""),h(!1)}).catch(a=>{a instanceof ae?x(a.response.status===500?`Error: ${a.response.statusText}`:JSON.stringify(a.response.data)):x(a),h(!1)})}return{messages:t,handleSubmit:c,error:p,setError:x,isLoading:m,remainderType:n,setRemainderType:l}}function pt({messages:d,clientId:o}){const{handleSubmit:t,messages:i,error:p,setError:x,isLoading:m,remainderType:h,setRemainderType:n}=xt(d,o);return e.jsx(D,{noBoundary:!0,title:"communication history",children:e.jsxs("div",{className:"custom-bg-whitesmoke px-5 py-3",children:[e.jsxs("div",{className:"custom-vh-50 custom-overflow-y-auto",children:[i.map((l,c)=>e.jsxs("div",{className:"custom-message py-2 px-3 border shadow-sm mb-3",children:[e.jsx("small",{children:l.text+(l.communicationType.toLowerCase().trim()!=="note"&&l.actionDone?` (action date: ${ce(l.actionDone)})`:"")}),e.jsxs("div",{className:"mt-2 d-flex justify-content-end align-items-center text-end gap-2",children:[e.jsx("small",{className:"smallest",children:e.jsxs("b",{children:[l.user,l.communicationType&&" | "+l.communicationType.toLowerCase()]})}),e.jsx("small",{className:"text-success smallest",children:ce(l.timestamp)})]})]},c)),i.length===0&&e.jsxs("small",{className:"h-100 text-grey d-flex justify-content-center align-items-center text-center",children:["No communication ",e.jsx("br",{})," history"]})]}),e.jsxs("form",{onSubmit:t,className:"border-top border-4 w-100 pt-3",children:[p&&e.jsxs("p",{className:"d-flex align-items-start gap-1 small text-danger",children:[e.jsx("button",{type:"button",onClick:()=>x(""),className:"btn-close btn-sm"}),ee.truncate(p,{length:150})]}),e.jsx("textarea",{rows:2,name:"message",id:"message",placeholder:"Type message here...",className:"d-block w-100 p-2 custom-form-control border-0 border-bottom border-bottom-3 border-dark",required:!0,disabled:m}),e.jsxs("div",{className:"d-flex justify-content-center pt-2 gap-2 align-items-center",children:[e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"reminder_type",disabled:m,value:"note",id:"reminder_type-note",checked:h==="note",onChange:l=>n(l.target.value)}),e.jsx("label",{className:"form-check-label",htmlFor:"reminder_type-note",children:"Note"})]}),e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"reminder_type",disabled:m,value:"email",id:"reminder_type-email",checked:h==="email",onChange:l=>n(l.target.value)}),e.jsx("label",{className:"form-check-label",htmlFor:"reminder_type-email",children:"Email"})]}),e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"reminder_type",disabled:m,value:"sms",id:"reminder_type-sms",checked:h==="sms",onChange:l=>n(l.target.value)}),e.jsx("label",{className:"form-check-label",htmlFor:"reminder_type-sms",children:"SMS"})]})]}),h!=="note"&&e.jsxs("div",{className:"d-flex my-2 gap-2 align-items-center justify-content-center",children:[e.jsxs("label",{htmlFor:"action_date",className:"small d-block text-nowrap form-label",children:["Send ",h," on:"]}),e.jsx("input",{min:new Date().toISOString().split("T")[0],type:"date",className:"form-control form-control-sm rounded-4",name:"action_date",id:"action_date",required:!0})]}),e.jsx("button",{disabled:m,type:"submit",className:"d-block btn btn-info w-100 mt-4 text-white",children:m?"Submiting...":"Submit"})]})]})})}function bt(d,o,t){const[i,p]=u.useState(d),[x,m]=u.useState(""),[h,n]=u.useState(!1),[l,c]=u.useState([]);function S(){n(!0),m("");const r={plans:l.map(s=>I(E({},s),{client_id:o.toString()}))};Z.post(reverseUrl("payment_plans"),r).then(s=>{c([]),m(""),n(!1),t()}).catch(s=>{s instanceof ae?m(s.response.status===500?`Error: ${s.response.statusText}`:JSON.stringify(s.response.data)):m(s),c([]),n(!1)})}function N(r){c(s=>[...s,r])}function a(){c([])}return{paymentPlans:i,newPaymentPlans:l,addNewPaymentPlan:N,confirmNewPaymentPlans:S,clearNewPaymentPlans:a,error:x,setError:m,isLoading:h}}function ft({addNewPaymentPlan:d}){function o(t){t.preventDefault();const i=Object.fromEntries(new FormData(t.target).entries());d(i)}return e.jsx(D,{title:"payment plan",children:e.jsxs("form",{onSubmit:o,className:"p-3",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-5 mb-2",children:[e.jsx("label",{htmlFor:"spoke_with",className:"text-nowrap",children:"Person spoken with:"}),e.jsx("input",{type:"text",name:"spoke_with",id:"spoke_with",placeholder:"Person spoken with here",className:"custom-form-control border-0 border-bottom border-bottom-3 border-dark",required:!0})]}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-5 mb-2",children:[e.jsx("label",{htmlFor:"expected_pay_date",className:"text-nowrap",children:"Expected Pay Date:"}),e.jsx("input",{type:"date",name:"expected_pay_date",id:"expected_pay_date",className:"custom-form-control border-0 custom-pointer border-bottom border-bottom-3 border-dark",required:!0,defaultValue:new Date().toISOString().split("T")[0],min:new Date().toISOString().split("T")[0]})]}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-5 mb-2",children:[e.jsx("label",{htmlFor:"amount",className:"text-nowrap",children:"Amount ($):"}),e.jsx("input",{min:0,type:"number",name:"amount",id:"amount",placeholder:"Amount in $",className:"custom-form-control border-0 border-bottom border-bottom-3 border-dark",required:!0})]}),e.jsx("button",{type:"submit",className:"d-block btn btn-info w-100 mt-4 text-white",children:"Add to payment plan"})]})})}function gt({paymentPlans:d}){return e.jsx(D,{title:"payment plans",children:e.jsx("div",{className:"custom-mx-h-15 overflow-auto",children:e.jsxs("table",{className:"table table-sm table-responsive table-bordered mb-0",children:[e.jsx("thead",{className:"custom-bg-grey-2 text-white",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Plan ID"}),e.jsx("th",{children:"Amount"}),e.jsx("th",{children:"Date"})]})}),e.jsxs("tbody",{children:[d.map((o,t)=>e.jsxs("tr",{children:[e.jsx("td",{children:o.id||t}),e.jsx("td",{children:o.amount}),e.jsx("td",{children:Se(o.date)})]},o.id)),d.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"text-center small text-grey py-3",children:"No payment plans"})})]})]})})})}function Nt({newPaymentPlans:d,confirmNewPaymentPlans:o,clearNewPaymentPlans:t,error:i,setError:p,isLoading:x}){return e.jsx(D,{title:"plan details",children:e.jsxs("div",{className:"p-3 pb-2",children:[e.jsxs("div",{className:"custom-h-07 overflow-auto",children:[d.map((m,h)=>e.jsx("div",{className:"p-1 small border-bottom",children:`${m.spoke_with} promised to pay USD${m.amount} on ${Se(m.expected_pay_date)}`},h)),d.length===0&&e.jsx("div",{className:"text-center small text-grey py-3",children:"No new payment plans"})]}),e.jsxs("div",{className:"pt-2 bg-white",children:[i&&e.jsxs("p",{className:"d-flex align-items-start gap-1 small text-danger",children:[e.jsx("button",{type:"button",onClick:()=>p(""),className:"btn-close btn-sm"}),ee.truncate(i,{length:150})]}),e.jsxs("div",{className:"d-flex gap-3",children:[e.jsx("button",{type:"button",onClick:o,className:"d-block btn btn-info w-100 text-white",disabled:x||!d.length,children:x?"Saving...":"Save plan"}),e.jsx("button",{type:"button",onClick:t,className:"d-block btn btn-dark w-100 text-white",disabled:x||!d.length,children:"Clear All"})]})]})]})})}function jt({paymentPlans:d,clientId:o,refreshClientViewData:t}){const{paymentPlans:i,newPaymentPlans:p,addNewPaymentPlan:x,confirmNewPaymentPlans:m,clearNewPaymentPlans:h,error:n,setError:l,isLoading:c}=bt(d,o,t);return e.jsxs(e.Fragment,{children:[e.jsx(ft,{addNewPaymentPlan:x,clientId:o}),e.jsx(Nt,{newPaymentPlans:p,confirmNewPaymentPlans:m,clearNewPaymentPlans:h,error:n,setError:l,isLoading:c}),e.jsx(gt,{paymentPlans:i})]})}function yt({clientViewProps:{showModal:d,hideClientView:o,data:t,error:i,isLoading:p,clientId:x,refreshClientViewData:m}}){const h=!t;return e.jsx(e.Fragment,{children:e.jsxs(q,{show:d,onHide:o,fullscreen:!0,contentClassName:"custom-bg-whitesmoke",children:[e.jsx(q.Header,{className:"p-0",children:e.jsxs("div",{className:"w-100 p-2 text-center bg-info position-relative",children:[e.jsx("h4",{className:"text-white",children:p||i||h?"Client View":t.tenantName}),e.jsx("button",{type:"button",onClick:o,className:"btn position-absolute top-0 end-0 h-100 d-flex align-items-center text-white",children:e.jsx("i",{className:"material-icons fs-3 px-4",children:"close"})})]})}),e.jsx(q.Body,{children:e.jsxs("div",{className:"position-relative custom-mn-h-5",children:[p&&e.jsxs("div",{className:"text-center position-absolute top-50 start-50 translate-middle",children:[e.jsx("div",{className:"spinner-border text-info spinner-border-md",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})}),e.jsx("p",{children:"Loading...please wait"})]}),i&&e.jsxs("div",{className:"text-center text-danger position-absolute top-50 start-50 translate-middle",children:[e.jsx("p",{children:e.jsx("i",{className:"material-icons fs-1",children:"warning"})}),e.jsxs("p",{children:["Error: ",ee.truncate(i,{length:500})]})]}),!(p||i||h)&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"row row-cols-3 align-items-stretch",children:[e.jsxs("div",{className:"col p-1",children:[e.jsx(dt,{data:t.agedAnalysis}),e.jsx(it,{data:t.debtorIntelligence,clientId:x}),e.jsx(ht,{data:t.contactDetails,clientId:x})]}),e.jsx("div",{className:"col p-1",children:e.jsx(pt,{messages:t.communicationHistory,clientId:x})}),e.jsxs("div",{className:"col p-1",children:[e.jsx(ut,{data:t.forecastInflows}),e.jsx(jt,{clientId:x,paymentPlans:t.paymentPlans,refreshClientViewData:m})]})]})})]})})]})})}function vt(){const[d,o]=u.useState(!1),[t,i]=u.useState(null),[p,x]=u.useState(""),[m,h]=u.useState(!1),[n,l]=u.useState(null);function c(a){l(a),o(!0),h(!0),x(""),Z(reverseUrl("client_details"),{params:{lease_id:a.lease_id}}).then(r=>{const s={tenantName:a.name,agedAnalysis:{oneTwentyDays:r.data.aged_analysis["120_days_plus"],ninetyDays:r.data.aged_analysis["90_days"],sixtyDays:r.data.aged_analysis["60_days"],thirtyDays:r.data.aged_analysis["30_days"],current:r.data.aged_analysis.current},contactDetails:{contactPerson:`${r.data.client.firstname} ${r.data.client.surname}`,smsNumber:r.data.client.sms_number,otherNumbers:r.data.other_numbers?r.data.client.other_numbers.join(", "):"",emailAddress:r.data.client.email,address:r.data.client.address},paymentPlans:r.data.payment_plans.map(v=>({id:v.id,person:v.spoke_with,date:v.expected_pay_date,amount:v.amount})),communicationHistory:r.data.communication_history.map(v=>({text:v.message,timestamp:v.created_at,user:v.user_name,actionDone:v.action_done?v.action_done:null,communicationType:v.type})),debtorIntelligence:Object.values(r.data.debtor_intelligence).length&&Object.values(r.data.debtor_intelligence).every(Boolean)?{text:r.data.debtor_intelligence.note,timestamp:r.data.debtor_intelligence.updated_at,user:r.data.debtor_intelligence.user_name}:null,forecastInflows:{zeroToSevenDays:r.data.forecast_inflows["0-7"],eightToFourteenDays:r.data.forecast_inflows["8-14"],fourteenToTwentyOneDays:r.data.forecast_inflows["14-21"],twentyOnePlusDays:r.data.forecast_inflows["21+"],total:r.data.forecast_inflows.total}};console.log({res:r,resData:s}),i(s),x(""),h(!1)}).catch(r=>{r instanceof ae?x(r.response.status===500?`Error: ${r.response.statusText}`:JSON.stringify(r.response.data)):x(r),i(null),h(!1)})}function S(){console.log("refreshing.."),h(!0),x(""),Z(reverseUrl("client_details"),{params:{lease_id:n.lease_id}}).then(a=>{const r={tenantName:n.name,agedAnalysis:{oneTwentyDays:a.data.aged_analysis["120_days_plus"],ninetyDays:a.data.aged_analysis["90_days"],sixtyDays:a.data.aged_analysis["60_days"],thirtyDays:a.data.aged_analysis["30_days"],current:a.data.aged_analysis.current},contactDetails:{contactPerson:`${a.data.client.firstname} ${a.data.client.surname}`,smsNumber:a.data.client.sms_number,otherNumbers:a.data.other_numbers?a.data.client.other_numbers.join(", "):"",emailAddress:a.data.client.email,address:a.data.client.address},paymentPlans:a.data.payment_plans.map(s=>({id:s.id,person:s.spoke_with,date:s.expected_pay_date,amount:s.amount})),communicationHistory:a.data.communication_history.map(s=>({text:s.message,timestamp:s.created_at,user:s.user_name,actionDone:s.action_done?s.action_done:null,communicationType:s.type})),debtorIntelligence:Object.values(a.data.debtor_intelligence).length&&Object.values(a.data.debtor_intelligence).every(Boolean)?{text:a.data.debtor_intelligence.note,timestamp:a.data.debtor_intelligence.updated_at,user:a.data.debtor_intelligence.user_name}:null,forecastInflows:{zeroToSevenDays:a.data.forecast_inflows["0-7"],eightToFourteenDays:a.data.forecast_inflows["8-14"],fourteenToTwentyOneDays:a.data.forecast_inflows["14-21"],twentyOnePlusDays:a.data.forecast_inflows["21+"],total:a.data.forecast_inflows.total}};i(r),x(""),h(!1)}).catch(a=>{a instanceof ae?x(a.response.status===500?`Error: ${a.response.statusText}`:JSON.stringify(a.response.data)):x(a),i(null),h(!1)})}function N(){o(!1)}return{showModal:d,openClientView:c,hideClientView:N,data:t,error:p,isLoading:m,clientId:n?n.id:null,refreshClientViewData:S}}function wt(){const[d,o]=u.useState(!1),[t,i]=u.useState(!1),[p,x]=u.useState({}),[m,h]=u.useState([]),[n,l]=u.useState({}),[c,S]=u.useState(!1),[N,a]=u.useState(!1),[r,s]=u.useState(0),[v,F]=u.useState(!1),[R,k]=u.useState(!1),[L,Y]=u.useState(""),[P,B]=u.useState(!1),[_,V]=u.useState(!1),[z,J]=u.useState(""),[Q,A]=u.useState(""),[X,f]=u.useState("default"),g=vt(),O=(b,w)=>{V(!0),A(w),J(b)},G=()=>{V(!1),A(""),J("")};u.useEffect(()=>{Z.post(reverseUrl("open_subscription")).then(b=>{h(b.data)}).catch(b=>{})},[h]);const $=document.getElementById("hide-footer");u.useEffect(()=>($!==null&&document.getElementById("footer").classList.add("d-none"),()=>{$!==null&&document.getElementById("footer").classList.remove("d-none")}),[$]);const H=we().props.error;H&&T.error(H);function K(b){f(b.target.value)}let j=b=>b;function y(b){console.log(b),Z.post(reverseUrl("write-off"),{lease_id:b.lease_id}).then(w=>{console.log(w),Ae.Inertia.reload()}).catch(w=>{var C,W;console.log(w);const M=(W=(C=w==null?void 0:w.response)==null?void 0:C.data)!=null&&W.errors?JSON.stringify(w.response.data.errors):JSON.stringify(w);T.error(`An error occured:
`+ee.truncate(M,{length:200}))})}switch(X){case"rent-owing-asc":j=b=>{const w=[...b];return w.sort((M,C)=>M.owing_amount-C.owing_amount),w};break;case"rent-owing-des":j=b=>{const w=[...b];return w.sort((M,C)=>C.owing_amount-M.owing_amount),w};break;case"color-asc":j=b=>{const w={};b.forEach(C=>{C.color in w?w[C.color].push(C):w[C.color]=[C]});let M=[];return Object.keys(w).forEach(C=>{M=M.concat(w[C].sort((W,te)=>W.owing_amount-te.owing_amount))}),M};break;case"color-des":j=b=>{const w={};b.forEach(C=>{C.color in w?w[C.color].push(C):w[C.color]=[C]});let M=[];return Object.keys(w).forEach(C=>{M=M.concat(w[C].sort((W,te)=>te.owing_amount-W.owing_amount))}),M};break;default:j=b=>b;break}return{writeOff:y,btnAdd:d,setBtnAdd:o,editBtn:t,setEditBtn:i,details:p,setDetails:x,subscriptions:m,setSubscriptions:h,subscription:n,setSubscription:l,terminate:c,setTerminate:S,showReceipt:N,setShowReceipt:a,subLength:r,setSubLength:s,showVerify:v,setShowVerify:F,isVerified:R,setIsVerified:k,verificationType:L,setVerificationType:Y,isVisible:P,setIsVisible:B,showAlert:_,setShowAlert:V,message:z,setMessage:J,leaseeName:Q,setLeaseeName:A,clientViewProps:g,handleShowAlert:O,error:H,hideFooter:$,handleCloseAlert:G,sort:X,changeSort:K,sortFunc:j}}const _t=({show:d,handleClose:o,url:t,setVerified:i,verification_type:p,setCreditInfo:x})=>{const[m,h]=u.useState(!1),[n,l]=u.useState({}),{data:c,setData:S,post:N,reset:a}=le({otp:"",verification_type:p}),[r,s]=u.useState(!1),[v,F]=u.useState(30);u.useEffect(()=>{const P=setInterval(()=>{F(B=>B<=1?(clearInterval(P),s(!0),0):B-1)},1e3);return()=>clearInterval(P)},[]);const R=()=>ne(void 0,null,function*(){s(!1);try{(yield Z.get(reverseUrl("new_otp"))).data.status==="success"?T.success("OTP sent successfully"):T.error("Something went wrong! Please try again")}catch(P){T.error("Something went wrong! Please try again")}}),k=P=>S(I(E({},c),{[P.target.id]:P.target.value})),L=()=>c.otp.length!==4?(l({otp:"otp must be four digits"}),!1):parseInt(c.otp,10)?!0:(l({otp:"otp must be a number"}),!1),Y=P=>{console.log("indi"),P.preventDefault(),L()&&(N(reverseUrl(t),{onStart:()=>{h(!0)},onSuccess:B=>{o(),a(),T.success("Verification successful"),h(!1),typeof i=="function"&&i(!0)},onError:B=>{T.error("Something went wrong! Please try again"),l(B),console.log(erros),h(!1)}}),h(!1))};return e.jsx(e.Fragment,{children:e.jsx(q,{size:"lg",show:d,onHide:o,centered:!0,children:e.jsx("div",{children:e.jsxs("div",{className:"card card-raised",children:[e.jsx("div",{className:"card-header bg-info px-4",children:e.jsxs("div",{className:`d-flex justify-content-between
                                align-items-center`,children:[e.jsxs("div",{className:"me-4",children:[e.jsx("h2",{className:"display-6 mb-0 text-white",children:"Verify OTP"}),e.jsx("div",{className:"card-text"})]}),e.jsx("div",{className:"d-flex gap-2"})]})}),e.jsx("div",{className:"card-body p-4",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body p-4",style:{borderStyle:"solid",borderColor:"#26a69a"},children:[e.jsx(q.Body,{children:e.jsxs("div",{className:"row mb-4",children:[e.jsxs("div",{className:"col-md-12",children:[e.jsx("div",{children:e.jsx("p",{children:p==="individual"?"Enter the 4-digit code we sent to user's mobile number. This code will expire after 5 minutes":"Enter the 4-digit code we sent to user's email. This code will expire after 5 minutes"})}),e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Verification Code"}),e.jsx("input",{value:c.otp,onChange:k,type:"text",name:"otp",id:"otp",placeholder:"Enter your 4 digit otp",className:"form-control form-control-sm"}),n&&e.jsx("div",{className:"text-danger mt-1",children:n.otp})]})})]}),e.jsxs("div",{className:"mt-5 d-flex gap-4 align-items-center ",children:[e.jsxs("p",{children:["Didn't receive code?",e.jsx("button",{onClick:R,className:"ms-2 text-decoration-underline border-0 bg-transparent text-info",disabled:r===!1,children:"Resend Code"})]}),v>0&&e.jsx("p",{className:"text-success",children:`Resend code in ${v} seconds`})]})]})}),e.jsx(q.Footer,{children:e.jsx(de,{className:"text-white",variant:"info",onClick:P=>Y(P),disabled:m,children:m?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-grow spinner-grow-sm"}),e.jsx("span",{className:"ml-2",children:"processing.."})]}):"Verify"})})]})})})]})})})})};function St({leases:d,total_pages:o,total_items:t,current_page:i}){const{writeOff:p,btnAdd:x,setBtnAdd:m,editBtn:h,setEditBtn:n,details:l,setDetails:c,subscriptions:S,subscription:N,setSubscription:a,terminate:r,setTerminate:s,showReceipt:v,setShowReceipt:F,subLength:R,setSubLength:k,showVerify:L,setShowVerify:Y,setIsVerified:P,verificationType:B,setVerificationType:_,isVisible:V,setIsVisible:z,showAlert:J,setShowAlert:Q,message:A,setMessage:X,leaseeName:f,clientViewProps:g,handleShowAlert:O,handleCloseAlert:G,sort:$,changeSort:H,sortFunc:K}=wt();return console.log({allState:{leases:d,total_pages:o,total_items:t,current_page:i,btnAdd:x,editBtn:h,details:l,subscriptions:S,subscription:N,terminate:r,showReceipt:v,subLength:R,showVerify:L,verificationType:B,isVisible:V,showAlert:J,message:A,leaseeName:f,clientViewProps:g}}),e.jsxs(e.Fragment,{children:[e.jsxs(e.Fragment,{children:[e.jsx(yt,{clientViewProps:g}),e.jsxs(je,{onClose:G,show:J&&!!A,delay:1e4,className:"w-100 shadow-none mb-3",style:{background:"#dcfce7"},autohide:!0,children:[e.jsxs(je.Header,{className:"w-100",children:[e.jsx("strong",{className:"me-auto",children:f?`Following message has been sent to ${f}`:""}),e.jsx("small",{className:"text-muted text-capitalize ms-auto",children:"just now"})]}),e.jsx("p",{className:"p-3 m-0",children:A||""})]}),(N==null?void 0:N.type)==="individual"&&x&&e.jsx(ye,{action:"add",show:x,handleClose:()=>{m(!1),c({})},setShowVerify:Y,lesseeDetails:l,subscriptionPeriod:R,handleShowAlert:O}),(N==null?void 0:N.type)==="individual"&&h&&e.jsx(ye,{action:"edit",show:h,handleClose:()=>{n(!1),c({})},handleShowAlert:O,lesseeDetails:l,subscriptionPeriod:l.lease_period}),(N==null?void 0:N.type)==="company"&&x&&e.jsx(ve,{action:"add",show:x,handleClose:()=>{m(!1),c({})},lesseeDetails:l,subscriptionPeriod:R,handleShowAlert:O}),(N==null?void 0:N.type)==="company"&&h&&e.jsx(ve,{action:"edit",show:h,handleClose:()=>{n(!1),c({})},handleShowAlert:O,lesseeDetails:l,subscriptionPeriod:l.lease_period}),r&&e.jsx(lt,{show:r,handleClose:()=>{s(!1),c({})},handleShowAlert:O,leaseData:l}),v&&e.jsx(ue,{show:v,handleClose:j=>ne(this,null,function*(){X(j),F(!1),Q(!0),c({})}),leaseDetails:l,myKey:"leases"}),L&&e.jsx(_t,{show:L,handleClose:()=>{Y(!1)},url:"client-individual-verify-otp",setVerified:P,verification_type:B})]}),e.jsxs("main",{id:"hide-footer",children:[e.jsxs("div",{className:"container-xl p-0 mb-5",children:[e.jsx("h5",{className:"bg-info text-center text-white p-2 rounded-2",children:"Lease Management"}),e.jsxs("div",{className:"row justify-content-between align-items-center my-3 g-2",children:[e.jsx("div",{className:"col-5",children:e.jsx(We,{searchBy:"name"})}),e.jsx("div",{className:"col-auto",children:e.jsxs("div",{className:"d-flex border c-bg-light align-items-center",children:[e.jsx("label",{htmlFor:"sort",className:"form-label bg-white c-bg-light d-block my-0 text-nowrap p-1",children:"Sort By:"}),e.jsxs("select",{className:"form-select c-select rounded-0 border",name:"sort",id:"sort",value:$,onChange:H,children:[e.jsx("option",{value:"default",children:"default"}),e.jsx("option",{value:"rent-owing-asc",children:"Rent Owing asc"}),e.jsx("option",{value:"rent-owing-des",children:"Rent Owing des"}),e.jsx("option",{value:"color-asc",children:"color (rent asc)"}),e.jsx("option",{value:"color-des",children:"color (rent des)"})]})]})})]}),e.jsxs("div",{className:"position-relative bg-white rounded-2 border",children:[e.jsxs("h5",{className:"text-center py-2 mb-0 text-white border bg-info",children:["Active Leases - ",t]}),e.jsxs("table",{className:"table table-sm table-responsive table-bordered ",children:[e.jsx("thead",{className:"position-sticky bg-white shadow-sm c-table-top",children:e.jsxs("tr",{children:[e.jsx("th",{className:"ps-3",children:"Lease ID"}),e.jsx("th",{children:"Tenant"}),e.jsx("th",{children:"Customer Number"}),e.jsx("th",{className:"text-end",children:"Rent Owing"}),e.jsx("th",{colSpan:3,className:"text-center",children:"Actions"})]})}),e.jsx("tbody",{children:d?K(d).map((j,y)=>e.jsxs("tr",{className:j.terminated?"c-terminated":"",children:[e.jsx("th",{className:"ps-3",children:j.lease_id||""}),e.jsx("td",{children:e.jsx("button",{title:"double click to view client",type:"button",onDoubleClick:()=>g.openClientView(j),className:`custom-btn text-decoration-underline ${j.terminated?"c-terminated":""}`,children:j.name})}),e.jsx("td",{children:j.customer_number}),e.jsx("td",{className:`bg-${j.color} text-white text-end`,style:{backgroundColor:j.color=="light-red"?"#f87171":""},children:`${j.currency} ${pe(j.owing_amount).replace("$","")}`}),e.jsx("td",{className:"bg-info text-white text-center c-pointer",onClick:()=>{c(j),F(!0)},children:"Receipt"}),j.terminated?e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"c-terminated text-center",children:"Terminated"}),e.jsx("td",{className:"bg-danger text-white text-center c-pointer",onClick:()=>p(j),children:"Write off"})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"bg-primary text-white text-center c-pointer",onClick:()=>{c(j),n(!0),m(!1),a({type:j.is_company?"company":"individual"})},children:"Adjust"}),e.jsx("td",{className:"bg-danger text-white text-center c-pointer",onClick:()=>{c(j),s(!0)},children:"Terminate"})]})]},j.lease_id+"-"+y)):""})]}),e.jsx(Ze,{currentPage:i,totalPages:o})]})]}),e.jsx("div",{className:"position-fixed w-100 bottom-0 start-0",children:e.jsx(ze,{isVisible:V,setIsVisible:z,trigger:e.jsxs("button",{type:"button",className:"btn btn-lg c-bg-warning-light w-100 justify-content-center align-items-center text-capitalize gap-2 ",children:["Open Subscriptions",e.jsx("i",{className:"material-icons fs-3",children:"keyboard_arrow_up"})]}),children:e.jsx(Je,{title:"Open Subscriptions",children:e.jsxs("table",{className:"table table-responsive table-bordered",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Open Slots"}),e.jsx("th",{children:"Period (months)"}),e.jsx("th",{children:"Start Date"}),e.jsx("th",{children:"End Date"}),e.jsx("th",{colSpan:"2"})]})}),e.jsx("tbody",{children:S==null?void 0:S.map((j,y)=>e.jsx(Le.Fragment,{children:j.open_slots>0&&e.jsxs("tr",{children:[e.jsx("th",{children:y+1}),e.jsx("td",{children:j.subscription_class}),e.jsx("td",{children:j.open_slots}),e.jsx("td",{children:j.period_length}),e.jsx("td",{children:j.start_date}),e.jsx("td",{children:j.end_date}),e.jsx("td",{colSpan:"2",className:`${j.open_slots===0?"bg-gray":"bg-success"} text-white text-center c-pointer`,onClick:()=>{j.open_slots!==0&&(m(!0),n(!1),z(!1),c({}),a({type:j.subscription_class}),_(j.subscription_class),k(j.period_left))},children:"Activate"})]},"subscription"+y)},y))})]})})})})]})]})}St.layout=d=>e.jsx(He,{children:d,title:"Leases"});export{St as default};
