import{r as m,a as h,n as o,j as s}from"./media/main-0c174876.js";import{L as b}from"./Layout-9d8638fc.js";function j(n,t){const[l,e]=m.useState(!1),[c,i]=m.useState(!1),{data:r,setData:p,post:u}=h({email:"",password:""});m.useEffect(()=>{t?.type&&o[t.type](t.message),n?.type==="success"&&!c&&(o.success(n.message),i(!0))},[t,n]);function g(a){p({...r,[a.target.id]:a.target.value})}function f(){if(!r.email){o.error("Enter your email");return}u(reverseUrl("forgot_password"),{onStart(){e(!0)},onError(a){console.log(a),o.error("something went wrong"),e(!1)},onSuccess(a){a?.props?.success&&o.success(a.props.success.message),e(!1)}})}function x(a){a.preventDefault(),u(reverseUrl("login"),{onStart(){e(!0)},onSuccess(d){console.log(d),e(!1)},onError(d){console.log(d),e(!1)}})}return{data:r,isLoading:l,submitHandler:x,changeHandler:g,forgotPasswordHandler:f}}function N({flash:n,error:t}){const{data:l,isLoading:e,submitHandler:c,changeHandler:i,forgotPasswordHandler:r}=j(n,t);return s.jsxs("form",{className:"p-5 my-5",onSubmit:c,children:[s.jsxs("div",{className:"text-center",children:[s.jsx("i",{className:"material-icons fs-1",children:"person"}),s.jsx("h1",{className:"display-5 mb-0 mt-2",children:"Credi-Safe"}),s.jsx("div",{className:"subheading-1 mb-4",children:"Login to continue"})]}),s.jsxs("div",{className:"px-5",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"form-label",children:"Email"}),s.jsx("input",{value:l.email,onChange:i,type:"text",name:"email",id:"email",className:"form-control",required:!0})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"form-label",children:"Password"}),s.jsx("input",{value:l.password,onChange:i,type:"password",name:"password",id:"password",className:"form-control",required:!0})]}),s.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[s.jsx("button",{type:"button",className:"btn shadow-none btn-link px-0 text-capitalize",onClick:r,children:"Forgot Password?"}),s.jsx("button",{type:"submit",disabled:e,className:"btn btn-primary",children:e?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"spinner-grow spinner-grow-sm"}),s.jsx("span",{className:"ms-2",children:"processing.."})]}):"Login"})]})]})]})}N.layout=n=>s.jsx(b,{children:n,title:"Login"});export{N as default};
