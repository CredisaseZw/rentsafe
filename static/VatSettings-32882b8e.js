import{r as x,b as p,_ as u,j as e}from"./main-605f1a65.js";import{L as N}from"./Layout-d8d0e5c9.js";import{u as v}from"./index-5b34db9a.js";import"./lodash-65d1f6eb.js";import"./assertThisInitialized-3be3daa4.js";import"./removeClass-2f25b0a4.js";import"./Modal-fa119524.js";import"./index-4b3e425d.js";import"./formatting-9de8c923.js";import"./MultipleUpload-3f80ff47.js";import"./search-7ba8f0d2.js";function w(){const[i,n]=x.useState(),[o,r]=x.useState(!1);function l(){p.get("/accounting/vat-settings/").then(s=>{console.log(s),n(s.data)}).catch(s=>{console.error(s)})}x.useEffect(()=>{l()},[]);function c(){console.log("adding"),n(s=>[...s,{description:"",rate:""}])}function a(s){n(d=>d.filter((m,t)=>t!==s))}function j(s){s.preventDefault(),r(!0);const d=new FormData(s.target),m=Array.from(d.entries()).reduce((t,[b,g])=>{const[f,h]=b.split("-");return t[h]||(t[h]={}),t[h][f]=g,t},[]);console.log(m),p.post("/accounting/vat-settings/",m).then(t=>{r(!1),console.log(t),u.success("VAT settings updated successfully"),l()}).catch(t=>{r(!1),console.error(t),u.error(v(t))})}return{loading:o,taxOptions:i,addTaxOption:c,handleSubmit:j,removeTaxOption:a}}function y({}){const{taxOptions:i,loading:n,addTaxOption:o,handleSubmit:r,removeTaxOption:l}=w();return e.jsx("main",{children:e.jsxs("form",{className:"row",onSubmit:r,children:[e.jsx("div",{className:"col col-3 py-0",children:e.jsxs("div",{className:"bg-white border shadow-sm p-4",children:[e.jsx("div",{className:"mb-5 fw-bold",children:"Registration"}),e.jsxs("div",{className:"form-check mb-4",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",value:"registered",id:"vat_registered"}),e.jsx("label",{className:"form-check-label",htmlFor:"vat_registered",children:"V.A.T Registered"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"vat_registration_number",className:"form-label",children:"V.A.T Registration Number"}),e.jsx("input",{type:"text",className:"form-control",id:"vat_registration_number"})]})]})}),e.jsx("div",{className:"col col-9",children:e.jsxs("div",{children:[e.jsx("div",{className:"p-2 fw-bold text-center",children:"Tax Options"}),e.jsx("div",{className:"custom-mn-h-2 mb-3",children:e.jsxs("table",{className:"table table-sm table-respnsive border shadow-sm bg-white",children:[e.jsx("thead",{className:"position-sticky c-table-top c-bg-light shadow-sm c-z-5",children:e.jsxs("tr",{className:"c-force-borders text-center",children:[e.jsx("th",{className:"ps-3",style:{width:"60%"},children:e.jsx("div",{children:" Description"})}),e.jsx("th",{children:e.jsx("div",{children:"Rate (%) "})}),e.jsx("th",{children:e.jsx("div",{children:" "})})]})}),e.jsxs("tbody",{children:[!(i!=null&&i.length)&&e.jsx("tr",{children:e.jsx("td",{colSpan:3,children:e.jsx("div",{className:"p-5 bg-white d-flex justify-content-center align-items-center",children:"Nothing to show"})})}),i==null?void 0:i.map((c,a)=>e.jsxs("tr",{children:[e.jsx("td",{style:{width:"60%"},className:"custom-mn-w-2 ps-3",children:e.jsx("div",{children:e.jsx("input",{type:"text",className:"form-control",name:"description-"+a,id:"description-"+a,defaultValue:c.description})})}),e.jsx("td",{className:"ps-3",children:e.jsx("div",{children:e.jsx("input",{type:"text",className:"form-control",name:"rate-"+a,id:"rate-"+a,defaultValue:c.rate})})}),e.jsx("td",{className:"pe-3 custom-mx-w-05 text-center",children:e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>l(a),children:e.jsx("i",{className:"material-icons",children:"close"})})})]},a))]})]})}),e.jsx("div",{className:"text-end",children:e.jsxs("button",{type:"button",disabled:n,className:"btn btn-outline-info ",onClick:o,children:[e.jsx("i",{className:"leading-icon material-icons",children:"add"}),"Add Tax Item"]})}),e.jsx("div",{className:"text-center",children:e.jsxs("button",{disabled:n,type:"submit",className:"btn btn-info text-white",children:[n?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-grow spinner-grow-sm"}),e.jsx("span",{className:"d-inline-block ms-2",children:"Updating.."})]}):"Update",e.jsx("i",{className:"trailing-icon material-icons",children:"save"})]})})]})})]})})}y.layout=i=>e.jsx(N,{children:i,title:"Sales Categories"});export{y as default};
