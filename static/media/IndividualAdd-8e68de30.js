import{R as C,a as _,_ as o,b as w,j as e}from"./main-5c37eb2a.js";import{M as S}from"./MultipleUpload-041fb25a.js";import{a as T,u as v}from"./index-acacf113.js";import"./lodash-9dd08774.js";import{C as E}from"./ContentModal-bd5c0b74.js";function A(c,u,b,s,N){const[h,d]=C.useState(!1),{data:l,setData:j,post:p,reset:r,errors:a}=_({firstName:s?.firstname||"",lastName:s?.surname||"",identificationNumber:s?.identification_number||"",identificationType:s?.identification_type||"",gender:s?.gender||"",dob:s?.dob||"",maritalStatus:s?.marital_status||"",mobileNumber:s?.mobile||"",landLine:s?.landline||"",emailAddress:s?.email||"",currentEmployer:s?.employer_name||"",jobTitle:s?.job_title||"",dateOfemployment:s?.date_of_employment||"",individualId:s?.id||-1,address:s?.address||"",unitNumber:s?.unit_number||"",buildingName:s?.building_name||"",streetNumber:s?.street_number||"",streetName:s?.street_name||"",suburb:s?.suburb||"",city:s?.city||"",province:s?.province||"",country:s?.country||"",areaCode:s?.area_code||""}),x=t=>j({...l,[t.target.id]:t.target.value});function n(t){t.preventDefault(),d(!0);let i=!0;if(l.identificationType==="nationalid"&&!T(l.identificationNumber)&&(o.error("Invalid national id number"),i=!1),(l.mobileNumber.length<10||l.mobileNumber.length>13||/\D/.test(l.mobileNumber))&&(o.error("Mobile number must be between 10 and 13 digits"),i=!1),!i){d(!1);return}p(reverseUrl(u),{onError:m=>o.error("Error adding individual! "+v(m)),onFinish:()=>d(!1),onSuccess:()=>{r(),o.success("Individual added!"),c()}})}function f(t){t.preventDefault(),d(!0);const i=b==="edit-agent"?reverseUrl("edit-agent"):reverseUrl("edit_individual_user");w.post(i,l).then(m=>{m.data.status==="success"?(o.success(m.data.message),N(g=>[...g.filter(y=>y.id!==l.individualId),{id:l.individualId,firstname:l.firstName,surname:l.lastName,identification_number:l.identificationNumber,identification_type:l.identificationType,gender:l.gender,dob:l.dob,marital_status:l.maritalStatus,address:l.address,mobile:l.mobileNumber,land_line:l.landLine,email_address:l.emailAddress,employer_name:l.currentEmployer,job_title:l.jobTitle,date_of_employment:l.dateOfemployment}]),c()):o(v(m.data))}).catch(m=>o.error("An error occurred: "+v(m))).finally(()=>d(!1))}return{data:l,errors:a,isLoading:h,handleEdit:f,submitSingle:n,changeHandler:x}}function U({show:c,handleClose:u,url:b,handleSingle:s,isSingle:N,isMultiple:h,handleMultiple:d,action:l,userDetails:j,setFetchedData:p}){const{data:r,errors:a,isLoading:x,changeHandler:n,handleEdit:f,submitSingle:t}=A(u,b,l,j,p),i=N?"single":h?"multiple":"";return e.jsx(E,{size:"lg",show:c,handleClose:u,titleOverideContent:e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("button",{className:`btn btn-sm ${i==="single"?"btn-info text-white":"btn-light border border-2"}`,onClick:s,children:"Single"}),e.jsx("button",{className:`btn btn-sm ${i==="multiple"?"btn-info text-white":"btn-light border border-2"}`,onClick:d,children:"Multiple"})]}),children:e.jsx("div",{style:{minHeight:"600px"},className:"p-3",children:i==="single"?e.jsxs("form",{onSubmit:l==="create"?t:f,children:[e.jsxs("fieldset",{className:"p-4 mb-3",children:[e.jsx("legend",{children:l==="create"?"Add Individual":"Edit Individual"}),e.jsxs("p",{className:"text-center fw-bold",children:["All fields marked with a star (",e.jsx("span",{className:"text-danger",children:"*"}),") are required."]}),e.jsxs("div",{className:"row row-cols-3 mb-2",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"form-label",children:["Surname ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{value:r.lastName,onChange:n,name:"lastName",required:!0,id:"lastName",className:"form-control form-control-sm "}),a?.lastName&&e.jsx("div",{className:"small px-2 text-danger mt-1",children:a.lastName})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"form-label",children:["First Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{value:r.firstName,onChange:n,name:"firstName",required:!0,id:"firstName",className:"form-control form-control-sm "}),a?.firstName&&e.jsx("div",{className:"small px-2 text-danger mt-1",children:a.firstName})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"form-label",children:["Identification Type ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{className:"form-select form-select-sm ",name:"identificationType",id:"identificationType",required:!0,onChange:n,value:r.identificationType,children:[e.jsx("option",{value:"",disabled:!0,children:"Select..."}),e.jsx("option",{value:"nationalid",children:"National ID"}),e.jsx("option",{value:"passport",children:"Passport"}),e.jsx("option",{value:"servicesid",disabled:!0,children:"Service ID"})]}),a?.identificationType&&e.jsx("div",{className:"small px-2 text-danger mt-1",children:a.identificationType})]})]}),e.jsxs("div",{className:"row row-cols-3 mb-2",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"form-label",children:["Identification Number",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{value:r.identificationNumber,onChange:n,required:!0,name:"identificationNumber",id:"identificationNumber",placeholder:"eg. 12345678K29",className:"form-control form-control-sm "}),a?.identificationNumber&&e.jsx("div",{className:"small px-2 text-danger mt-1",children:a.identificationNumber})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Gender"}),e.jsxs("select",{className:"form-select form-select-sm ",onChange:n,id:"gender",name:"gender",value:r.gender,children:[e.jsx("option",{value:"",disabled:!0,children:"Select..."}),e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"female",children:"Female"}),e.jsx("option",{value:"other",children:"Other"})]}),a?.gender&&e.jsx("div",{className:"small px-2 text-danger mt-1",children:a.gender})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Date Of birth"}),e.jsx("input",{value:r.dob,onChange:n,type:"date",name:"dob",id:"dob",className:"form-control form-control-sm "}),a.dob&&e.jsx("div",{className:"small px-2 text-danger mt-1",children:a.dob})]})]}),e.jsxs("div",{className:"row row-cols-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Marital Status"}),e.jsxs("select",{className:"form-select form-select-sm ",name:"maritalStatus",onChange:n,id:"maritalStatus",value:r.maritalStatus,children:[e.jsx("option",{value:"",disabled:!0,children:"Select..."}),e.jsx("option",{value:"single",children:"Single"}),e.jsx("option",{value:"Married",children:"Married"}),e.jsx("option",{value:"Other",children:"Other"})]}),a?.maritalStatus&&e.jsx("div",{className:"small px-2 text-danger mt-1",children:a.maritalStatus})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"form-label",children:["Mobile Number ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{value:r.mobileNumber,onChange:n,type:"tel",name:"mobileNumber",id:"mobileNumber",required:!0,placeholder:"eg. 263777123456",className:"form-control form-control-sm "}),a?.mobileNumber&&e.jsx("div",{className:"small px-2 text-danger mt-1",children:a.mobileNumber})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Email Address"}),e.jsx("input",{value:r.emailAddress,onChange:n,type:"email",id:"emailAddress",name:"emailAddress",className:"form-control form-control-sm "}),a?.emailAddress&&e.jsx("div",{className:"small px-2 text-danger mt-1",children:a.emailAddress})]})]})]}),e.jsxs("fieldset",{className:"p-4 mb-3",children:[e.jsx("legend",{children:"Address"}),e.jsxs("div",{className:"row row-cols-3 mb-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Unit Number"}),e.jsx("input",{value:r.unitNumber,onChange:n,id:"unitNumber",name:"unitNumber",className:"form-control form-control-sm "}),a?.unitNumber&&e.jsx("div",{className:"small px-2 text-danger mt-1",children:a.unitNumber})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Building / Complex Name"}),e.jsx("input",{value:r.buildingName,onChange:n,id:"buildingName",name:"buildingName",className:"form-control form-control-sm "}),a?.buildingName&&e.jsx("div",{className:"small px-2 text-danger mt-1",children:a.buildingName})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"form-label",children:["Street Number",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{value:r.streetNumber,onChange:n,id:"streetNumber",required:!0,name:"streetNumber",className:"form-control form-control-sm "}),a?.streetNumber&&e.jsx("div",{className:"small px-2 text-danger mt-1",children:a.streetNumber})]})]}),e.jsxs("div",{className:"row row-cols-3 mb-2",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"form-label",children:["Street Name",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{value:r.streetName,onChange:n,id:"streetName",required:!0,name:"streetName",className:"form-control form-control-sm "}),a?.streetName&&e.jsx("div",{className:"small px-2 text-danger mt-1",children:a.streetName})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"form-label",children:["Suburb / Area",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{value:r.suburb,onChange:n,id:"suburb",required:!0,name:"suburb",className:"form-control form-control-sm "}),a?.suburb&&e.jsx("div",{className:"small px-2 text-danger mt-1",children:a.suburb})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"form-label",children:["City / Town",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{value:r.city,onChange:n,id:"city",required:!0,name:"city",className:"form-control form-control-sm "}),a?.city&&e.jsx("div",{className:"small px-2 text-danger mt-1",children:a.city})]})]}),e.jsxs("div",{className:"row row-cols-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Province"}),e.jsx("input",{value:r.province,onChange:n,id:"province",name:"province",className:"form-control form-control-sm "}),a?.province&&e.jsx("div",{className:"small px-2 text-danger mt-1",children:a.province})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"form-label",children:["Country",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{value:r.country,onChange:n,id:"country",required:!0,name:"country",className:"form-control form-control-sm "}),a?.country&&e.jsx("div",{className:"small px-2 text-danger mt-1",children:a.country})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"form-label",children:["Area Code",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{value:r.areaCode,onChange:n,id:"areaCode",required:!0,name:"areaCode",className:"form-control form-control-sm "}),a?.areaCode&&e.jsx("div",{className:"small px-2 text-danger mt-1",children:a.areaCode})]})]})]}),e.jsxs("fieldset",{className:"p-4 mb-4",children:[e.jsx("legend",{children:"Employment Details"}),e.jsxs("div",{className:"row row-cols-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Current Employer"}),e.jsx("input",{value:r.currentEmployer,onChange:n,id:"currentEmployer",name:"currentEmployer",className:"form-control form-control-sm "}),a?.currentEmployer&&e.jsx("div",{className:"small px-2 text-danger mt-1",children:a.currentEmployer})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Current Job Title"}),e.jsx("input",{value:r.jobTitle,onChange:n,name:"jobTitle",id:"jobTitle",className:"form-control form-control-sm "}),a?.jobTitle&&e.jsx("div",{className:"small px-2 text-danger mt-1",children:a.jobTitle})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Date of Employment"}),e.jsx("input",{value:r.dateOfemployment,onChange:n,type:"date",id:"dateOfemployment",name:"dateOfemployment",className:"form-control form-control-sm "}),a?.dateOfemployment&&e.jsx("div",{className:"small px-2 text-danger mt-1",children:a.dateOfemployment})]})]})]}),e.jsx("div",{className:"text-end",children:e.jsx("button",{type:"submit",disabled:x,className:"btn btn-info text-white",children:x?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-grow spinner-grow-sm"}),e.jsx("span",{className:"ms-2",children:"processing.."})]}):"Save and Proceed"})})]}):e.jsx(S,{type:"individual",actionType:"user"})})})}export{U as I};
