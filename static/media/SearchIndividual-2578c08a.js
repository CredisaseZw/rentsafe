import{r as i,j as e,a as Y,_ as T,b as M,H as J}from"./main-1b2a1629.js";import{h as X,L as Z}from"./Layout-a2b7455a.js";import{N as K}from"./NotFound-7d5dbdab.js";import{I as Q}from"./IndividualAdd-231d8c78.js";import{B as $}from"./BulkIconButton-c0476d47.js";import{B as D}from"./BulkUploadModal-574c11cb.js";import{M as R}from"./Modal-19f9d1ed.js";import{B}from"./Button-22a2a8b5.js";import"./lodash-eaafb3e5.js";import"./assertThisInitialized-3be3daa4.js";import"./removeClass-c613858c.js";import"./index-b312c35d.js";import"./formatting-fad57ba1.js";import"./MultipleUpload-2d56c521.js";import"./index-b054ed0b.js";import"./search-296d0e7b.js";import"./index-a8895249.js";import"./Button-1265d1f8.js";function ee({showReport:l,handleCloseReport:c,selectedRow:o,reportData:s}){const h=i.useRef();console.log(s),console.log("reportData",s.historic_claims_list);const p=()=>{const t=h.current;X().from(t).set({margin:1,filename:"modal-content.pdf",html2canvas:{scale:2},jsPDF:{orientation:"portrait"}}).save()};return e.jsx(e.Fragment,{children:e.jsxs(R,{show:l,onHide:c,fullscreen:!0,children:[e.jsx(R.Body,{ref:h,children:e.jsxs("div",{style:{border:"3px solid #176987",width:"100%",padding:"20px"},id:"report",children:[e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsxs("div",{children:[e.jsx("div",{children:"CrediSafe"}),e.jsx("div",{children:"Securing you rental investments"})]}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsxs("div",{children:[e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{})]}),e.jsxs("div",{style:{lineHeight:"10px"},children:[e.jsx("p",{style:{textAlign:"right"},children:"+263 71 882 2460"}),e.jsx("p",{style:{textAlign:"right"},children:"credisafezw@gmail.com"}),e.jsx("p",{style:{textAlign:"right"},children:" www.credi-safe.com"})]})]})]}),e.jsx("div",{className:"mt-5 mb-2",children:e.jsxs("h6",{children:["Rent Payment Status Report on"," ",e.jsxs("span",{style:{fontWeight:"bold",color:"#176987"},children:[s?.individual_details?.firstname," ",s?.individual_details?.surname," "]}),"as at ",Date().toLocaleString()]})}),e.jsx("div",{className:"mb-5",style:{border:"1px solid #176987",width:"100%",padding:"5px"},children:e.jsxs("div",{style:{padding:"10px"},children:[e.jsx("table",{className:"table table-bordered",children:e.jsxs("tbody",{children:[e.jsx("tr",{style:{lineHeight:"5px",fontSize:"12px",backgroundColor:"#190062"},children:e.jsx("th",{scope:"row",colSpan:5,className:"text-center text-white",children:"PAYMENT STATUS CLASSIFICATION/INDICATOR"})}),e.jsxs("tr",{style:{lineHeight:"5px",fontSize:"12px"},children:[e.jsx("th",{scope:"row",className:"text-center",children:"Status"}),e.jsx("td",{style:{backgroundColor:s?.risk_data?.class=="non-payer"||s?.risk_data?.class=="high-high"||s?.risk_data?.class=="high"||s?.risk_data?.class=="medium"||s?.risk_data?.class=="low"?s?.risk_data?.color:"",color:s?.risk_data?.class=="non-payer"?"white":""},className:"text-center text-white",children:s?.risk_data?.class=="non-payer"?"Non-Payer":s?.risk_data?.class=="high-high"?"High-High":s?.risk_data?.class=="high"?"High":s?.risk_data?.class=="medium"?"Medium":s?.risk_data?.class=="low"?"Low":""})]})]})}),e.jsx("table",{className:"table table-bordered",children:e.jsxs("tbody",{children:[e.jsx("tr",{style:{lineHeight:"5px",fontSize:"12px",backgroundColor:"#808080"},children:e.jsx("th",{scope:"row",colSpan:5,className:"text-center text-white",children:"STATUS INDEX"})}),e.jsxs("tr",{style:{lineHeight:"5px",fontSize:"12px"},children:[e.jsx("th",{scope:"row",className:"text-center bg-success text-white",children:"Low"}),e.jsx("td",{style:{fontWeight:"bold"},className:"text-center bg-warning text-white",children:"Medium Risk"}),e.jsx("td",{style:{backgroundColor:"#ff33cc",fontWeight:"bold"},className:"text-center text-white",children:"High Risk - Lower"}),e.jsx("td",{style:{fontWeight:"bold",backgroundColor:"red"},className:"text-center text-white",children:"High Risk - Upper"}),e.jsx("td",{style:{fontWeight:"bold"},className:"text-center bg-dark text-white",children:"None Payer"})]}),e.jsxs("tr",{style:{lineHeight:"5px",fontSize:"12px"},children:[e.jsx("th",{scope:"row",className:"text-center text-nowrap",children:"Current"}),e.jsx("td",{className:"text-center text-nowrap",children:"1st Month Outstanding"}),e.jsx("td",{className:"text-center text-nowrap",children:"2nd Month Outstanding"}),e.jsx("td",{className:"text-center text-nowrap",children:"3rd Month Outstanding"}),e.jsx("td",{className:"text-center text-nowrap",children:"+3 Months Outstanding"})]})]})})]})}),e.jsx("div",{className:"mb-5",style:{border:"1px solid #176987",width:"100%",padding:"2px"},children:e.jsxs("div",{style:{padding:"10px"},children:[e.jsx("table",{className:"table table-bordered",children:e.jsxs("tbody",{children:[e.jsx("tr",{style:{lineHeight:"5px",fontSize:"12px",backgroundColor:"#305496"},children:e.jsx("th",{scope:"row",colSpan:4,className:"text-center text-white",children:"PERSONAL DETAILS"})}),e.jsx("tr",{style:{lineHeight:"5px",fontSize:"12px",backgroundColor:"#b4c6e7"},children:e.jsx("th",{scope:"row",colSpan:4,className:"text-center ",children:"Identification Details"})}),e.jsxs("tr",{style:{lineHeight:"5px",fontSize:"12px"},children:[e.jsx("th",{scope:"row",children:"Surname :"}),e.jsx("td",{children:s?.individual_details?.surname}),e.jsx("td",{children:"First Name :"}),e.jsx("td",{children:s?.individual_details?.firstname})]}),e.jsxs("tr",{style:{lineHeight:"5px",fontSize:"12px"},children:[e.jsx("th",{scope:"row",children:"National ID No:"}),e.jsx("td",{children:s?.individual_details?.national_id}),e.jsx("td",{children:"Date Of Birth:"}),e.jsx("td",{children:s?.individual_details?.dob})]}),e.jsxs("tr",{style:{lineHeight:"5px",fontSize:"12px"},children:[e.jsx("th",{scope:"row",children:"Marital Status :"}),e.jsxs("td",{children:[" ",s?.individual_details?.marital_status]}),e.jsx("td",{children:"Gender:"}),e.jsx("td",{children:s?.individual_details?.gender})]})]})}),e.jsx("table",{className:"table table-bordered",children:e.jsxs("tbody",{children:[e.jsx("tr",{style:{lineHeight:"5px",fontSize:"12px",backgroundColor:"#b4c6e7"},children:e.jsx("th",{scope:"row",colSpan:6,className:"text-center ",children:"Contact Details"})}),e.jsxs("tr",{style:{lineHeight:"5px",fontSize:"12px"},children:[e.jsx("th",{scope:"row",children:"Mobile Number :"}),e.jsx("td",{children:s?.individual_details?.mobile}),e.jsx("td",{children:"Telephone No:"}),e.jsx("td",{children:s?.individual_details?.landline})]}),e.jsxs("tr",{style:{lineHeight:"5px",fontSize:"12px"},children:[e.jsx("th",{scope:"row",children:"Address :"}),e.jsx("td",{colSpan:3,children:s?.individual_details?.address})]}),e.jsxs("tr",{style:{lineHeight:"5px",fontSize:"12px"},children:[e.jsx("th",{scope:"row",children:"Email :"}),e.jsx("td",{colSpan:3,children:s?.individual_details?.email})]})]})}),e.jsx("table",{className:"table table-bordered",children:e.jsxs("tbody",{children:[e.jsx("tr",{style:{lineHeight:"5px",fontSize:"12px",backgroundColor:"#b4c6e7"},children:e.jsx("th",{scope:"row",colSpan:6,className:"text-center ",children:"Employment History"})}),e.jsxs("tr",{style:{lineHeight:"5px",fontSize:"12px"},children:[e.jsx("th",{className:"text-center",scope:"row",children:"Employer"}),e.jsx("td",{className:"text-center",children:"Position"}),e.jsx("td",{className:"text-center",children:"Start Date"})]}),e.jsxs("tr",{style:{lineHeight:"5px",fontSize:"12px"},children:[e.jsx("th",{scope:"row",className:"text-center",children:s?.individual_details?.employer_name}),e.jsx("td",{className:"text-center",children:s?.individual_details?.job_title}),e.jsx("td",{className:"text-center",children:s?.individual_details?.date_of_employment})]})]})})]})}),e.jsx("div",{className:"mb-5",style:{border:"1px solid #176987",width:"100%",padding:"2px"},children:e.jsx("div",{style:{padding:"10px"},children:e.jsx("table",{className:"table table-bordered",children:e.jsxs("tbody",{children:[e.jsx("tr",{style:{lineHeight:"5px",fontSize:"12px",backgroundColor:"#305496"},children:e.jsx("th",{scope:"row",colSpan:7,className:"text-center text-white",children:"OUTSTANDING RENTALS"})}),e.jsx("tr",{style:{lineHeight:"5px",fontSize:"12px",backgroundColor:"#b4c6e7"},children:e.jsx("th",{scope:"row",colSpan:5,className:"text-center ",children:"Claims"})}),e.jsxs("tr",{style:{lineHeight:"5px",fontSize:"12px"},children:[e.jsx("th",{scope:"row",children:"Claimant"}),e.jsx("td",{children:"Type"}),e.jsx("td",{children:"Currency"}),e.jsx("td",{children:"Amount"}),e.jsx("td",{children:"Date of Claim "})]}),s?.claims_list?.length>0&&s?.claims_list?.map((t,d)=>e.jsxs("tr",{style:{lineHeight:"5px",fontSize:"12px"},children:[e.jsx("th",{scope:"row",children:t.creditor}),e.jsx("td",{children:t.type||""}),e.jsx("td",{children:t.currency}),e.jsx("td",{children:t?.owing_amount?Number(t.owing_amount).toFixed(2):""}),e.jsx("td",{children:t.claim_date})]},"claim"+d))]})})})}),e.jsx("div",{className:"mb-5",style:{border:"1px solid #176987",width:"100%",padding:"2px"},children:e.jsxs("div",{style:{padding:"10px"},children:[e.jsx("table",{className:"table table-bordered",children:e.jsxs("tbody",{children:[e.jsx("tr",{style:{lineHeight:"5px",fontSize:"12px",backgroundColor:"#305496"},children:e.jsx("th",{scope:"row",colSpan:7,className:"text-center",children:"Active"})}),e.jsxs("tr",{style:{lineHeight:"5px",fontSize:"12px"},children:[e.jsx("th",{scope:"row",children:"Creditor"}),e.jsx("td",{children:"Type"}),e.jsx("td",{children:"Outstanding Since"}),e.jsx("td",{children:"Amount"})]}),s?.credit_details?.map(t=>e.jsxs("tr",{style:{lineHeight:"5px",fontSize:"12px"},children:[e.jsx("th",{scope:"row",children:t.credit_type}),e.jsxs("td",{children:[" ",t.type||""]}),e.jsxs("td",{children:[" ",t.start_date]}),e.jsxs("td",{children:[t.currency," ",t?.overdue_amount?Number(t.overdue_amount).toFixed(2):""]})]},t.lease_id))]})}),e.jsx("table",{className:"table table-bordered",children:e.jsxs("tbody",{children:[e.jsx("tr",{style:{lineHeight:"5px",fontSize:"12px",backgroundColor:"#b4c6e7"},children:e.jsx("th",{scope:"row",colSpan:10,className:"text-center ",children:"Historic"})}),e.jsxs("tr",{style:{lineHeight:"5px",fontSize:"12px"},children:[e.jsx("th",{className:"",scope:"row",colSpan:2,children:"Creditor"}),e.jsx("td",{children:"Type"}),e.jsx("td",{className:"",children:"Outstanding Since"}),e.jsx("td",{className:"",children:" Amount"})]}),s.historic_claims_list?.length>0&&s.historic_claims_list?.map((t,d)=>e.jsxs("tr",{style:{lineHeight:"5px",fontSize:"12px"},children:[e.jsxs("th",{scope:"row",colSpan:2,children:[" ",t?.creditor]}),e.jsx("td",{children:t?.type||""}),e.jsx("td",{children:t?.claim_date}),e.jsx("td",{children:t?.balance_amount?Number(t.balance_amount).toFixed(2):""})]},"claim"+d))]})})]})}),e.jsxs("div",{style:{width:"100%",padding:"2px"},children:[e.jsx("hr",{}),e.jsxs("div",{children:[e.jsx("p",{children:"Disclaimer: This report is confidential and intended solely for the individual or entity to whom it is addressed. Information on this report is valid at the time of enquiry only. If verification is required, please contact us on the details provided above."}),e.jsx("p",{children:"Terms and Conditions apply."}),e.jsx("p",{children:"Copyrights © CrediSafe Zimbabwe"}),e.jsx("p",{children:"All rights reserved"})]})]})]})}),e.jsxs(R.Footer,{children:[e.jsx(B,{className:"mr-4",variant:"secondary",onClick:c,children:"Close"}),e.jsx(B,{variant:"primary",onClick:p,children:"Print"})]})]})})}function se(l){const[c,o]=i.useState(!1),s=()=>o(!1),h=()=>o(!0),[p,t]=i.useState([]),[d,j]=i.useState(!1),[v,u]=i.useState(!1),[_,x]=i.useState(!1),[f,b]=i.useState(!1),[k,y]=i.useState(!0),[C,N]=i.useState(!1),[H,g]=i.useState({}),[I,z]=i.useState(null),[A,S]=i.useState(null),[a,w]=i.useState(!1),{data:F,setData:L,post:P}=Y({searchParam:"fullname",searchValue:""});function V(m,n){m.preventDefault(),T.loading("Loading...",{duration:2500,position:"top-center"});try{u(!0),n&&(M.post(reverseUrl("enquiry_count"),{isIndividual:!0,isCompany:!1,individualId:n}).then(r=>{}),M.post(reverseUrl("individual-report"),{individualId:n}).then(r=>{z(n),r.data?.is_eligible?r.data?.require_otp?S(r.data):(S(r.data),w(!0)):T.error("You have exhausted your free enquiries. Please subscribe to get more enquiries.",{duration:4e3,id:"error_"})}).catch(r=>{console.error("There was an error!",r)}))}finally{u(!1)}}function E(m){L({...F,[m.target.id]:m.target.value})}function O(m){if(m.preventDefault(),F.searchValue===""){g({searchValue:"The search value field is required."});return}P(reverseUrl(l),{onStart:()=>{j(!0),t([]),g({}),x(!1)},onSuccess:n=>{const r=G=>JSON.stringify(G)==="{}";n.props.result.length===0&&x(!0),r(n.props.result)===!0||t(n.props.result),j(!1)},onError:n=>{j(!1)}})}function U(){y(!0),b(!1)}function q(){b(!0),y(!1)}function W(){N(!0)}return{show:c,data:F,errors:H,notFound:_,isSingle:k,isLoading:d,isBulkAdd:C,isMultiple:f,reportData:A,isVerified:a,selectedRow:I,fetchedData:p,isReportLoading:v,handleShow:h,setNotFound:x,handleClose:s,handleSingle:U,setIsBulkAdd:N,setIsVerified:w,changeHandler:E,submitHandler:O,handleMultiple:q,handleShowReport:V,handleBulkButtonClick:W}}function te({url:l}){const{show:c,data:o,errors:s,notFound:h,isSingle:p,isLoading:t,isBulkAdd:d,isMultiple:j,reportData:v,isVerified:u,selectedRow:_,fetchedData:x,isReportLoading:f,handleShow:b,setNotFound:k,handleClose:y,handleSingle:C,setIsBulkAdd:N,setIsVerified:H,changeHandler:g,submitHandler:I,handleMultiple:z,handleShowReport:A,handleBulkButtonClick:S}=se(l);return e.jsxs("div",{children:[e.jsxs(e.Fragment,{children:[e.jsx(J,{title:"Search Individual"}),e.jsx(D,{type:"individual",actionType:"user",show:d,handleClose:()=>N(!1)}),u&&e.jsx(ee,{showReport:u,handleCloseReport:()=>H(!1),selectedRow:_,reportData:v}),e.jsx(Q,{show:c,isMultiple:j,isSingle:p,handleMultiple:z,handleSingle:C,handleClose:y,action:"create",url:"cl-store-individual"})]}),e.jsxs("div",{className:"container-xl",children:[e.jsx("h4",{className:"bg-info text-white p-2 rounded rounded-5 text-center mb-4",children:"Search Individual"}),e.jsxs("table",{className:"table table-sm table-bordered border-2 bg-white",children:[e.jsxs("thead",{className:"position-sticky c-table-top bg-white c-z-5",children:[e.jsx("tr",{children:e.jsx("th",{colSpan:4,children:e.jsxs("form",{className:"d-flex gap-3 align-items-end p-2",onSubmit:I,children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:"searchValue",children:"Filter by Name / Surname / ID"}),e.jsx("input",{name:"searchValue",id:"searchValue",value:o.searchValue,onChange:g,className:"form-control",placeholder:"search..."}),s.searchValue&&e.jsx("small",{className:"text-danger p-1",children:s.searchValue})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:"searchParam",children:"Select filter Parameter"}),e.jsxs("select",{name:"searchParam",id:"searchParam",className:"form-select",onChange:g,children:[e.jsx("option",{value:"fullname",children:"Full name"}),e.jsx("option",{value:"nationalid",children:"Identification Number"})]})]}),e.jsxs("button",{type:"submit",disabled:t,className:"btn btn-info text-white",children:[e.jsx("i",{className:"leading-icon material-icons",children:"search"}),t?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-grow spinner-grow-sm"}),e.jsx("span",{className:"ms-2",children:"Searching.."})]}):"Search"]}),e.jsx($,{handleClick:S})]})})}),e.jsxs("tr",{className:"c-bg-light",children:[e.jsx("th",{className:"px-3",children:"Forenames"}),e.jsx("th",{className:"px-3",children:"surname"}),e.jsx("th",{className:"px-3",children:"Identification Number"}),e.jsx("th",{className:"px-3 text-center",children:"Select"})]})]}),e.jsx("tbody",{children:t?e.jsx("tr",{children:e.jsx("td",{colSpan:4,children:e.jsxs("div",{className:"custom-h-2 d-flex align-items-center justify-content-center p-5",children:[e.jsx("span",{className:"spinner-grow spinner-grow-sm me-2 text-info"}),e.jsx("span",{children:"Searching.."})]})})}):x?.length>0&&x.map(a=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-3",children:a.firstname}),e.jsx("td",{className:"px-3",children:a.surname}),e.jsx("td",{className:"px-3",children:a.national_id}),e.jsx("td",{className:"text-center",children:e.jsx("button",{disabled:f,className:"btn btn-info text-white text-center justify-content-center w-100 btn-sm",onClick:w=>A(w,a.id),children:f?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-grow spinner-grow-sm"}),e.jsx("span",{className:"ms-2",children:"processing.."})]}):"View"})})]},a.id))})]}),h&&e.jsx("div",{className:"d-flex justify-content-center bg-white p-4",children:e.jsx(K,{handleShow:b,handleCloseModal:()=>k(!1),userType:"individual",searchValue:o.searchValue})})]})]})}function ie({individuals:l}){return e.jsx(te,{individuals:l,url:"cl-search-individuals"})}ie.layout=l=>e.jsx(Z,{children:l});export{ie as default};
