import{r as s,u as k,a as H,j as e,_ as T}from"./main-5c37eb2a.js";import{C as P}from"./CompanyAdd-2bb508e8.js";import{D as L}from"./DeleteUserConfirmition-a838d3ec.js";import{N as O}from"./NotFound-21773505.js";import{P as q}from"./PageHeader-f1ad1720.js";import"./MultipleUpload-041fb25a.js";import"./Modal-34f4a559.js";import"./removeClass-bd16bbcb.js";import"./index-5a5385bf.js";import"./index-c8db368f.js";import"./index-acacf113.js";import"./formatting-fad57ba1.js";import"./lodash-9dd08774.js";import"./Button-df900eff.js";import"./Button-373e56ce.js";function ne(){const[z,h]=s.useState(!1),[A,u]=s.useState(!1),[i,l]=s.useState([]),E=()=>{u(!1),l([])},p=()=>{u(!0)},[o,d]=s.useState(!1),[R,r]=s.useState(!1),[x,j]=s.useState(!1),[f,g]=s.useState(!0),[b,N]=s.useState(!1),[m,n]=s.useState({}),[S,y]=s.useState(!1),[v,w]=s.useState({}),{is_internal:C}=k().props.Auth,V=()=>{g(!0),j(!1)},_=()=>{j(!0),g(!1)},{data:c,setData:B,post:I}=H({searchParam:"registration_name",searchValue:""}),D=a=>B(a.target.name,a.target.value),M=a=>{if(a.preventDefault(),c.searchValue===""){w({searchValue:"Please enter a search value"}),r(!1);return}I(reverseUrl("search_company_users"),{onStart:()=>{d(!0),r(!1),w({}),l([])},onSuccess:t=>{console.log(t.props.result.length),t.props.result.length>0?l(t.props.result):r(!0),d(!1)},onError:t=>{T.error("Nothing to search..."),d(!1)}})};return e.jsxs("main",{children:[e.jsx(q,{title:"Company Users"}),e.jsxs("div",{className:"container-xl p-5",children:[e.jsx("div",{className:"row align-items-center mb-5",children:e.jsx("div",{className:"col-12 col-md-auto",children:e.jsx("form",{className:"mb-5",onSubmit:M,children:e.jsxs("div",{className:"d-flex flex-column flex-sm-row gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:"",children:"Filter by Reg. Number / Name"}),e.jsx("input",{value:c.searchValue,onChange:D,type:"text",name:"searchValue",id:"searchValue",className:"form-control form-control"}),v.searchValue&&e.jsx("small",{className:"text-danger",children:v.searchValue})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:"",children:"Select filter Parameter"}),e.jsxs("select",{className:"form-select","aria-label":"Default select example",name:"searchParam",id:"searchParam",onChange:D,children:[e.jsx("option",{value:"registration_name",children:"Registration Name"}),e.jsx("option",{value:"registration_number",children:"Registration Number"})]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("button",{className:"btn btn-raised-info text-white",type:"submit",disabled:o,children:[e.jsx("i",{className:"leading-icon material-icons",children:"search"}),o?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-grow spinner-grow-sm"}),e.jsx("span",{className:"ml-2",children:"Searching.."})]}):"Search"]})})]})})})}),e.jsx(P,{show:A,handleClose:E,handleShow:p,isSingle:f,handleSingle:V,isMultiple:x,handleMultiple:_,setAddSuccessful:h,action:"create",url:C!==1?"client-create-company":"create-company"}),e.jsx("div",{className:"card card-raised",children:e.jsx("div",{className:"card-body p-4",children:e.jsxs("div",{className:"datatable-wrapper datatable-loading no-footer sortable searchable fixed-columns",children:[e.jsxs("div",{className:"datatable-container",children:[e.jsx("table",{className:"table table-striped",children:e.jsxs("tbody",{children:[e.jsxs("tr",{style:{backgroundColor:"#e4e4e4"},children:[e.jsx("th",{scope:"col",children:"Registration Name"}),e.jsx("th",{scope:"col",children:"Registration Number"}),e.jsx("th",{scope:"col",children:"Edit"}),e.jsx("th",{scope:"col",children:"Delete"})]}),o?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-grow spinner-grow-sm"}),e.jsx("span",{className:"ml-2",children:"searching.."})]}):i?.length>0?i?.map(({id:a,registration_number:t,registration_name:F})=>e.jsxs("tr",{children:[e.jsx("th",{scope:"row",children:F}),e.jsx("td",{children:t}),e.jsx("td",{children:a?e.jsx("button",{type:"button",className:"btn btn-raised text-info d-flex align-items-center justify-content-center",onClick:()=>{y(!0),n(i?.find(U=>U.id===a)),l([])},children:e.jsx("i",{className:"leading-icon material-icons",children:"edit"})}):""}),e.jsx("td",{children:a?e.jsx("button",{type:"button",className:"btn btn-raised text-danger d-flex align-items-center justify-content-center",onClick:()=>{N(!0),n({id:a,name:F})},children:e.jsx("i",{className:"leading-icon material-icons",children:"delete"})}):""})]},a)):""]})}),e.jsx("div",{className:"row justify-content-center",children:e.jsxs("div",{className:"col-md-auto",children:[R&&e.jsx(O,{handleShow:p,handleCloseModal:()=>{r(!1),c.searchValue=""},userType:"company",searchValue:c.searchValue}),b&&e.jsx(L,{url:"delete_company_user",handleClose:()=>{N(!1),n({})},show:b,type:"company",setFetchedData:l,userId:m.id,name:m.name}),S&&e.jsx(P,{show:S,handleClose:()=>{y(!1),n({})},handleShow:()=>{},isSingle:f,handleSingle:V,isMultiple:x,handleMultiple:_,setAddSuccessful:h,action:"edit",url:C!==1?"edit_company_user":"client-edit-company",companyData:m})]})})]}),e.jsxs("div",{className:"datatable-bottom",children:[e.jsx("div",{className:"datatable-info"}),e.jsx("nav",{className:"datatable-pagination"})]})]})})})]})]})}export{ne as default};
