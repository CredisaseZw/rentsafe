import{r as a,u as T,a as L,j as e}from"./main-fd1dbebb.js";import{D as O}from"./DeleteUserConfirmition-05cd1bfe.js";import{B as R}from"./BulkIconButton-29ae32b7.js";import{I as C}from"./IndividualAdd-96a92829.js";import{N as q}from"./NotFound-fdfb51cf.js";import{P as z}from"./PageHeader-dc261636.js";import"./Modal-d83c389c.js";import"./removeClass-ca95e0eb.js";import"./index-6b877c29.js";import"./Button-136f52db.js";import"./Button-5fcf723c.js";import"./index-cf4ac53f.js";import"./formatting-fad57ba1.js";import"./lodash-1fb00506.js";import"./MultipleUpload-3d28a641.js";function ie(){const[h,x]=a.useState(!1),V=()=>x(!1),[G,P]=a.useState(!1),B=()=>x(!0),[c,l]=a.useState([]),[o,d]=a.useState(!1),[j,m]=a.useState(!1),[p,f]=a.useState(!1),[u,n]=a.useState({}),[A,r]=a.useState(!1),[b,N]=a.useState(!1),[g,v]=a.useState(!0),[S,w]=a.useState({}),{is_internal:E}=T().props.Auth,{data:i,setData:_,post:k}=L({searchParam:"fullname",searchValue:""}),F=s=>_({...i,[s.target.id]:s.target.value}),M=s=>{if(s.preventDefault(),i.searchValue==="")return w({searchValue:"Please enter a search value"});k(reverseUrl("search_individual_users"),{onStart:()=>{d(!0),m(!1),l([]),w({})},onSuccess:t=>{t.props.result.length<1?r(!0):(l(t.props.result),r(!1)),d(!1)},onError:t=>{d(!1)}})},D=()=>{v(!0),N(!1)},y=()=>{N(!0),v(!1)};return e.jsxs("main",{children:[e.jsx(z,{title:"Individual Users"}),e.jsxs("div",{className:"container-xl p-5",children:[e.jsx("div",{className:"row align-items-center mb-5",children:e.jsx("div",{className:"col-12 col-md-auto",children:e.jsx("form",{className:"mb-5",onSubmit:M,children:e.jsxs("div",{className:"d-flex flex-column flex-sm-row gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:"",children:"Filter by Full Name/ID"}),e.jsx("input",{value:i.searchValue,onChange:s=>{F(s),r(!1)},type:"text",name:"searchValue",id:"searchValue",className:"form-control form-control"}),S.searchValue&&e.jsx("small",{className:"text-danger",children:S.searchValue})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",htmlFor:"",children:"Select filter Parameter"}),e.jsxs("select",{className:"form-select","aria-label":"Default select example",name:"searchParam",id:"searchParam",onChange:F,children:[e.jsx("option",{value:"fullname",children:"Full name"}),e.jsx("option",{value:"nationalid",children:"National ID"})]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("button",{className:"btn btn-raised-info text-white",type:"submit",disabled:o,children:[e.jsx("i",{className:"leading-icon material-icons",children:"search"}),o?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-grow spinner-grow-sm"}),e.jsx("span",{className:"ml-2",children:"Searching.."})]}):"Search"]})}),e.jsx("div",{className:"mt-4",children:e.jsx(R,{})})]})})})}),h&&e.jsx(C,{show:h,isMultiple:b,isSingle:g,handleMultiple:y,handleSingle:D,handleClose:V,setAddSuccessful:P,action:"create",url:E!==1?"client-create-individual":"create-individual-user"}),j&&e.jsx(C,{show:j,handleClose:()=>{m(!1),n({})},isMultiple:b,isSingle:g,handleMultiple:y,handleSingle:D,setAddSuccessful:()=>{},setFetchedData:()=>{},action:"edit",userDetails:u}),p&&e.jsx(O,{url:"delete_individual_user",handleClose:()=>{f(!1),n({})},show:p,type:"individual",setFetchedData:l,userId:u.id,name:u.name}),e.jsx("div",{className:"card card-raised",children:e.jsx("div",{className:"card-body p-4",children:e.jsxs("div",{className:"datatable-wrapper datatable-loading no-footer sortable searchable fixed-columns",children:[e.jsxs("div",{className:"datatable-container",children:[e.jsx("table",{className:"table table-striped",children:e.jsxs("tbody",{children:[e.jsxs("tr",{style:{backgroundColor:"#e4e4e4"},children:[e.jsx("th",{scope:"col",children:"Forenames"}),e.jsx("th",{scope:"col",children:"surname"}),e.jsx("th",{scope:"col",children:"National ID"}),e.jsx("th",{scope:"col",children:"Edit"}),e.jsx("th",{scope:"col",children:"Delete"})]}),o?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-grow spinner-grow-sm"}),e.jsx("span",{className:"ml-2",children:"searching.."})]}):c&&c?.map(({id:s,firstname:t,surname:I,identification_number:U})=>e.jsxs("tr",{children:[e.jsx("th",{scope:"row",children:t}),e.jsx("td",{children:I}),e.jsx("td",{children:U}),s?e.jsxs(e.Fragment,{children:[e.jsx("td",{children:e.jsx("button",{type:"button",className:"btn btn-raised text-info d-flex align-items-center justify-content-center",onClick:()=>{m(!0),n(c?.find(H=>H.id===s)),l([])},children:e.jsx("i",{className:"leading-icon material-icons",children:"edit"})})}),e.jsx("td",{children:e.jsx("button",{type:"button",className:"btn btn-raised text-danger d-flex align-items-center justify-content-center",onClick:()=>{f(!0),n({id:s,name:t+" "+I})},children:e.jsx("i",{className:"leading-icon material-icons",children:"delete"})})})]}):null]},s))]})}),e.jsx("div",{className:"row justify-content-center",children:e.jsx("div",{className:"col-md-auto",children:A&&e.jsx(q,{handleShow:B,searchValue:i.searchValue,handleCloseModal:()=>r(!1),userType:"Individual"})})})]}),e.jsxs("div",{className:"datatable-bottom",children:[e.jsx("div",{className:"datatable-info"}),e.jsx("nav",{className:"datatable-pagination"})]})]})})})]})]})}export{ie as default};
