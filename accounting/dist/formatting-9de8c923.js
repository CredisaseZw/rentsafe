var h=Object.defineProperty,w=Object.defineProperties;var k=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var v=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable;var b=(a,t,e)=>t in a?h(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e,c=(a,t)=>{for(var e in t||(t={}))v.call(t,e)&&b(a,e,t[e]);if(C)for(var e of C(t))x.call(t,e)&&b(a,e,t[e]);return a},i=(a,t)=>w(a,k(t));function T(a,t){return[...a,...t].sort((e,u)=>new Date(e.date_updated)-new Date(u.date_updated)).map(e=>i(c({},e),{type:e.reference==="cash-receipt"?"payment":"invoice"}))}const G=a=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:2}).format(a),M=(a,t)=>{const e={safe:"Current",low:"Past Due 1-30 days",medium:"Past Due 31-60 days",high:"Past Due 61-90 days","non-payer":"Past Due 90+ days"},u=(r,s)=>{const d=r.map(n=>({label:e[n.status]||"Current",amount:n.amount_owing||0,bg:s[n.status]||"green"}));return Object.values(e).forEach(n=>{if(!d.some(o=>o.label===n)){const o=n==="Current"?"green":n==="Past Due 1-30 days"?"orange":n==="Past Due 31-60 days"?"#f87171":n==="Past Due 61-90 days"?"#991b1b":"black";d.push({label:n,amount:0,bg:o})}}),d.sort((n,o)=>{const p=["Current","Past Due 1-30 days","Past Due 31-60 days","Past Due 61-90 days","Past Due 90+ days"];return p.indexOf(n.label)-p.indexOf(o.label)}),d},m={safe:"green",low:"orange",medium:"#f87171",high:"#991b1b","non-payer":"black"},f=u(a,m),y=u(t,m),D=f.reduce((r,s)=>r+s.amount,0)||0,g=y.reduce((r,s)=>r+s.amount,0)||0,l=f.map(r=>i(c({},r),{percentage:Math.round(r.amount/D*100,2)||0})),P=y.map(r=>i(c({},r),{percentage:Math.round(r.amount/g*100,2)||0}));return{creditGivenWithPercentages:l,creditTakenWithPercentages:P,totalCreditGiven:D,totalCreditTaken:g}};export{T as a,G as f,M as t};
